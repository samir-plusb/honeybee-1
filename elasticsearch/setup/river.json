{
    "type" : "couchdb",
    "couchdb" : {
        "host" : "localhost",
        "port" : 5984,
        "db" : "workflow",
        "filter" : null,
        "script" : "ctx._type = ('WorkflowItem' === ctx.doc.type) ? 'item' : 'ticket'; if ('item' == ctx._type && ctx.doc.ticketId) { ctx._parent = ctx.doc.ticketId; }"
    },
    "index" : {
        "index" : "midas",
        "type": "item",
        "bulk_size" : "100",
        "bulk_timeout" : "10ms"
    }
}