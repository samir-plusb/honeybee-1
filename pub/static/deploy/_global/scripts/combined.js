

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/jquery-1.7.2.js */

/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?+r:f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n,a[n][r])}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?t.outerHTML=e.outerHTML:n!=="input"||e.type!=="checkbox"&&e.type!=="radio"?n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(s.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached")}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function kt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?1:0,o=4;if(r>0){if(n!=="border")for(;i<o;i+=2)n||(r-=parseFloat(s.css(e,"padding"+xt[i]))||0),n==="margin"?r+=parseFloat(s.css(e,n+xt[i]))||0:r-=parseFloat(s.css(e,"border"+xt[i]+"Width"))||0;return r+"px"}r=Tt(e,t);if(r<0||r==null)r=e.style[t];if(bt.test(r))return r;r=parseFloat(r)||0;if(n)for(;i<o;i+=2)r+=parseFloat(s.css(e,"padding"+xt[i]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+xt[i]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+xt[i]))||0);return r+"px"}function Qt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(qt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Gt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Wt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Gt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Gt(e,n,r,i,"*",o)),c}function Yt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function Zt(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||At.test(e)?r(e,i):Zt(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&s.type(t)==="object")for(var i in t)Zt(e+"["+i+"]",t[i],n,r);else r(e,t)}function en(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function tn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function an(){try{return new e.XMLHttpRequest}catch(t){}}function fn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function yn(){return setTimeout(bn,0),gn=s.now()}function bn(){gn=t}function wn(e,t){var n={};return s.each(mn.concat.apply([],mn.slice(0,t)),function(){n[this]=e}),n}function En(e){if(!ln[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){cn||(cn=n.createElement("iframe"),cn.frameBorder=cn.width=cn.height=0),t.appendChild(cn);if(!hn||!cn.createElement)hn=(cn.contentWindow||cn.contentDocument).document,hn.write((s.support.boxModel?"<!doctype html>":"")+"<html><body>"),hn.close();r=hn.createElement(e),hn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(cn)}ln[e]=i}return ln[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){if(typeof n!="string"||!n)return null;var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u,a){var f,l=r==null,c=0,h=e.length;if(r&&typeof r=="object"){for(c in r)i.access(e,n,c,r[c],1,u,s);o=1}else if(s!==t){f=a===t&&i.isFunction(s),l&&(f?(f=n,n=function(e,t,n){return f.call(i(e),n)}):(n.call(e,s),n=null));if(n)for(;c<h;c++)n(e[c],r,f?s.call(e[c],c,n(e[c],r)):s,a);o=1}return o?e:l?n.call(e):h?n(e[0],r):u},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test("Â ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h,p=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?p(o):u==="function"&&(!e.unique||!v.has(o))&&n.push(o)},d=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,f=!0,h=l||0,l=0,c=n.length;for(;n&&h<c;h++)if(n[h].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}f=!1,n&&(e.once?i===!0?v.disable():n=[]:r&&r.length&&(i=r.shift(),v.fireWith(i[0],i[1])))},v={add:function(){if(n){var e=n.length;p(arguments),f?c=n.length:i&&i!==!0&&(l=e,d(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){f&&s<=c&&(c--,s<=h&&h--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&v.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(f?e.once||r.push([t,n]):(!e.once||!i)&&d(t,n)),this},fire:function(){return v.fireWith(this,arguments),this},fired:function(){return!!a}};return v};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v=n.createElement("div"),m=n.documentElement;v.setAttribute("className","t"),v.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=v.getElementsByTagName("*"),i=v.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=v.getElementsByTagName("input")[0],t={leadingWhitespace:v.firstChild.nodeType===3,tbody:!v.getElementsByTagName("tbody").length,htmlSerialize:!!v.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:v.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},s.boxModel=t.boxModel=n.compatMode==="CSS1Compat",a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete v.test}catch(g){t.deleteExpando=!1}!v.addEventListener&&v.attachEvent&&v.fireEvent&&(v.attachEvent("onclick",function(){t.noCloneEvent=!1}),v.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),a.setAttribute("name","t"),v.appendChild(a),f=n.createDocumentFragment(),f.appendChild(v.lastChild),t.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,f.removeChild(a),f.appendChild(v);if(v.attachEvent)for(p in{submit:1,change:1,focusin:1})h="on"+p,d=h in v,d||(v.setAttribute(h,"return;"),d=typeof v[h]=="function"),t[p+"Bubbles"]=d;return f.removeChild(v),f=o=u=v=a=null,s(function(){var r,i,o,u,a,f,c,h,p,m,g,y,b,w=n.getElementsByTagName("body")[0];if(!w)return;h=1,b="padding:0;margin:0;border:",g="position:absolute;top:0;left:0;width:1px;height:1px;",y=b+"0;visibility:hidden;",p="style='"+g+b+"5px solid #000;",m="<div "+p+"display:block;'><div style='"+b+"0;display:block;overflow:hidden;'></div></div>"+"<table "+p+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",r=n.createElement("div"),r.style.cssText=y+"width:0;height:0;position:static;top:0;margin-top:"+h+"px",w.insertBefore(r,w.firstChild),v=n.createElement("div"),r.appendChild(v),v.innerHTML="<table><tr><td style='"+b+"0;display:none'></td><td>t</td></tr></table>",l=v.getElementsByTagName("td"),d=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=d&&l[0].offsetHeight===0,e.getComputedStyle&&(v.innerHTML="",c=n.createElement("div"),c.style.width="0",c.style.marginRight="0",v.style.width="2px",v.appendChild(c),t.reliableMarginRight=(parseInt((e.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)===0),typeof v.style.zoom!="undefined"&&(v.innerHTML="",v.style.width=v.style.padding="1px",v.style.border=0,v.style.overflow="hidden",v.style.display="inline",v.style.zoom=1,t.inlineBlockNeedsLayout=v.offsetWidth===3,v.style.display="block",v.style.overflow="visible",v.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=v.offsetWidth!==3),v.style.cssText=g+y,v.innerHTML=m,i=v.firstChild,o=i.firstChild,a=i.nextSibling.firstChild.firstChild,f={doesNotAddBorder:o.offsetTop!==5,doesAddBorderForTableAndCells:a.offsetTop===5},o.style.position="fixed",o.style.top="20px",f.fixedPosition=o.offsetTop===20||o.offsetTop===15,o.style.position=o.style.top="",i.style.overflow="hidden",i.style.position="relative",f.subtractsBorderForOverflowNotVisible=o.offsetTop===-5,f.doesNotIncludeMarginInBodyOffset=w.offsetTop!==h,e.getComputedStyle&&(v.style.marginTop="1%",t.pixelMargin=(e.getComputedStyle(v,null)||{marginTop:0}).marginTop!=="1%"),typeof r.style.zoom!="undefined"&&(r.style.zoom=1),w.removeChild(r),c=v=r=null,s.extend(t,f)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u,a,f=this[0],l=0,h=null;if(e===t){if(this.length){h=s.data(f);if(f.nodeType===1&&!s._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")===0&&(u=s.camelCase(u.substring(5)),c(f,u,h[u]));s._data(f,"parsedAttrs",!0)}}return h}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",s.access(this,function(n){if(n===t)return h=this.triggerHandler("getData"+i,[r[0]]),h===t&&f&&(h=s.data(f,e),h=c(f,e,h)),h===t&&r[1]?this.data(r[0]):h;r[1]=n,this.each(function(){var t=s(this);t.triggerHandler("setData"+i,r),s.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?s.queue(this[0],e):n===t?this:this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise(n)}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,s.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,s.prop,e,t,arguments.length>1)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.type]||s.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u,a=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;a<o;a++)i=r[a],i&&(n=s.propFix[i]||i,u=w.test(i),u||s.attr(e,i,""),e.removeAttribute(E?i:n),u&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0,coords:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/(?:^|\s)hover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t
[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler,o=v.selector),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:o&&_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=s.event.special[n.type]||{},f=[],l,c,h,p,d,v,m,g,y,b,w;o[0]=n,n.delegateTarget=this;if(a.preDispatch&&a.preDispatch.call(this,n)===!1)return;if(i&&(!n.button||n.type!=="click")){p=s(this),p.context=this.ownerDocument||this;for(h=n.target;h!=this;h=h.parentNode||this)if(h.disabled!==!0){v={},g=[],p[0]=h;for(l=0;l<i;l++)y=r[l],b=y.selector,v[b]===t&&(v[b]=y.quick?D(h,y.quick):p.is(b)),v[b]&&g.push(y);g.length&&f.push({elem:h,matches:g})}}r.length>i&&f.push({elem:this,matches:r.slice(i)});for(l=0;l<f.length&&!n.isPropagationStopped();l++){m=f[l],n.currentTarget=m.elem;for(c=0;c<m.matches.length&&!n.isImmediatePropagationStopped();c++){y=m.matches[c];if(u||!n.namespace&&!y.namespace||n.namespace_re&&n.namespace_re.test(y.namespace))n.data=y.data,n.handleObj=y,d=((s.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,o),d!==t&&(n.result=d,d===!1&&(n.preventDefault(),n.stopPropagation()))}}return a.postDispatch&&a.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),r._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9||r===11){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));d.match.globalPOS=v;var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.globalPOS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")[\\s/>]","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.access(this,function(e){return e===t?s.text(this):this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this
.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){return s.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(s.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,function(e,t){t.src?s.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||s.isXMLDoc(e)||!nt.test("<"+e.nodeName+">")?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o,u,a,f=[];t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);for(var l=0,c;(c=e[l])!=null;l++){typeof c=="number"&&(c+="");if(!c)continue;if(typeof c=="string")if(!Z.test(c))c=t.createTextNode(c);else{c=c.replace(Q,"<$1></$2>");var h=(G.exec(c)||["",""])[1].toLowerCase(),p=ot[h]||ot._default,d=p[0],v=t.createElement("div"),m=ut.childNodes,g;t===n?ut.appendChild(v):V(t).appendChild(v),v.innerHTML=p[1]+c+p[2];while(d--)v=v.lastChild;if(!s.support.tbody){var y=Y.test(c),b=h==="table"&&!y?v.firstChild&&v.firstChild.childNodes:p[1]==="<table>"&&!y?v.childNodes:[];for(a=b.length-1;a>=0;--a)s.nodeName(b[a],"tbody")&&!b[a].childNodes.length&&b[a].parentNode.removeChild(b[a])}!s.support.leadingWhitespace&&K.test(c)&&v.insertBefore(t.createTextNode(K.exec(c)[0]),v.firstChild),c=v.childNodes,v&&(v.parentNode.removeChild(v),m.length>0&&(g=m[m.length-1],g&&g.parentNode&&g.parentNode.removeChild(g)))}var w;if(!s.support.appendChecked)if(c[0]&&typeof (w=c.length)=="number")for(a=0;a<w;a++)pt(c[a]);else pt(c);c.nodeType?f.push(c):f=s.merge(f,c)}if(r){o=function(e){return!e.type||it.test(e.type)};for(l=0;f[l];l++){u=f[l];if(i&&s.nodeName(u,"script")&&(!u.type||it.test(u.type)))i.push(u.parentNode?u.parentNode.removeChild(u):u);else{if(u.nodeType===1){var E=s.grep(u.getElementsByTagName("script"),o);f.splice.apply(f,[l+1,0].concat(E))}r.appendChild(u)}}}return f},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var vt=/alpha\([^)]*\)/i,mt=/opacity=([^)]*)/,gt=/([A-Z]|^ms)/g,yt=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,wt=/^([\-+])=([\-+.\de]+)/,Et=/^margin/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Top","Right","Bottom","Left"],Tt,Nt,Ct;s.fn.css=function(e,n){return s.access(this,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)},e,n,arguments.length>1)},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Tt(e,"opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=wt.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Tt)return Tt(e,n)},swap:function(e,t,n){var r={},i,s;for(s in t)r[s]=e.style[s],e.style[s]=t[s];i=n.call(e);for(s in t)e.style[s]=r[s];return i}}),s.curCSS=s.css,n.defaultView&&n.defaultView.getComputedStyle&&(Nt=function(e,t){var n,r,i,o,u=e.style;return t=t.replace(gt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),!s.support.pixelMargin&&i&&Et.test(t)&&bt.test(n)&&(o=u.width,u.width=n,n=i.width,u.width=o),n}),n.documentElement.currentStyle&&(Ct=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s==null&&o&&(i=o[t])&&(s=i),bt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Tt=Nt||Ct,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth!==0?kt(e,t,r):s.swap(e,St,function(){return kt(e,t,r)})},set:function(e,t){return yt.test(t)?t+"px":t}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(vt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=vt.test(o)?o.replace(vt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){return s.swap(e,{display:"inline-block"},function(){return t?Tt(e,"margin-right"):e.style.marginRight})}})}),s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)}),s.each({margin:"",padding:"",border:"Width"},function(e,t){s.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+xt[r]+t]=i[r]||i[r-2]||i[0];return s}}});var Lt=/%20/g,At=/\[\]$/,Ot=/\r?\n/g,Mt=/#.*$/,_t=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Dt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Pt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Bt=/^\/\//,jt=/\?/,Ft=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,It=/^(?:select|textarea)/i,qt=/\s+/,Rt=/([?&])_=[^&]*/,Ut=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,zt=s.fn.load,Wt={},Xt={},Vt,$t,Jt=["*/"]+["*"];try{Vt=i.href}catch(Kt){Vt=n.createElement("a"),Vt.href="",Vt=Vt.href}$t=Ut.exec(Vt.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&zt)return zt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(Ft,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||It.test(this.nodeName)||Dt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Yt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Yt(e,t),e},ajaxSettings:{url:Vt,isLocal:Pt.test($t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Jt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Qt(Wt),ajaxTransport:Qt(Xt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?en(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=tn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=_t.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(Mt,"").replace(Bt,$t[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(qt),r.crossDomain==null&&(g=Ut.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==$t[1]&&g[2]==$t[2]&&(g[3]||(g[1]==="http:"?80:443))==($t[3]||($t[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Gt(Wt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Ht.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(jt.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Rt,"$1_="+x);r.url=T+(T===r.url?(jt.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Jt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Gt(Xt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)Zt(o,e[o],n,i);return r.join("&").replace(Lt,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var nn=s.now(),rn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+nn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=typeof t.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(rn.test(t.url)||i&&rn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(rn,c),t.url===f&&(i&&(l=l.replace(rn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var sn=e.ActiveXObject?function(){for(var e in un)un[e](0,1)}:!1,on=0,un;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&an()||fn()}:an,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,sn&&delete un[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p);try{h.text=u.responseText}catch(e){}try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++on,sn&&(un||(un={},s(e).unload(sn)),un[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var ln={},cn,hn,pn=/^(?:toggle|show|hide)$/,dn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,vn,mn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],gn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(wn("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),(i===""&&s.css(r,"display")==="none"||!s.contains(r.ownerDocument.documentElement,r))&&s._data(r,"olddisplay",En(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(wn("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(wn("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d,v,m;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]);if((l=s.cssHooks[o])&&"expand"in l){c=l.expand(e[o]),delete e[o];for(a in c)a in e||(e[a]=c[a])}}for(o in e){u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||En(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],pn.test(u)?(m=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),m?(s._data(this,"toggle"+a,m==="show"?"hide":"show"),f[m]()):f[u]()):(h=dn.exec(u),p=f.cur(),h?(d=parseFloat(h[2]),v=h[3]||(s.cssNumber[a]?"":"px"),v!=="px"&&(s.style(this,a,(d||1)+v),p=(d||1)/f.cur()*p,s.style(this,a,p+v)),h[1]&&(d=(h[1]==="-="?-1:1)*d+p),f.custom(p,d,v)):f.custom(p,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:wn("show",1),slideUp:wn("hide",1),slideToggle:wn("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=gn||yn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){s._data(i.elem,"fxshow"+i.prop)===t&&(i.options.hide?s._data(i.elem,"fxshow"+i.prop,i.start):i.options.show&&s._data(i.elem,"fxshow"+i.prop,i.end))},u()&&s.timers.push(u)&&!vn&&(vn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=gn||yn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(vn),vn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(mn.concat.apply([],mn),function(e,t){t.indexOf("margin")&&(s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var Sn,xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?Sn=function(e,t,n,r){try{r=e.getBoundingClientRect()}catch(i){}if(!r||!s.contains(n,e))return r?{top:r.top,left:r.left}:{top:0,left:0};var o=t.body,u=Nn(t),a=n.clientTop||o.clientTop||0,f=n.clientLeft||o.clientLeft||0,l=u.pageYOffset||s.support.boxModel&&n.scrollTop||o.scrollTop,c=u.pageXOffset||s.support.boxModel&&n.scrollLeft||o.scrollLeft,h=r.top+l-a,p=r.left+c-f;return{top:h,left:p}}:Sn=function(e,t,n){var r,i=e.offsetParent,o=e,u=t.body,a=t.defaultView,f=a?a.getComputedStyle(e,null):e.currentStyle,l=e.offsetTop,c=e.offsetLeft;while((e=e.parentNode)&&e!==u&&e!==n){if(s.support.fixedPosition&&f.position==="fixed")break;r=a?a.getComputedStyle(e,null):e.currentStyle,l-=e.scrollTop,c-=e.scrollLeft,e===i&&(l+=e.offsetTop,c+=e.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(e.nodeName))&&(l+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),o=i,i=e.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&r.overflow!=="visible"&&(l+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),f=r}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return s.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(n.scrollTop,u.scrollTop),c+=Math.max(n.scrollLeft,u.scrollLeft)),{top:l,left:c}},s.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){s.offset.setOffset(this,e,t)});var n=this[0],r=n&&n.ownerDocument;return r?n===r.body?s.offset.bodyOffset(n):Sn(n,r,r.documentElement):null},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);s.fn[e]=function(i){return s.access(this,function(e,i,o){var u=Nn(e);if(o===t)return u?n in u?u[n]:s.support.boxModel&&u.document.documentElement[i]||u.document.body[i]:e[i];u?u.scrollTo(r?s(u).scrollLeft():o,r?o:s(u).scrollTop()):e[i]=o},e,i,arguments.length,null)}}),s.each({Height:"height",Width:"width"},function(e,n){var r="client"+e,i="scroll"+e,o="offset"+e;s.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,n,"padding")):this[n]():null},s.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,n,e?"margin":"border")):this[n]():null},s.fn[n]=function(e){return s.access(this,function(e,n,u){var a,f,l,c;if(s.isWindow(e))return a=e.document,f=a.documentElement[r],s.support.boxModel&&f||a.body&&a.body[r]||f;if(e.nodeType===9)return a=e.documentElement,a[r]>=a[i]?a[r]:Math.max(e.body[i],a[i],e.body[o],a[o]);if(u===t)return l=s.css(e,n),c=parseFloat(l),s.isNumeric(c)?c:l;s(e).css(n,u)},n,e,arguments.length,null)}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})})(window);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/underscore.1.3.3.min.js */

// Underscore.js 1.3.3
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore
(function(){function e(t,n,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped);if(t.isEqual&&E.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&E.isFunction(n.isEqual))return n.isEqual(t);var i=a.call(t);if(i!=a.call(n))return!1;switch(i){case"[object String]":return t==""+n;case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var s=r.length;s--;)if(r[s]==t)return!0;r.push(t);var s=0,o=!0;if("[object Array]"==i){if(s=t.length,o=s==n.length)for(;s--&&(o=s in t==s in n&&e(t[s],n[s],r)););}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var u in t)if(E.has(t,u)&&(s++,!(o=E.has(n,u)&&e(t[u],n[u],r))))break;if(o){for(u in n)if(E.has(n,u)&&!(s--))break;o=!s}}return r.pop(),o}var t=this,n=t._,r={},i=Array.prototype,s=Object.prototype,o=i.slice,u=i.unshift,a=s.toString,f=s.hasOwnProperty,l=i.forEach,c=i.map,h=i.reduce,p=i.reduceRight,d=i.filter,v=i.every,m=i.some,g=i.indexOf,y=i.lastIndexOf,s=Array.isArray,b=Object.keys,w=Function.prototype.bind,E=function(e){return new _(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.3.3";var S=E.each=E.forEach=function(e,t,n){if(e!=null)if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(n,e[i],i,e)===r)break}else for(i in e)if(E.has(e,i)&&t.call(n,e[i],i,e)===r)break};E.map=E.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(S(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},E.reduce=E.foldl=E.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=E.bind(t,r)),i?e.reduce(t,n):e.reduce(t);S(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},E.reduceRight=E.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=E.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=E.toArray(e).reverse();return r&&!i&&(t=E.bind(t,r)),i?E.reduce(s,t,n,r):E.reduce(s,t)},E.find=E.detect=function(e,t,n){var r;return x(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},E.filter=E.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(S(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},E.reject=function(e,t,n){var r=[];return e==null?r:(S(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},E.every=E.all=function(e,t,n){var i=!0;return e==null?i:v&&e.every===v?e.every(t,n):(S(e,function(e,s,o){if(!(i=i&&t.call(n,e,s,o)))return r}),!!i)};var x=E.some=E.any=function(e,t,n){t||(t=E.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,n):(S(e,function(e,s,o){if(i||(i=t.call(n,e,s,o)))return r}),!!i)};E.include=E.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:n=x(e,function(e){return e===t})},E.invoke=function(e,t){var n=o.call(arguments,2);return E.map(e,function(e){return(E.isFunction(t)?t||e:e[t]).apply(e,n)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.max=function(e,t,n){if(!t&&E.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-Infinity;var r={computed:-Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},E.min=function(e,t,n){if(!t&&E.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return Infinity;var r={computed:Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},E.shuffle=function(e){var t=[],n;return S(e,function(e,r){n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e}),t},E.sortBy=function(e,t,n){var r=E.isFunction(t)?t:function(e){return e[t]};return E.pluck(E.map(e,function(e,t,i){return{value:e,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n===void 0?1:r===void 0?-1:n<r?-1:n>r?1:0}),"value")},E.groupBy=function(e,t){var n={},r=E.isFunction(t)?t:function(e){return e[t]};return S(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},E.sortedIndex=function(e,t,n){n||(n=E.identity);for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},E.toArray=function(e){return e?E.isArray(e)||E.isArguments(e)?o.call(e):e.toArray&&E.isFunction(e.toArray)?e.toArray():E.values(e):[]},E.size=function(e){return E.isArray(e)?e.length:E.keys(e).length},E.first=E.head=E.take=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},E.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},E.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},E.rest=E.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},E.compact=function(e){return E.filter(e,function(e){return!!e})},E.flatten=function(e,t){return E.reduce(e,function(e,n){return E.isArray(n)?e.concat(t?n:E.flatten(n)):(e[e.length]=n,e)},[])},E.without=function(e){return E.difference(e,o.call(arguments,1))},E.uniq=E.unique=function(e,t,n){var n=n?E.map(e,n):e,r=[];return e.length<3&&(t=!0),E.reduce(n,function(n,i,s){if(t?E.last(n)!==i||!n.length:!E.include(n,i))n.push(i),r.push(e[s]);return n},[]),r},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=E.intersect=function(e){var t=o.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e){var t=E.flatten(o.call(arguments,1),!0);return E.filter(e,function(e){return!E.include(t,e)})},E.zip=function(){for(var e=o.call(arguments),t=E.max(E.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=E.pluck(e,""+r);return n},E.indexOf=function(e,t,n){if(e==null)return-1;var r;if(n)return n=E.sortedIndex(e,t),e[n]===t?n:-1;if(g&&e.indexOf===g)return e.indexOf(t);n=0;for(r=e.length;n<r;n++)if(n in e&&e[n]===t)return n;return-1},E.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},E.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0);for(var n=arguments[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s};var T=function(){};E.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,o.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=o.call(arguments,2),n=function(){if(this instanceof n){T.prototype=e.prototype;var i=new T,s=e.apply(i,r.concat(o.call(arguments)));return Object(s)===s?s:i}return e.apply(t,r.concat(o.call(arguments)))}},E.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=E.functions(e)),S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var n={};return t||(t=E.identity),function(){var r=t.apply(this,arguments);return E.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},E.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(o.call(arguments,1)))},E.throttle=function(e,t){var n,r,i,s,o,u,a=E.debounce(function(){o=s=!1},t);return function(){return n=this,r=arguments,i||(i=setTimeout(function(){i=null,o&&e.apply(n,r),a()},t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}},E.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments;n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,s)},t)}},E.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},E.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},E.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},E.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},E.keys=b||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[],n;for(n in e)E.has(e,n)&&(t[t.length]=n);return t},E.values=function(e){return E.map(e,E.identity)},E.functions=E.methods=function(e){var t=[],n;for(n in e)E.isFunction(e[n])&&t.push(n);return t.sort()},E.extend=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},E.pick=function(e){var t={};return S(E.flatten(o.call(arguments,1)),function(n){n in e&&(t[n]=e[n])}),t},E.defaults=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e},E.isEqual=function(t,n){return e(t,n,[])},E.isEmpty=function(e){if(e==null)return!0;if(E.isArray(e)||E.isString(e))return e.length===0;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!!e&&e.nodeType==1},E.isArray=s||function(e){return a.call(e)=="[object Array]"},E.isObject=function(e){return e===Object(e)},E.isArguments=function(e){return a.call(e)=="[object Arguments]"},E.isArguments(arguments)||(E.isArguments=function(e){return!!e&&!!E.has(e,"callee")}),E.isFunction=function(e){return a.call(e)=="[object Function]"},E.isString=function(e){return a.call(e)=="[object String]"},E.isNumber=function(e){return a.call(e)=="[object Number]"},E.isFinite=function(e){return E.isNumber(e)&&isFinite(e)},E.isNaN=function(e){return e!==e},E.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},E.isDate=function(e){return a.call(e)=="[object Date]"},E.isRegExp=function(e){return a.call(e)=="[object RegExp]"},E.isNull=function(e){return e===null},E.isUndefined=function(e){return e===void 0},E.has=function(e,t){return f.call(e,t)},E.noConflict=function(){return t._=n,this},E.identity=function(e){return e},E.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},E.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},E.result=function(e,t){if(e==null)return null;var n=e[t];return E.isFunction(n)?n.call(e):n},E.mixin=function(e){S(E.functions(e),function(t){P(t,E[t]=e[t])})};var N=0;E.uniqueId=function(e){var t=N++;return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,k={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"},L;for(L in k)k[k[L]]=L;var A=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,M=function(e){return e.replace(O,function(e,t){return k[t]})};E.template=function(e,t,n){n=E.defaults(n||{},E.templateSettings),e="__p+='"+e.replace(A,function(e){return"\\"+k[e]}).replace(n.escape||C,function(e,t){return"'+\n_.escape("+M(t)+")+\n'"}).replace(n.interpolate||C,function(e,t){return"'+\n("+M(t)+")+\n'"}).replace(n.evaluate||C,function(e,t){return"';\n"+M(t)+"\n;__p+='"})+"';\n",n.variable||(e="with(obj||{}){\n"+e+"}\n");var e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n",r=new Function(n.variable||"obj","_",e);return t?r(t,E):(t=function(e){return r.call(this,e,E)},t.source="function("+(n.variable||"obj")+"){\n"+e+"}",t)},E.chain=function(e){return E(e).chain()};var _=function(e){this._wrapped=e};E.prototype=_.prototype;var D=function(e,t){return t?E(e).chain():e},P=function(e,t){_.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),D(t.apply(E,e),this._chain)}};E.mixin(E),S("pop,push,reverse,shift,sort,splice,unshift".split(","),function(e){var t=i[e];_.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],D(n,this._chain)}}),S(["concat","join","slice"],function(e){var t=i[e];_.prototype[e]=function(){return D(t.apply(this._wrapped,arguments),this._chain)}}),_.prototype.chain=function(){return this._chain=!0,this},_.prototype.value=function(){return this._wrapped}}).call(this);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/bootstrap.js */

/* ===================================================
 * bootstrap-transition.js v2.1.1
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f=e.Event("slide",{relatedTarget:i[0]});this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u]();if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=!i.data("modal")&&e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})})}(window.jQuery),!function(e){"use strict";function r(){i(e(t)).removeClass("open")}function i(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||(s.toggleClass("open"),n.focus()),!1},keydown:function(t){var n,r,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;n=e(this),t.preventDefault(),t.stopPropagation();if(n.is(".disabled, :disabled"))return;o=i(n),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return n.click();r=e("[role=menu] li:not(.divider) a",o);if(!r.length)return;a=r.index(r.filter(":focus")),t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<r.length-1&&a++,~a||(a=0),r.eq(a).focus()}},e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",r),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var t=this,n=this.tip();return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.chrome||e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/bootstrap-typeahead.js */

/* =============================================================
* bootstrap-typeahead.js v2.0.0
* http://twitter.github.com/bootstrap/javascript.html#typeahead
* =============================================================
* Copyright 2012 Twitter, Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* ============================================================ */!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.onselect=this.options.onselect,this.strings=!0,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=JSON.parse(this.$menu.find(".active").attr("data-value")),t;return this.strings?t=e:t=e[this.options.property],this.$element.val(t),typeof this.onselect=="function"&&this.onselect(e),this.hide()},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){var t=this,n,r,i;this.query=this.$element.val(),typeof this.source=="function"?(i=this.source(this,this.query),i&&this.process(i)):this.process(this.source)},process:function(t){var n=this,r,i;return t.length&&typeof t[0]!="string"&&(this.strings=!1),this.query=this.$element.val(),this.query?(r=e.grep(t,function(e){n.strings||(e=e[n.options.property]);if(n.matcher(e))return e}),r=this.sorter(r),r.length?this.render(r.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i,s;while(i=e.shift())this.strings?s=i:s=i[this.options.property],s.toLowerCase().indexOf(this.query.toLowerCase())?~s.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",JSON.stringify(r)),n.strings||(r=r[n.options.property]),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keypress,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},keyup:function(e){e.stopPropagation(),e.preventDefault();switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(e){e.stopPropagation();if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}},blur:function(e){var t=this;e.stopPropagation(),e.preventDefault(),setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',onselect:null,property:"value"},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/kinetic-v3.10.5.min.js */

/**
 * KineticJS JavaScript Library v3.10.5
 * http://www.kineticjs.com/
 * Copyright 2012, Eric Rowell
 * Licensed under the MIT or GPL Version 2 licenses.
 * Date: Aug 02 2012
 *
 * Copyright (C) 2011 - 2012 by Eric Rowell
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Kinetic={};Kinetic.Filters={},Kinetic.Plugins={},Kinetic.Global={BUBBLE_WHITELIST:["mousedown","mousemove","mouseup","mouseover","mouseout","click","dblclick","touchstart","touchmove","touchend","tap","dbltap","dragstart","dragmove","dragend"],stages:[],idCounter:0,tempNodes:{},maxDragTimeInterval:20,drag:{moving:!1,offset:{x:0,y:0},lastDrawTime:0},warn:function(e){console&&console.warn&&console.warn("Kinetic warning: "+e)},_pullNodes:function(e){var t=this.tempNodes;for(var n in t){var r=t[n];r.getStage()!==undefined&&r.getStage()._id===e._id&&(e._addId(r),e._addName(r),this._removeTempNode(r))}},_addTempNode:function(e){this.tempNodes[e._id]=e},_removeTempNode:function(e){delete this.tempNodes[e._id]}},Kinetic.Transition=function(e,t){function n(e,t,i,s){for(var o in e)o!=="duration"&&o!=="easing"&&o!=="callback"&&(Kinetic.Type._isObject(e[o])?(i[o]={},n(e[o],t[o],i[o],s)):r._add(r._getTween(t,o,e[o],i,s)))}this.node=e,this.config=t,this.tweens=[];var r=this,i={};n(t,e.attrs,i,i);var s=0;for(var o=0;o<this.tweens.length;o++){var u=this.tweens[o];u.onFinished=function(){s++,s>=r.tweens.length&&r.onFinished()}}},Kinetic.Transition.prototype={start:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].start()},stop:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].stop()},resume:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].resume()},_onEnterFrame:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].onEnterFrame()},_add:function(e){this.tweens.push(e)},_getTween:function(e,t,n,r,i){var s=this.config,o=this.node,u=s.easing;u===undefined&&(u="linear");var a=new Kinetic.Tween(o,function(e){r[t]=e,o.setAttrs(i)},Kinetic.Tweens[u],e[t],n,s.duration);return a}},Kinetic.Filters.Grayscale=function(){var e=this.imageData.data;for(var t=0;t<e.length;t+=4){var n=.34*e[t]+.5*e[t+1]+.16*e[t+2];e[t]=n,e[t+1]=n,e[t+2]=n}},Kinetic.Type={_isElement:function(e){return!!e&&e.nodeType==1},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor==Object},_isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},_isNumber:function(e){return Object.prototype.toString.call(e)=="[object Number]"},_isString:function(e){return Object.prototype.toString.call(e)=="[object String]"},_hasMethods:function(e){var t=[];for(var n in e)this._isFunction(e[n])&&t.push(n);return t.length>0},_getXY:function(e){if(this._isNumber(e))return{x:e,y:e};if(this._isArray(e)){if(e.length===1){var t=e[0];if(this._isNumber(t))return{x:t,y:t};if(this._isArray(t))return{x:t[0],y:t[1]};if(this._isObject(t))return t}else if(e.length>=2)return{x:e[0],y:e[1]}}else if(this._isObject(e))return e;return{x:0,y:0}},_getSize:function(e){if(this._isNumber(e))return{width:e,height:e};if(this._isArray(e))if(e.length===1){var t=e[0];if(this._isNumber(t))return{width:t,height:t};if(this._isArray(t)){if(t.length>=4)return{width:t[2],height:t[3]};if(t.length>=2)return{width:t[0],height:t[1]}}else if(this._isObject(t))return t}else{if(e.length>=4)return{width:e[2],height:e[3]};if(e.length>=2)return{width:e[0],height:e[1]}}else if(this._isObject(e))return e;return{width:0,height:0}},_getPoints:function(e){if(e===undefined)return[];if(this._isObject(e[0]))return e;var t=[];for(var n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t},_getImage:function(e,t){if(!e)t(null);else if(this._isElement(e))t(e);else if(this._isString(e)){var n=new Image;n.onload=function(){t(n)},n.src=e}else if(e.data){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var i=r.getContext("2d");i.putImageData(e,0,0);var s=r.toDataURL(),n=new Image;n.onload=function(){t(n)},n.src=s}else t(null)}},Kinetic.Canvas=function(e,t){this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.width=e,this.element.height=t},Kinetic.Canvas.prototype={clear:function(){var e=this.getContext(),t=this.getElement();e.clearRect(0,0,t.width,t.height)},getElement:function(){return this.element},getContext:function(){return this.context},setWidth:function(e){this.element.width=e},setHeight:function(e){this.element.height=e},getWidth:function(){return this.element.width},getHeight:function(){return this.element.height},setSize:function(e,t){this.setWidth(e),this.setHeight(t)},strip:function(){var e=this.context;e.stroke=function(){},e.fill=function(){},e.fillRect=function(t,n,r,i){e.rect(t,n,r,i)},e.strokeRect=function(t,n,r,i){e.rect(t,n,r,i)},e.drawImage=function(){},e.fillText=function(){},e.strokeText=function(){}},toDataURL:function(e,t){try{return this.element.toDataURL(e,t)}catch(n){return this.element.toDataURL()}}},function(){var e=!1;Kinetic.Class=function(){},Kinetic.Class.extend=function(t){function n(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var i=new this;e=!1;for(var s in t)i[s]=typeof t[s]=="function"&&typeof r[s]=="function"?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(s,t[s]):t[s];return n.prototype=i,n.prototype.constructor=n,n.extend=arguments.callee,n}}(),Kinetic.Tween=function(e,t,n,r,i,s){this._listeners=[],this.addListener(this),this.obj=e,this.propFunc=t,this.begin=r,this._pos=r,this.setDuration(s),this.isPlaying=!1,this._change=0,this.prevTime=0,this.prevPos=0,this.looping=!1,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.name="",this.func=n,this.setFinish(i)},Kinetic.Tween.prototype={setTime:function(e){this.prevTime=this._time,e>this.getDuration()?this.looping?(this.rewind(e-this._duration),this.update(),this.broadcastMessage("onLooped",{target:this,type:"onLooped"})):(this._time=this._duration,this.update(),this.stop(),this.broadcastMessage("onFinished",{target:this,type:"onFinished"})):e<0?(this.rewind(),this.update()):(this._time=e,this.update())},getTime:function(){return this._time},setDuration:function(e){this._duration=e===null||e<=0?1e5:e},getDuration:function(){return this._duration},setPosition:function(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e,this.broadcastMessage("onChanged",{target:this,type:"onChanged"})},getPosition:function(e){return e===undefined&&(e=this._time),this.func(e,this.begin,this._change,this._duration)},setFinish:function(e){this._change=e-this.begin},getFinish:function(){return this.begin+this._change},start:function(){this.rewind(),this.startEnterFrame(),this.broadcastMessage("onStarted",{target:this,type:"onStarted"})},rewind:function(e){this.stop(),this._time=e===undefined?0:e,this.fixTime(),this.update()},fforward:function(){this._time=this._duration,this.fixTime(),this.update()},update:function(){this.setPosition(this.getPosition(this._time))},startEnterFrame:function(){this.stopEnterFrame(),this.isPlaying=!0,this.onEnterFrame()},onEnterFrame:function(){this.isPlaying&&this.nextFrame()},nextFrame:function(){this.setTime((this.getTimer()-this._startTime)/1e3)},stop:function(){this.stopEnterFrame(),this.broadcastMessage("onStopped",{target:this,type:"onStopped"})},stopEnterFrame:function(){this.isPlaying=!1},continueTo:function(e,t){this.begin=this._pos,this.setFinish(e),this._duration!==undefined&&this.setDuration(t),this.start()},resume:function(){this.fixTime(),this.startEnterFrame(),this.broadcastMessage("onResumed",{target:this,type:"onResumed"})},yoyo:function(){this.continueTo(this.begin,this._time)},addListener:function(e){return this.removeListener(e),this._listeners.push(e)},removeListener:function(e){var t=this._listeners,n=t.length;while(n--)if(t[n]==e)return t.splice(n,1),!0;return!1},broadcastMessage:function(){var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e.shift(),r=this._listeners,i=r.length;for(var t=0;t<i;t++)r[t][n]&&r[t][n].apply(r[t],e)},fixTime:function(){this._startTime=this.getTimer()-this._time*1e3},getTimer:function(){return(new Date).getTime()-this._time}},Kinetic.Tweens={"back-ease-in":function(e,t,n,r,i,s){var o=1.70158;return n*(e/=r)*e*((o+1)*e-o)+t},"back-ease-out":function(e,t,n,r,i,s){var o=1.70158;return n*((e=e/r-1)*e*((o+1)*e+o)+1)+t},"back-ease-in-out":function(e,t,n,r,i,s){var o=1.70158;return(e/=r/2)<1?n/2*e*e*(((o*=1.525)+1)*e-o)+t:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+t},"elastic-ease-in":function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},"elastic-ease-out":function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},"elastic-ease-in-out":function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r/2)==2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},"bounce-ease-out":function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},"bounce-ease-in":function(e,t,n,r){return n-Kinetic.Tweens["bounce-ease-out"](r-e,0,n,r)+t},"bounce-ease-in-out":function(e,t,n,r){return e<r/2?Kinetic.Tweens["bounce-ease-in"](e*2,0,n,r)*.5+t:Kinetic.Tweens["bounce-ease-out"](e*2-r,0,n,r)*.5+n*.5+t},"ease-in":function(e,t,n,r){return n*(e/=r)*e+t},"ease-out":function(e,t,n,r){return-n*(e/=r)*(e-2)+t},"ease-in-out":function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},"strong-ease-in":function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},"strong-ease-out":function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},"strong-ease-in-out":function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},linear:function(e,t,n,r){return n*e/r+t}},Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t},scale:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,s=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},multiply:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o},invert:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o},getMatrix:function(){return this.m}},Kinetic.Animation=function(e){e||(e={});for(var t in e)this[t]=e[t];this.id=Kinetic.Animation.animIdCounter++},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()},Kinetic.Animation._addAnimation=function(e){this.animations.push(e)},Kinetic.Animation._removeAnimation=function(e){var t=e.id,n=this.animations;for(var r=0;r<n.length;r++)if(n[r].id===t)return this.animations.splice(r,1),!1},Kinetic.Animation._runFrames=function(){var e={};for(var t=0;t<this.animations.length;t++){var n=this.animations[t];n.node&&n.node._id!==undefined&&(e[n.node._id]=n.node),n.func&&n.func(this.frame)}for(var r in e)e[r].draw()},Kinetic.Animation._updateFrameObject=function(){var e=(new Date).getTime();this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff},Kinetic.Animation._animationLoop=function(){if(this.animations.length>0){this._updateFrameObject(),this._runFrames();var e=this;requestAnimFrame(function(){e._animationLoop()})}else this.animRunning=!1,this.frame.lastTime=0},Kinetic.Animation._handleAnimation=function(){var e=this;this.animRunning?this.frame.lastTime=0:(this.animRunning=!0,e._animationLoop())},requestAnimFrame=function(e){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Kinetic.Node=Kinetic.Class.extend({init:function(e){this.defaultNodeAttrs={visible:!0,listening:!0,name:undefined,alpha:1,x:0,y:0,scale:{x:1,y:1},rotation:0,offset:{x:0,y:0},dragConstraint:"none",dragBounds:{},draggable:!1,dragThrottle:80},this.setDefaultAttrs(this.defaultNodeAttrs),this.eventListeners={},this.lastDragTime=0,this.transAnim=new Kinetic.Animation,this.setAttrs(e),this.on("draggableChange.kinetic",function(){this._onDraggableChange()});var t=this;this.on("idChange.kinetic",function(e){var n=t.getStage();n&&(n._removeId(e.oldVal),n._addId(t))}),this.on("nameChange.kinetic",function(e){var n=t.getStage();n&&(n._removeName(e.oldVal,t._id),n._addName(t))}),this._onDraggableChange()},on:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){var i=n[r],s=i,o=s.split("."),u=o[0],a=o.length>1?o[1]:"";this.eventListeners[u]||(this.eventListeners[u]=[]),this.eventListeners[u].push({name:a,handler:t})}},off:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){var r=t[n],i=r,s=i.split("."),o=s[0];if(this.eventListeners[o]&&s.length>1){var u=s[1];for(var a=0;a<this.eventListeners[o].length;a++)if(this.eventListeners[o][a].name===u){this.eventListeners[o].splice(a,1);if(this.eventListeners[o].length===0){delete this.eventListeners[o];break}a--}}else delete this.eventListeners[o]}},getAttrs:function(){return this.attrs},setDefaultAttrs:function(e){this.attrs===undefined&&(this.attrs={});if(e)for(var t in e)this.attrs[t]===undefined&&(this.attrs[t]=e[t])},setAttrs:function(e){var t=Kinetic.Type,n=this;if(e!==undefined){function r(e,i,s){for(var o in i){var u=i[o],a=e[o];s===0&&n._fireBeforeChangeEvent(o,a,u),e[o]===undefined&&u!==undefined&&(e[o]={});if(t._isObject(u)&&!t._isArray(u)&&!t._isElement(u)&&!t._hasMethods(u))Kinetic.Type._isObject(e[o])||(e[o]={}),r(e[o],u,s+1);else switch(o){case"rotationDeg":n._setAttr(e,"rotation",i[o]*Math.PI/180),o="rotation";break;case"offset":var f=t._getXY(u);n._setAttr(e[o],"x",f.x),n._setAttr(e[o],"y",f.y);break;case"scale":var f=t._getXY(u);n._setAttr(e[o],"x",f.x),n._setAttr(e[o],"y",f.y);break;case"points":n._setAttr(e,o,t._getPoints(u));break;case"crop":var f=t._getXY(u),l=t._getSize(u);n._setAttr(e[o],"x",f.x),n._setAttr(e[o],"y",f.y),n._setAttr(e[o],"width",l.width),n._setAttr(e[o],"height",l.height);break;default:n._setAttr(e,o,u)}s===0&&n._fireChangeEvent(o,a,u)}}r(this.attrs,e,0)}},isVisible:function(){return this.attrs.visible&&this.getParent()&&!this.getParent().isVisible()?!1:this.attrs.visible},show:function(){this.setAttrs({visible:!0})},hide:function(){this.setAttrs({visible:!1})},getZIndex:function(){return this.index},getAbsoluteZIndex:function(){function e(n){var s=[];for(var o=0;o<n.length;o++){var u=n[o];i++,u.nodeType!=="Shape"&&(s=s.concat(u.getChildren())),u._id===r._id&&(o=n.length)}s.length>0&&s[0].getLevel()<=t&&e(s)}var t=this.getLevel(),n=this.getStage(),r=this,i=0;return r.nodeType!=="Stage"&&e(r.getStage().getChildren()),i},getLevel:function(){var e=0,t=this.parent;while(t)e++,t=t.parent;return e},setPosition:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments));this.setAttrs(e)},getPosition:function(){return{x:this.attrs.x,y:this.attrs.y}},getAbsolutePosition:function(){var e=this.getAbsoluteTransform(),t=this.getOffset();return e.translate(t.x,t.y),e.getTranslation()},setAbsolutePosition:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=this._clearTransform();this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y;var n=this.getAbsoluteTransform();n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this.setPosition(e.x,e.y),this._setTransform(t)},move:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=this.getX(),n=this.getY();e.x!==undefined&&(t+=e.x),e.y!==undefined&&(n+=e.y),this.setAttrs({x:t,y:n})},getRotationDeg:function(){return this.attrs.rotation*180/Math.PI},rotate:function(e){this.setAttrs({rotation:this.getRotation()+e})},rotateDeg:function(e){this.setAttrs({rotation:this.getRotation()+e*Math.PI/180})},moveToTop:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices()},moveUp:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices()},moveDown:function(){var e=this.index;e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices())},moveToBottom:function(){var e=this.index;this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices()},setZIndex:function(e){var t=this.index;this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices()},getAbsoluteAlpha:function(){var e=1,t=this;while(t.nodeType!=="Stage")e*=t.attrs.alpha,t=t.parent;return e},isDragging:function(){var e=Kinetic.Global;return e.drag.node!==undefined&&e.drag.node._id===this._id&&e.drag.moving},moveTo:function(e){var t=this.parent;t.children.splice(this.index,1),t._setChildrenIndices(),e.children.push(this),this.index=e.children.length-1,this.parent=e,e._setChildrenIndices()},getParent:function(){return this.parent},getLayer:function(){return this.nodeType==="Layer"?this:this.getParent().getLayer()},getStage:function(){return this.nodeType!=="Stage"&&this.getParent()?this.getParent().getStage():this.nodeType==="Stage"?this:undefined},simulate:function(e){this._handleEvent(e,{})},transitionTo:function(e){var t=Kinetic.Animation;t._removeAnimation(this.transAnim);var n=this.nodeType==="Stage"?this:this.getLayer(),r=this,i=new Kinetic.Transition(this,e);return this.transAnim.func=function(){i._onEnterFrame()},this.transAnim.node=n,t._addAnimation(this.transAnim),i.onFinished=function(){t._removeAnimation(r.transAnim),r.transAnim.node.draw(),e.callback&&e.callback()},i.start(),t._handleAnimation(),i},getAbsoluteTransform:function(){var e=new Kinetic.Transform,t=[],n=this.parent;t.unshift(this);while(n)t.unshift(n),n=n.parent;for(var r=0;r<t.length;r++){var i=t[r],s=i.getTransform();e.multiply(s)}return e},getTransform:function(){var e=new Kinetic.Transform;return(this.attrs.x!==0||this.attrs.y!==0)&&e.translate(this.attrs.x,this.attrs.y),this.attrs.rotation!==0&&e.rotate(this.attrs.rotation),(this.attrs.scale.x!==1||this.attrs.scale.y!==1)&&e.scale(this.attrs.scale.x,this.attrs.scale.y),this.attrs.offset&&(this.attrs.offset.x!==0||this.attrs.offset.y!==0)&&e.translate(-1*this.attrs.offset.x,-1*this.attrs.offset.y),e},clone:function(e){var t=this.shapeType||this.nodeType,n=new Kinetic[t](this.attrs);for(var r in this.eventListeners){var i=this.eventListeners[r];for(var s=0;s<i.length;s++){var o=i[s];o.name.indexOf("kinetic")<0&&(n.eventListeners[r]||(n.eventListeners[r]=[]),n.eventListeners[r].push(o))}}return n.setAttrs(e),n},saveImageData:function(e,t){try{var n;if(e&&t)n=new Kinetic.Canvas(e,t);else{var r=this.getStage();n=r.bufferCanvas}var i=n.getContext();n.clear(),this._draw(n);var s=i.getImageData(0,0,n.getWidth(),n.getHeight());this.imageData=s}catch(o){Kinetic.Global.warn("Image data could not saved because canvas is dirty.")}},clearImageData:function(){delete this.imageData},getImageData:function(){return this.imageData},toDataURL:function(e){var t=e&&e.mimeType?e.mimeType:null,n=e&&e.quality?e.quality:null,r;e&&e.width&&e.height?r=new Kinetic.Canvas(e.width,e.height):r=this.getStage().bufferCanvas;var i=r.getContext();return r.clear(),this._draw(r),r.toDataURL(t,n)},toImage:function(e){Kinetic.Type._getImage(this.toDataURL(e),function(t){e.callback(t)})},_clearTransform:function(){var e={x:this.attrs.x,y:this.attrs.y,rotation:this.attrs.rotation,scale:{x:this.attrs.scale.x,y:this.attrs.scale.y},offset:{x:this.attrs.offset.x,y:this.attrs.offset.y}};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scale={x:1,y:1},this.attrs.offset={x:0,y:0},e},_setTransform:function(e){for(var t in e)this.attrs[t]=e[t]},_setImageData:function(e){e&&e.data&&(this.imageData=e)},_fireBeforeChangeEvent:function(e,t,n){this._handleEvent("before"+e.toUpperCase()+"Change",{oldVal:t,newVal:n})},_fireChangeEvent:function(e,t,n){this._handleEvent(e+"Change",{oldVal:t,newVal:n})},_setAttr:function(e,t,n){n!==undefined&&(e===undefined&&(e={}),e[t]=n)},_listenDrag:function(){this._dragCleanup();var e=Kinetic.Global,t=this;this.on("mousedown.kinetic touchstart.kinetic",function(e){t._initDrag()})},_initDrag:function(){var e=Kinetic.Global,t=this.getStage(),n=t.getUserPosition();if(n){var r=this.getTransform().getTranslation(),i=this.getAbsoluteTransform().getTranslation(),s=this.getAbsolutePosition();e.drag.node=this,e.drag.offset.x=n.x-s.x,e.drag.offset.y=n.y-s.y}},_onDraggableChange:function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=Kinetic.Global;e&&t.drag.node&&t.drag.node._id===this._id&&e._endDrag()}},_dragCleanup:function(){this.off("mousedown.kinetic"),this.off("touchstart.kinetic")},_handleEvent:function(e,t){this.nodeType==="Shape"&&(t.shape=this);var n=this.getStage(),r=n?n.mouseoverShape:null,i=n?n.mouseoutShape:null,s=this.eventListeners,o=!0;e==="mouseover"&&i&&i._id===this._id?o=!1:e==="mouseout"&&r&&r._id===this._id&&(o=!1);if(o){if(s[e]){var u=s[e];for(var a=0;a<u.length;a++)u[a].handler.apply(this,[t])}n&&r&&i&&(n.mouseoverShape=r.parent,n.mouseoutShape=i.parent),Kinetic.Global.BUBBLE_WHITELIST.indexOf(e)>=0&&!t.cancelBubble&&this.parent&&this._handleEvent.call(this.parent,e,t)}}}),Kinetic.Node.addSetters=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this._addSetter(e,r)}},Kinetic.Node.addGetters=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this._addGetter(e,r)}},Kinetic.Node.addGettersSetters=function(e,t){this.addSetters(e,t),this.addGetters(e,t)},Kinetic.Node._addSetter=function(e,t){var n=this,r="set"+t.charAt(0).toUpperCase()+t.slice(1);e.prototype[r]=function(){arguments.length==1?arg=arguments[0]:arg=Array.prototype.slice.call(arguments);var e={};e[t]=arg,this.setAttrs(e)}},Kinetic.Node._addGetter=function(e,t){var n=this,r="get"+t.charAt(0).toUpperCase()+t.slice(1);e.prototype[r]=function(e){return this.attrs[t]}},Kinetic.Node.addGettersSetters(Kinetic.Node,["x","y","scale","detectionType","rotation","alpha","name","id","offset","draggable","dragConstraint","dragBounds","listening","dragThrottle"]),Kinetic.Node.addSetters(Kinetic.Node,["rotationDeg"]),Kinetic.Container=Kinetic.Node.extend({init:function(e){this.children=[],this._super(e)},getChildren:function(){return this.children},removeChildren:function(){while(this.children.length>0)this.remove(this.children[0])},add:function(e){e._id=Kinetic.Global.idCounter++,e.index=this.children.length,e.parent=this,this.children.push(e);var t=e.getStage();if(!t)Kinetic.Global._addTempNode(e);else{t._addId(e),t._addName(e);var n=Kinetic.Global;n._pullNodes(t)}return this._add!==undefined&&this._add(e),this},remove:function(e){if(e&&e.index!==undefined&&this.children[e.index]._id==e._id){var t=this.getStage();t&&(t._removeId(e.getId()),t._removeName(e.getName(),e._id)),Kinetic.Global._removeTempNode(e),this.children.splice(e.index,1),this._setChildrenIndices();while(e.children&&e.children.length>0)e.remove(e.children[0]);this._remove!==undefined&&this._remove(e)}return this},get:function(e){var t=this.getStage(),n,r=e.slice(1);if(e.charAt(0)==="#")n=t.ids[r]!==undefined?[t.ids[r]]:[];else{if(e.charAt(0)!==".")return e==="Shape"||e==="Group"||e==="Layer"?this._getNodes(e):!1;n=t.names[r]!==undefined?t.names[r]:[]}var i=[];for(var s=0;s<n.length;s++){var o=n[s];this.isAncestorOf(o)&&i.push(o)}return i},isAncestorOf:function(e){if(this.nodeType==="Stage")return!0;var t=e.getParent();while(t){if(t._id===this._id)return!0;t=t.getParent()}return!1},getIntersections:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=[],n=this.get("Shape");for(var r=0;r<n.length;r++){var i=n[r];i.isVisible()&&i.intersects(e)&&t.push(i)}return t},_getNodes:function(e){function t(r){var i=r.getChildren();for(var s=0;s<i.length;s++){var o=i[s];o.nodeType===e?n.push(o):o.nodeType!=="Shape"&&t(o)}}var n=[];return t(this),n},_drawChildren:function(e){var t=this.getStage(),n=this.children;for(var r=0;r<n.length;r++){var i=n[r];i.nodeType==="Shape"?i.isVisible()&&t.isVisible()&&i._draw(e):i.draw(e)}},_setChildrenIndices:function(){for(var e=0;e<this.children.length;e++)this.children[e].index=e}}),Kinetic.Stage=Kinetic.Container.extend({init:function(e){this.setDefaultAttrs({width:400,height:200}),typeof e.container=="string"&&(e.container=document.getElementById(e.container)),this._super(e),this._setStageDefaultProperties(),this._id=Kinetic.Global.idCounter++,this._buildDOM(),this._bindContentEvents(),this.on("widthChange.kinetic",function(){this._resizeDOM()}),this.on("heightChange.kinetic",function(){this._resizeDOM()});var t=Kinetic.Global;t.stages.push(this),this._addId(this),this._addName(this)},onFrame:function(e){this.anim.func=e},start:function(){if(!this.animRunning){var e=Kinetic.Animation;e._addAnimation(this.anim),e._handleAnimation(),this.animRunning=!0}},stop:function(){Kinetic.Animation._removeAnimation(this.anim),this.animRunning=!1},draw:function(e){this._draw(e)},setSize:function(){var e=Kinetic.Type._getSize(Array.prototype.slice.call(arguments));this.setAttrs(e)},getSize:function(){return{width:this.attrs.width,height:this.attrs.height}},clear:function(){var e=this.children;for(var t=0;t<e.length;t++)e[t].clear()},toJSON:function(){function e(n){var r={};r.attrs={};for(var i in n.attrs){var s=n.attrs[i];!t._isFunction(s)&&!t._isElement(s)&&!t._hasMethods(s)&&(r.attrs[i]=s)}r.nodeType=n.nodeType,r.shapeType=n.shapeType;if(n.nodeType!=="Shape"){r.children=[];var o=n.getChildren();for(var u=0;u<o.length;u++){var f=o[u];r.children.push(e(f))}}return r}var t=Kinetic.Type;return JSON.stringify(e(this))},reset:function(){this.removeChildren(),this._setStageDefaultProperties(),this.setAttrs(this.defaultNodeAttrs)},load:function(e){function t(e,n){var r=n.children;if(r!==undefined)for(var i=0;i<r.length;i++){var s=r[i],o;s.nodeType==="Shape"?s.shapeType===undefined?o="Shape":o=s.shapeType:o=s.nodeType;var u=new Kinetic[o](s.attrs);e.add(u),t(u,s)}}this.reset();var n=JSON.parse(e);this.attrs=n.attrs,t(this,n),this.draw()},getMousePosition:function(e){return this.mousePos},getTouchPosition:function(e){return this.touchPos},getUserPosition:function(e){return this.getTouchPosition()||this.getMousePosition()},getContainer:function(){return this.attrs.container},getStage:function(){return this},getDOM:function(){return this.content},toDataURL:function(e){function t(i){var s=a[i],l=s.getCanvas().toDataURL(n,r),p=new Image;p.onload=function(){u.drawImage(p,0,0),i<a.length-1?t(i+1):e.callback(o.toDataURL(n,r))},p.src=l}var n=e&&e.mimeType?e.mimeType:null,r=e&&e.quality?e.quality:null,i=e&&e.width?e.width:this.attrs.width,s=e&&e.height?e.height:this.attrs.height,o=new Kinetic.Canvas(i,s),u=o.getContext(),a=this.children;t(0)},toImage:function(e){this.toDataURL({callback:function(t){Kinetic.Type._getImage(t,function(t){e.callback(t)})}})},_resizeDOM:function(){var e=this.attrs.width,t=this.attrs.height;this.content.style.width=e+"px",this.content.style.height=t+"px",this.bufferCanvas.setSize(e,t),this.pathCanvas.setSize(e,t);var n=this.children;for(var r=0;r<n.length;r++){var i=n[r];i.getCanvas().setSize(e,t),i.draw()}},_remove:function(e){try{this.content.removeChild(e.canvas.element)}catch(t){}},_add:function(e){e.canvas.setSize(this.attrs.width,this.attrs.height),e.draw(),this.content.appendChild(e.canvas.element),e.lastDrawTime=0},_detectEvent:function(e,t){var n=Kinetic.Global.drag.moving,r=Kinetic.Global,i=this.getUserPosition(),s=e.eventListeners,o=this;this.targetShape&&e._id===this.targetShape._id&&(this.targetFound=!0);if(e.isVisible()&&i!==undefined&&e.intersects(i)){if(!n&&this.mouseDown)return this.mouseDown=!1,this.clickStart=!0,e._handleEvent("mousedown",t),!0;if(this.mouseUp)return this.mouseUp=!1,e._handleEvent("mouseup",t),this.clickStart&&(!r.drag.moving||!r.drag.node)&&(e._handleEvent("click",t),this.inDoubleClickWindow&&e._handleEvent("dblclick",t),this.inDoubleClickWindow=!0,setTimeout(function(){o.inDoubleClickWindow=!1},this.dblClickWindow)),!0;if(!n&&this.touchStart&&!this.touchMove)return this.touchStart=!1,this.tapStart=!0,e._handleEvent("touchstart",t),!0;if(this.touchEnd)return this.touchEnd=!1,e._handleEvent("touchend",t),this.tapStart&&(!r.drag.moving||!r.drag.node)&&(e._handleEvent("tap",t),this.inDoubleClickWindow&&e._handleEvent("dbltap",t),this.inDoubleClickWindow=!0,setTimeout(function(){o.inDoubleClickWindow=!1},this.dblClickWindow)),!0;if(!n&&this.touchMove)return e._handleEvent("touchmove",t),!0;if(!n&&this._isNewTarget(e,t))return this.mouseoutShape&&(this.mouseoverShape=e,this.mouseoutShape._handleEvent("mouseout",t),this.mouseoverShape=undefined),e._handleEvent("mouseover",t),this._setTarget(e),!0;if(!n&&this.mouseMove)return e._handleEvent("mousemove",t),!0}else if(!n&&this.targetShape&&this.targetShape._id===e._id)return this._setTarget(undefined),this.mouseoutShape=e,!0;return!1},_setTarget:function(e){this.targetShape=e,this.targetFound=!0},_isNewTarget:function(e,t){if(!this.targetShape||!this.targetFound&&e._id!==this.targetShape._id){if(this.targetShape){var n=this.targetShape.eventListeners;n&&(this.mouseoutShape=this.targetShape)}return!0}return!1},_traverseChildren:function(e,t){var n=e.children;for(var r=n.length-1;r>=0;r--){var i=n[r];if(i.getListening())if(i.nodeType==="Shape"){var s=this._detectEvent(i,t);if(s)return!0}else{var s=this._traverseChildren(i,t);if(s)return!0}}return!1},_handleStageEvent:function(e){var t=Kinetic.Global;e||(e=window.event),this._setMousePosition(e),this._setTouchPosition(e),this.pathCanvas.clear(),this.targetFound=!1;var n=!1;for(var r=this.children.length-1;r>=0;r--){var i=this.children[r];if(i.isVisible()&&r>=0&&i.getListening()&&this._traverseChildren(i,e)){n=!0;break}}!n&&this.mouseoutShape&&(this.mouseoutShape._handleEvent("mouseout",e),this.mouseoutShape=undefined)},_bindContentEvents:function(){var e=Kinetic.Global,t=this,n=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"];for(var r=0;r<n.length;r++){var i=n[r];(function(){var e=i;t.content.addEventListener(e,function(n){t["_"+e](n)},!1)})()}},_mouseover:function(e){this._handleStageEvent(e)},_mouseout:function(e){var t=this.targetShape;t&&(t._handleEvent("mouseout",e),this.targetShape=undefined),this.mousePos=undefined,this._endDrag(e)},_mousemove:function(e){this.mouseDown=!1,this.mouseUp=!1,this.mouseMove=!0,this._handleStageEvent(e),this._startDrag(e)},_mousedown:function(e){this.mouseDown=!0,this.mouseUp=!1,this.mouseMove=!1,this._handleStageEvent(e
),this.attrs.draggable&&this._initDrag()},_mouseup:function(e){this.mouseDown=!1,this.mouseUp=!0,this.mouseMove=!1,this._handleStageEvent(e),this.clickStart=!1,this._endDrag(e)},_touchstart:function(e){e.preventDefault(),this.touchStart=!0,this.touchEnd=!1,this.touchMove=!1,this._handleStageEvent(e),this.attrs.draggable&&this._initDrag()},_touchend:function(e){this.touchStart=!1,this.touchEnd=!0,this.touchMove=!1,this._handleStageEvent(e),this.tapStart=!1,this._endDrag(e)},_touchmove:function(e){e.preventDefault(),this.touchEnd=!1,this.touchMove=!0,this._handleStageEvent(e),this._startDrag(e)},_setMousePosition:function(e){var t=e.offsetX||e.clientX-this._getContentPosition().left+window.pageXOffset,n=e.offsetY||e.clientY-this._getContentPosition().top+window.pageYOffset;this.mousePos={x:t,y:n}},_setTouchPosition:function(e){if(e.touches!==undefined&&e.touches.length===1){var t=e.touches[0],n=t.clientX-this._getContentPosition().left+window.pageXOffset,r=t.clientY-this._getContentPosition().top+window.pageYOffset;this.touchPos={x:n,y:r}}},_getContentPosition:function(){var e=this.content.getBoundingClientRect(),t=document.documentElement;return{top:e.top+t.scrollTop,left:e.left+t.scrollLeft}},_endDrag:function(e){var t=Kinetic.Global;t.drag.node&&t.drag.moving&&(t.drag.moving=!1,t.drag.node._handleEvent("dragend",e)),t.drag.node=undefined},_startDrag:function(e){var t=this,n=Kinetic.Global,r=n.drag.node;if(r){var i=r.attrs.dragThrottle,s=(new Date).getTime(),o=s-r.lastDragTime,u=1e3/i;if(o>=u||i>200){var a=t.getUserPosition(),f=r.attrs.dragConstraint,l=r.attrs.dragBounds,c={x:r.attrs.x,y:r.attrs.y},h={x:a.x-n.drag.offset.x,y:a.y-n.drag.offset.y};l.left!==undefined&&h.x<l.left&&(h.x=l.left),l.right!==undefined&&h.x>l.right&&(h.x=l.right),l.top!==undefined&&h.y<l.top&&(h.y=l.top),l.bottom!==undefined&&h.y>l.bottom&&(h.y=l.bottom),r.setAbsolutePosition(h),f==="horizontal"?r.attrs.y=c.y:f==="vertical"&&(r.attrs.x=c.x),n.drag.node.nodeType==="Stage"?n.drag.node.draw():n.drag.node.getLayer().draw(),n.drag.moving||(n.drag.moving=!0,n.drag.node._handleEvent("dragstart",e)),n.drag.node._handleEvent("dragmove",e),r.lastDragTime=(new Date).getTime()}}},_buildDOM:function(){this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.display="inline-block",this.content.className="kineticjs-content",this.attrs.container.appendChild(this.content),this.bufferCanvas=new Kinetic.Canvas({width:this.attrs.width,height:this.attrs.height}),this.pathCanvas=new Kinetic.Canvas({width:this.attrs.width,height:this.attrs.height}),this.pathCanvas.strip(),this._resizeDOM()},_addId:function(e){e.attrs.id!==undefined&&(this.ids[e.attrs.id]=e)},_removeId:function(e){e!==undefined&&delete this.ids[e]},_addName:function(e){var t=e.attrs.name;t!==undefined&&(this.names[t]===undefined&&(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(e!==undefined){var n=this.names[e];if(n!==undefined){for(var r=0;r<n.length;r++){var i=n[r];i._id===t&&n.splice(r,1)}n.length===0&&delete this.names[e]}}},_onContent:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){var i=n[r];this.content.addEventListener(i,t,!1)}},_setStageDefaultProperties:function(){this.nodeType="Stage",this.dblClickWindow=400,this.targetShape=undefined,this.targetFound=!1,this.mouseoverShape=undefined,this.mouseoutShape=undefined,this.mousePos=undefined,this.mouseDown=!1,this.mouseUp=!1,this.mouseMove=!1,this.clickStart=!1,this.touchPos=undefined,this.touchStart=!1,this.touchEnd=!1,this.touchMove=!1,this.tapStart=!1,this.ids={},this.names={},this.anim=new Kinetic.Animation,this.animRunning=!1},_draw:function(e){this._drawChildren(e)}}),Kinetic.Node.addGettersSetters(Kinetic.Stage,["width","height"]),Kinetic.Layer=Kinetic.Container.extend({init:function(e){this.setDefaultAttrs({clearBeforeDraw:!0}),this.nodeType="Layer",this.lastDrawTime=0,this.beforeDrawFunc=undefined,this.afterDrawFunc=undefined,this.canvas=new Kinetic.Canvas,this.canvas.getElement().style.position="absolute",this._super(e)},draw:function(e){this._draw(e)},beforeDraw:function(e){this.beforeDrawFunc=e},afterDraw:function(e){this.afterDrawFunc=e},getCanvas:function(){return this.canvas},getContext:function(){return this.canvas.context},clear:function(){this.getCanvas().clear()},toDataURL:function(e){var t,n=e&&e.mimeType?e.mimeType:null,r=e&&e.quality?e.quality:null;return e&&e.width&&e.height?t=new Kinetic.Canvas(e.width,e.height):t=this.getCanvas(),t.toDataURL(n,r)},_draw:function(e){e||(e=this.getCanvas());var t=(new Date).getTime();this.lastDrawTime=t,this.beforeDrawFunc!==undefined&&this.beforeDrawFunc.call(this),this.attrs.clearBeforeDraw&&e.clear(),this.isVisible()&&(this.attrs.drawFunc!==undefined&&this.attrs.drawFunc.call(this),this._drawChildren(e)),this.afterDrawFunc!==undefined&&this.afterDrawFunc.call(this)}}),Kinetic.Node.addGettersSetters(Kinetic.Layer,["clearBeforeDraw"]),Kinetic.Group=Kinetic.Container.extend({init:function(e){this.nodeType="Group",this._super(e)},draw:function(e){this._draw(e)},_draw:function(e){this.attrs.visible&&this._drawChildren(e)}}),Kinetic.Shape=Kinetic.Node.extend({init:function(e){this.setDefaultAttrs({detectionType:"path"}),this.nodeType="Shape",this.appliedShadow=!1,this._super(e)},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},stroke:function(e){var t=this.getStrokeWidth(),n=this.getStroke();if(n||t){var r=Kinetic.Global,i=!1;e.save(),this.attrs.shadow&&!this.appliedShadow&&(i=this._applyShadow(e)),e.lineWidth=t||2,e.strokeStyle=n||"black",e.stroke(e),e.restore(),i&&this.stroke(e)}},fill:function(e){var t=!1,n=this.attrs.fill;if(n){e.save(),this.attrs.shadow&&!this.appliedShadow&&(t=this._applyShadow(e));var r=n.start,i=n.end,s=null;if(Kinetic.Type._isString(n))e.fillStyle=n,e.fill(e);else if(n.image){var o=n.repeat?n.repeat:"repeat";n.scale&&e.scale(n.scale.x,n.scale.y),n.offset&&e.translate(n.offset.x,n.offset.y),e.fillStyle=e.createPattern(n.image,o),e.fill(e)}else if(!r.radius&&!i.radius){var u=e.createLinearGradient(r.x,r.y,i.x,i.y),a=n.colorStops;for(var f=0;f<a.length;f+=2)u.addColorStop(a[f],a[f+1]);e.fillStyle=u,e.fill(e)}else if(!r.radius&&r.radius!==0||!i.radius&&i.radius!==0)e.fillStyle="black",e.fill(e);else{var u=e.createRadialGradient(r.x,r.y,r.radius,i.x,i.y,i.radius),a=n.colorStops;for(var f=0;f<a.length;f+=2)u.addColorStop(a[f],a[f+1]);e.fillStyle=u,e.fill(e)}e.restore()}t&&this.fill(e)},fillText:function(e,t){var n=!1;this.attrs.textFill&&(e.save(),this.attrs.shadow&&!this.appliedShadow&&(n=this._applyShadow(e)),e.fillStyle=this.attrs.textFill,e.fillText(t,0,0),e.restore()),n&&this.fillText(e,t,0,0)},strokeText:function(e,t){var n=!1;if(this.attrs.textStroke||this.attrs.textStrokeWidth){e.save(),this.attrs.shadow&&!this.appliedShadow&&(n=this._applyShadow(e));var r=this.attrs.textStroke?this.attrs.textStroke:"black",i=this.attrs.textStrokeWidth?this.attrs.textStrokeWidth:2;e.lineWidth=i,e.strokeStyle=r,e.strokeText(t,0,0),e.restore()}n&&this.strokeText(e,t,0,0)},drawImage:function(){var e=!1,t=arguments[0];t.save();var n=Array.prototype.slice.call(arguments);if(n.length===6||n.length===10)this.attrs.shadow&&!this.appliedShadow&&(e=this._applyShadow(t)),n.length===6?t.drawImage(n[1],n[2],n[3],n[4],n[5]):t.drawImage(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);t.restore(),e&&this.drawImage.apply(this,n)},applyLineJoin:function(e){this.attrs.lineJoin&&(e.lineJoin=this.attrs.lineJoin)},_applyShadow:function(e){var t=this.attrs.shadow;if(t){var n=this.getAbsoluteAlpha(),r=t.color?t.color:"black",i=t.blur?t.blur:5,s=t.offset?t.offset:{x:0,y:0};return t.alpha&&(e.globalAlpha=t.alpha*n),e.shadowColor=r,e.shadowBlur=i,e.shadowOffsetX=s.x,e.shadowOffsetY=s.y,this.appliedShadow=!0,!0}return!1},intersects:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=this.getStage();if(this.attrs.detectionType==="path"){var n=t.pathCanvas,r=n.getContext();return this._draw(n),r.isPointInPath(e.x,e.y)}if(this.imageData){var i=t.attrs.width,s=this.imageData.data[(i*e.y+e.x)*4+3];return s}return!1},_draw:function(e){if(this.attrs.drawFunc){var t=this.getStage(),n=e.getContext(),r=[],i=this.parent;r.unshift(this);while(i)r.unshift(i),i=i.parent;n.save();for(var s=0;s<r.length;s++){var o=r[s],u=o.getTransform(),a=u.getMatrix();n.transform(a[0],a[1],a[2],a[3],a[4],a[5])}var f=this.getAbsoluteAlpha();f!==1&&(n.globalAlpha=f),this.applyLineJoin(n),this.appliedShadow=!1,this.attrs.drawFunc.call(this,e.getContext()),n.restore()}}}),Kinetic.Node.addGettersSetters(Kinetic.Shape,["fill","stroke","lineJoin","strokeWidth","shadow","drawFunc","filter"]),Kinetic.Rect=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({width:0,height:0,cornerRadius:0}),this.shapeType="Rect",e.drawFunc=this.drawFunc,this._super(e)},drawFunc:function(e){e.beginPath(),this.attrs.cornerRadius===0?e.rect(0,0,this.attrs.width,this.attrs.height):(e.moveTo(this.attrs.cornerRadius,0),e.lineTo(this.attrs.width-this.attrs.cornerRadius,0),e.arc(this.attrs.width-this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI*3/2,0,!1),e.lineTo(this.attrs.width,this.attrs.height-this.attrs.cornerRadius),e.arc(this.attrs.width-this.attrs.cornerRadius,this.attrs.height-this.attrs.cornerRadius,this.attrs.cornerRadius,0,Math.PI/2,!1),e.lineTo(this.attrs.cornerRadius,this.attrs.height),e.arc(this.attrs.cornerRadius,this.attrs.height-this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI/2,Math.PI,!1),e.lineTo(0,this.attrs.cornerRadius),e.arc(this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI,Math.PI*3/2,!1)),e.closePath(),this.fill(e),this.stroke(e)},setSize:function(){var e=Kinetic.Type._getSize(Array.prototype.slice.call(arguments));this.setAttrs(e)},getSize:function(){return{width:this.attrs.width,height:this.attrs.height}}}),Kinetic.Node.addGettersSetters(Kinetic.Rect,["width","height","cornerRadius"]),Kinetic.Ellipse=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({radius:{x:0,y:0}}),this.shapeType="Ellipse",e.drawFunc=this.drawFunc,this._super(e),this._convertRadius();var t=this;this.on("radiusChange.kinetic",function(){t._convertRadius()})},drawFunc:function(e){var t=this.getRadius();e.beginPath(),e.save(),t.x!==t.y&&e.scale(1,t.y/t.x),e.arc(0,0,t.x,0,Math.PI*2,!0),e.restore(),e.closePath(),this.fill(e),this.stroke(e)},_convertRadius:function(){var e=Kinetic.Type,t=this.getRadius();if(e._isObject(t))return!1;this.attrs.radius=e._getXY(t)}}),Kinetic.Circle=Kinetic.Ellipse,Kinetic.Node.addGettersSetters(Kinetic.Ellipse,["radius"]),Kinetic.Image=Kinetic.Shape.extend({init:function(e){this.shapeType="Image",e.drawFunc=this.drawFunc,this._super(e)},drawFunc:function(e){if(this.attrs.image){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),this.fill(e),this.stroke(e);if(this.attrs.crop&&this.attrs.crop.width&&this.attrs.crop.height){var r=this.attrs.crop.x?this.attrs.crop.x:0,i=this.attrs.crop.y?this.attrs.crop.y:0,s=this.attrs.crop.width,o=this.attrs.crop.height;this.drawImage(e,this.attrs.image,r,i,s,o,0,0,t,n)}else this.drawImage(e,this.attrs.image,0,0,t,n)}},setSize:function(){var e=Kinetic.Type._getSize(Array.prototype.slice.call(arguments));this.setAttrs(e)},getSize:function(){return{width:this.attrs.width,height:this.attrs.height}},getWidth:function(){return this.attrs.width?this.attrs.width:this.attrs.image?this.attrs.image.width:0},getHeight:function(){return this.attrs.height?this.attrs.height:this.attrs.image?this.attrs.image.height:0},applyFilter:function(e){try{var t=this._clearTransform();this.saveImageData(this.getWidth(),this.getHeight()),this._setTransform(t),e.filter.call(this,e);var n=this;Kinetic.Type._getImage(this.getImageData(),function(t){n.setImage(t),e.callback&&e.callback()})}catch(r){Kinetic.Global.warn("Unable to apply filter.")}}}),Kinetic.Node.addGettersSetters(Kinetic.Image,["image","crop","filter"]),Kinetic.Node.addSetters(Kinetic.Image,["width","height"]),Kinetic.Polygon=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({points:[]}),this.shapeType="Polygon",e.drawFunc=this.drawFunc,this._super(e)},drawFunc:function(e){e.beginPath(),e.moveTo(this.attrs.points[0].x,this.attrs.points[0].y);for(var t=1;t<this.attrs.points.length;t++)e.lineTo(this.attrs.points[t].x,this.attrs.points[t].y);e.closePath(),this.fill(e),this.stroke(e)}}),Kinetic.Node.addGettersSetters(Kinetic.Polygon,["points"]),Kinetic.Text=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({fontFamily:"Calibri",text:"",fontSize:12,align:"left",verticalAlign:"top",fontStyle:"normal",padding:0,width:"auto",height:"auto",detectionType:"path",cornerRadius:0,lineHeight:1.2}),this.dummyCanvas=document.createElement("canvas"),this.shapeType="Text",e.drawFunc=this.drawFunc,this._super(e);var t=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height"],n=this;for(var r=0;r<t.length;r++){var i=t[r];this.on(i+"Change.kinetic",n._setTextData)}n._setTextData()},drawFunc:function(e){e.beginPath();var t=this.getBoxWidth(),n=this.getBoxHeight();this.attrs.cornerRadius===0?e.rect(0,0,t,n):(e.moveTo(this.attrs.cornerRadius,0),e.lineTo(t-this.attrs.cornerRadius,0),e.arc(t-this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI*3/2,0,!1),e.lineTo(t,n-this.attrs.cornerRadius),e.arc(t-this.attrs.cornerRadius,n-this.attrs.cornerRadius,this.attrs.cornerRadius,0,Math.PI/2,!1),e.lineTo(this.attrs.cornerRadius,n),e.arc(this.attrs.cornerRadius,n-this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI/2,Math.PI,!1),e.lineTo(0,this.attrs.cornerRadius),e.arc(this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI,Math.PI*3/2,!1)),e.closePath(),this.fill(e),this.stroke(e);var r=this.attrs.padding,i=this.attrs.lineHeight*this.getTextHeight(),s=this.textArr;e.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily,e.textBaseline="middle",e.textAlign="left",e.save(),e.translate(r,0),e.translate(0,r+this.getTextHeight()/2);for(var o=0;o<s.length;o++){var u=s[o];e.save(),this.attrs.align==="right"?e.translate(this.getBoxWidth()-this._getTextSize(u).width-r*2,0):this.attrs.align==="center"&&e.translate((this.getBoxWidth()-this._getTextSize(u).width-r*2)/2,0),this.fillText(e,u),this.strokeText(e,u),e.restore(),e.translate(0,i)}e.restore()},getBoxWidth:function(){return this.attrs.width==="auto"?this.getTextWidth()+this.attrs.padding*2:this.attrs.width},getBoxHeight:function(){return this.attrs.height==="auto"?this.getTextHeight()*this.textArr.length*this.attrs.lineHeight+this.attrs.padding*2:this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily;var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this.attrs.text.split(""),t=[],n=0,r=!0;this.textWidth=0,this.textHeight=this._getTextSize(this.attrs.text).height;var i=this.attrs.lineHeight*this.textHeight;while(e.length>0&&r&&(this.attrs.height==="auto"||i*(n+1)<this.attrs.height-this.attrs.padding*2)){var s=0,o=undefined;r=!1;while(s<e.length){if(e.indexOf("\n")===s){e.splice(s,1),o=e.splice(0,s).join("");break}var u=e.slice(0,s);if(this.attrs.width!=="auto"&&this._getTextSize(u.join("")).width>this.attrs.width-this.attrs.padding*2){if(s==0)break;var a=u.lastIndexOf(" "),f=u.lastIndexOf("-"),l=Math.max(a,f);if(l>=0){o=e.splice(0,1+l).join("");break}o=e.splice(0,s).join("");break}s++,s===e.length&&(o=e.splice(0,s).join(""))}this.textWidth=Math.max(this.textWidth,this._getTextSize(o).width),o!==undefined&&(t.push(o),r=!0),n++}this.textArr=t}}),Kinetic.Node.addGettersSetters(Kinetic.Text,["fontFamily","fontSize","fontStyle","textFill","textStroke","textStrokeWidth","padding","align","lineHeight","text","width","height","cornerRadius","fill","stroke","strokeWidth","shadow"]),Kinetic.Line=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({points:[],lineCap:"butt",dashArray:[],detectionType:"pixel"}),this.shapeType="Line",e.drawFunc=this.drawFunc,this._super(e)},drawFunc:function(e){var t={};e.beginPath(),e.moveTo(this.attrs.points[0].x,this.attrs.points[0].y);for(var n=1;n<this.attrs.points.length;n++){var r=this.attrs.points[n].x,i=this.attrs.points[n].y;if(this.attrs.dashArray.length>0){var s=this.attrs.points[n-1].x,o=this.attrs.points[n-1].y;this._dashedLine(e,s,o,r,i,this.attrs.dashArray)}else e.lineTo(r,i)}!this.attrs.lineCap||(e.lineCap=this.attrs.lineCap),this.stroke(e)},_dashedLine:function(e,t,n,r,i,s){var o=s.length,u=r-t,a=i-n,f=u>a,l=f?a/u:u/a;l>9999?l=9999:l<-9999&&(l=-9999);var c=Math.sqrt(u*u+a*a),h=0,p=!0;while(c>=.1&&h<1e4){var d=s[h++%o];d===0&&(d=.001),d>c&&(d=c);var v=Math.sqrt(d*d/(1+l*l));f?(t+=u<0&&a<0?v*-1:v,n+=u<0&&a<0?l*v*-1:l*v):(t+=u<0&&a<0?l*v*-1:l*v,n+=u<0&&a<0?v*-1:v),e[p?"lineTo":"moveTo"](t,n),c-=d,p=!p}e.moveTo(r,i)}}),Kinetic.Node.addGettersSetters(Kinetic.Line,["dashArray","lineCap","points"]),Kinetic.Sprite=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({index:0,frameRate:17}),e.drawFunc=this.drawFunc,this._super(e),this.anim=new Kinetic.Animation;var t=this;this.on("animationChange.kinetic",function(){t.setIndex(0)})},drawFunc:function(e){if(this.attrs.image){var t=this.attrs.animation,n=this.attrs.index,r=this.attrs.animations[t][n];e.beginPath(),e.rect(0,0,r.width,r.height),e.closePath(),this.drawImage(e,this.attrs.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height)}},start:function(){var e=this,t=this.getLayer(),n=Kinetic.Animation;n._removeAnimation(this.anim),this.anim.node=t,n._addAnimation(this.anim),this.interval=setInterval(function(){var t=e.attrs.index;e._updateIndex(),e.afterFrameFunc&&t===e.afterFrameIndex&&e.afterFrameFunc()},1e3/this.attrs.frameRate),n._handleAnimation()},stop:function(){Kinetic.Animation._removeAnimation(this.anim),clearInterval(this.interval)},afterFrame:function(e,t){this.afterFrameIndex=e,this.afterFrameFunc=t},_updateIndex:function(){var e=this.attrs.index,t=this.attrs.animation;e<this.attrs.animations[t].length-1?this.attrs.index++:this.attrs.index=0}}),Kinetic.Node.addGettersSetters(Kinetic.Sprite,["animation","animations","index"]),Kinetic.Star=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({numPoints:0,innerRadius:0,outerRadius:0}),this.shapeType="Star",e.drawFunc=this.drawFunc,this._super(e)},drawFunc:function(e){e.beginPath(),e.moveTo(0,0-this.attrs.outerRadius);for(var t=1;t<this.attrs.numPoints*2;t++){var n=t%2===0?this.attrs.outerRadius:this.attrs.innerRadius,r=n*Math.sin(t*Math.PI/this.attrs.numPoints),i=-1*n*Math.cos(t*Math.PI/this.attrs.numPoints);e.lineTo(r,i)}e.closePath(),this.fill(e),this.stroke(e)}}),Kinetic.Node.addGettersSetters(Kinetic.Star,["numPoints","innerRadius","outerRadius"]),Kinetic.RegularPolygon=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({radius:0,sides:0}),this.shapeType="RegularPolygon",e.drawFunc=this.drawFunc,this._super(e)},drawFunc:function(e){e.beginPath(),e.moveTo(0,0-this.attrs.radius);for(var t=1;t<this.attrs.sides;t++){var n=this.attrs.radius*Math.sin(t*2*Math.PI/this.attrs.sides),r=-1*this.attrs.radius*Math.cos(t*2*Math.PI/this.attrs.sides);e.lineTo(n,r)}e.closePath(),this.fill(e),this.stroke(e)}}),Kinetic.Node.addGettersSetters(Kinetic.RegularPolygon,["radius","sides"]),Kinetic.Path=Kinetic.Shape.extend({init:function(e){this.shapeType="Path",this.dataArray=[];var t=this;e.drawFunc=this.drawFunc,this._super(e),this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange",function(){t.dataArray=Kinetic.Path.parsePathData(t.attrs.data)})},drawFunc:function(e){var t=this.dataArray;e.beginPath();for(var n=0;n<t.length;n++){var r=t[n].command,i=t[n].points;switch(r){case"L":e.lineTo(i[0],i[1]);break;case"M":e.moveTo(i[0],i[1]);break;case"C":e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":e.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var s=i[0],o=i[1],u=i[2],a=i[3],f=i[4],l=i[5],c=i[6],h=i[7],p=u>a?u:a,d=u>a?1:u/a,v=u>a?a/u:1;e.translate(s,o),e.rotate(c),e.scale(d,v),e.arc(0,0,p,f,f+l,1-h),e.scale(1/d,1/v),e.rotate(-c),e.translate(-s,-o);break;case"z":e.closePath()}}this.fill(e),this.stroke(e)}}),Kinetic.Path.getLineLength=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},Kinetic.Path.getPointOnLine=function(e,t,n,r,i,s,o){s===undefined&&(s=t),o===undefined&&(o=n);var u=(i-n)/(r-t+1e-8),a=Math.sqrt(e*e/(1+u*u)),f=u*a,l;if((o-n)/(s-t+1e-8)===u)l={x:s+a,y:o+f};else{var c,h,p=this.getLineLength(t,n,r,i);if(p<1e-8)return undefined;var d=(s-t)*(r-t)+(o-n)*(i-n);d/=p*p,c=t+d*(r-t),h=n+d*(i-n);var v=this.getLineLength(s,o,c,h),m=Math.sqrt(e*e-v*v);a=Math.sqrt(m*m/(1+u*u)),f=u*a,l={x:c+a,y:h+f}}return l},Kinetic.Path.getPointOnCubicBezier=function(e,t,n,r,i,s,o,u,a){function f(e){return e*e*e}function l(e){return 3*e*e*(1-e)}function c(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}var p=u*f(e)+s*l(e)+r*c(e)+t*h(e),d=a*f(e)+o*l(e)+i*c(e)+n*h(e);return{x:p,y:d}},Kinetic.Path.getPointOnQuadraticBezier=function(e,t,n,r,i,s,o){function u(e){return e*e}function a(e){return 2*e*(1-e)}function f(e){return(1-e)*(1-e)}var l=s*u(e)+r*a(e)+t*f(e),c=o*u(e)+i*a(e)+n*f(e);return{x:l,y:c}},Kinetic.Path.getPointOnEllipticalArc=function(e,t,n,r,i,s){var o=Math.cos(s),u=Math.sin(s),a={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:e+(a.x*o-a.y*u),y:t+(a.x*u+a.y*o)}},Kinetic.Path.parsePathData=function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var i=t.split("|"),s=[],o=0,u=0;for(var r=1;r<i.length;r++){var a=i[r],f=a.charAt(0);a=a.slice(1),a=a.replace(new RegExp(",-","g"),"-"),a=a.replace(new RegExp("-","g"),",-"),a=a.replace(new RegExp("e,-","g"),"e-");var l=a.split(",");l.length>0&&l[0]===""&&l.shift();for(var c=0;c<l.length;c++)l[c]=parseFloat(l[c]);while(l.length>0){if(isNaN(l[0]))break;var h=null,p=[],d=o,v=u;switch(f){case"l":o+=l.shift(),u+=l.shift(),h="L",p.push(o,u);break;case"L":o=l.shift(),u=l.shift(),p.push(o,u);break;case"m":o+=l.shift(),u+=l.shift(),h="M",p.push(o,u),f="l";break;case"M":o=l.shift(),u=l.shift(),h="M",p.push(o,u),f="L";break;case"h":o+=l.shift(),h="L",p.push(o,u);break;case"H":o=l.shift(),h="L",p.push(o,u);break;case"v":u+=l.shift(),h="L",p.push(o,u);break;case"V":u=l.shift(),h="L",p.push(o,u);break;case"C":p.push(l.shift(),l.shift(),l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"c":p.push(o+l.shift(),u+l.shift(),o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"S":var m=o,g=u,y=s[s.length-1];y.command==="C"&&(m=o+(o-y.points[2]),g=u+(u-y.points[3])),p.push(m,g,l.shift(),l.shift()),o=l.shift(),u=l.shift(),h="C",p.push(o,u);break;case"s":var m=o,g=u,y=s[s.length-1];y.command==="C"&&(m=o+(o-y.points[2]),g=u+(u-y.points[3])),p.push(m,g,o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"Q":p.push(l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"q":p.push(o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="Q",p.push(o,u);break;case"T":var m=o,g=u,y=s[s.length-1];y.command==="Q"&&(m=o+(o-y.points[0]),g=u+(u-y.points[1])),o=l.shift(),u=l.shift(),h="Q",p.push(m,g,o,u);break;case"t":var m=o,g=u,y=s[s.length-1];y.command==="Q"&&(m=o+(o-y.points[0]),g=u+(u-y.points[1])),o+=l.shift(),u+=l.shift(),h="Q",p.push(m,g,o,u);break;case"A":var b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u;o=l.shift(),u=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E);break;case"a":var b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u;o+=l.shift(),u+=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E)}s.push({command:h||f,points:p,start:{x:d,y:v},pathLength:this.calcLength(d,v,h||f,p)})}(f==="z"||f==="Z")&&s.push({command:"z",points:[],start:undefined,pathLength:0})}return s},Kinetic.Path.calcLength=function(e,n,r,i){var s,o,u,a=Kinetic.Path;switch(r){case"L":return a.getLineLength(e,n,i[0],i[1]);case"C":s=0,o=a.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]);for(t=.01;t<=1;t+=.01)u=a.getPointOnCubicBezier(t,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return s;case"Q":s=0,o=a.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]);for(t=.01;t<=1;t+=.01)u=a.getPointOnQuadraticBezier(t,e,n,i[0],i[1],i[2],i[3]),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return s;case"A":s=0;var f=i[4],l=i[5],c=i[4]+l,h=Math.PI/180;Math.abs(f-c)<h&&(h=Math.abs(f-c)),o=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0);if(l<0)for(t=f-h;t>c;t-=h)u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],t,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;else for(t=f+h;t<c;t+=h)u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],t,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),s}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(e,t,n,r,i,s,o,u,a){var f=a*(Math.PI/180),l=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,c=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,h=l*l/(o*o)+c*c/(u*u);h>1&&(o*=Math.sqrt(h),u*=Math.sqrt(h));var p=Math.sqrt((o*o*u*u-o*o*c*c-u*u*l*l)/(o*o*c*c+u*u*l*l));i==s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*c/u,v=p*-u*l/o,m=(e+n)/2+Math.cos(f)*d-Math.sin(f)*v,g=(t+r)/2+Math.sin(f)*d+Math.cos(f)*v,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},E=w([1,0],[(l-d)/o,(c-v)/u]),S=[(l-d)/o,(c-v)/u],x=[(-1*l-d)/o,(-1*c-v)/u],T=w(S,x);return b(S,x)<=-1&&(T=Math.PI),b(S,x)>=1&&(T=0),s===0&&T>0&&(T-=2*Math.PI),s==1&&T<0&&(T+=2*Math.PI),[m,g,o,u,E,T,f,s]},Kinetic.Node.addGettersSetters(Kinetic.Path,["data"]),Kinetic.TextPath=Kinetic.Shape.extend({init:function(e){this.setDefaultAttrs({fontFamily:"Calibri",fontSize:12,fontStyle:"normal",detectionType:"path",text:""}),this.dummyCanvas=document.createElement("canvas"),this.shapeType="TextPath",this.dataArray=[];var t=this;e.drawFunc=this.drawFunc,this._super(e),this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange",function(){t.dataArray=Kinetic.Path.parsePathData(this.attrs.data)});var n=["text","textStroke","textStrokeWidth"];for(var r=0;r<n.length;r++){var i=n[r];this.on(i+"Change",t._setTextData)}t._setTextData()},drawFunc:function(e){var t=this.charArr;e.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily,e.textBaseline="middle",e.textAlign="left",e.save();var n=this.glyphInfo;for(var r=0;r<n.length;r++){e.save();var i=n[r].p0,s=n[r].p1,o=parseFloat(this.attrs.fontSize);e.translate(i.x,i.y),e.rotate(n[r].rotation),this.fillText(e,n[r].text),this.strokeText(e,n[r].text),e.restore()}e.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily;var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];var n=this.attrs.text.split(""),r,i,s,o=-1,u=0,a=function(){u=0;var t=e.dataArray;for(var n=o+1;n<t.length;n++){if(t[n].pathLength>0)return o=n,t[n];t[n].command=="M"&&(r={x:t[n].points[0],y:t[n].points[1]})}return{}},f=function(t,n){var o=e._getTextSize(t).width,f=0,l=0,c=!1;i=undefined;while(Math.abs(o-f)/o>.01&&l<25){l++;var h=f;while(s===undefined)s=a(),s&&h+s.pathLength<o&&(h+=s.pathLength,s=undefined);if(s==={}||r===undefined)return undefined;var p=!1;switch(s.command){case"L":Kinetic.Path.getLineLength(r.x,r.y,s.points[0],s.points[1])>o?i=Kinetic.Path.getPointOnLine(o,r.x,r.y,s.points[0],s.points[1],r.x,r.y):s=undefined;break;case"A":var d=s.points[4],v=s.points[5],m=s.points[4]+v;u===0?u=d+1e-8:o>f?u+=Math.PI/180*v/Math.abs(v):u-=Math.PI/360*v/Math.abs(v),Math.abs(u)>Math.abs(m)&&(u=m,p=!0),i=Kinetic.Path.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],u,s.points[6]);break;case"C":u===0?o>s.pathLength?u=1e-8:u=o/s.pathLength:o>f?u+=(o-f)/s.pathLength:u-=(f-o)/s.pathLength,u>1&&(u=1,p=!0),i=Kinetic.Path.getPointOnCubicBezier(u,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case"Q":u===0?u=o/s.pathLength:o>f?u+=(o-f)/s.pathLength:u-=(f-o)/s.pathLength,u>1&&(u=1,p=!0),i=Kinetic.Path.getPointOnQuadraticBezier(u,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3])}i!==undefined&&(f=Kinetic.Path.getLineLength(r.x,r.y,i.x,i.y)),p&&(p=!1,s=undefined)}};for(var l=0;l<n.length;l++){f(n[l]);if(r===undefined||i===undefined)break;var c=Kinetic.Path.getLineLength(r.x,r.y,i.x,i.y),h=0,p=Kinetic.Path.getPointOnLine(h+c/2,r.x,r.y,i.x,i.y),d=Math.atan2(i.y-r.y,i.x-r.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:n[l],rotation:d,p0:r,p1:i}),r=i}}}),Kinetic.Node.addGettersSetters(Kinetic.TextPath,["fontFamily","fontSize","fontStyle","textFill","textStroke","textStrokeWidth","text"]);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/knockout-2.1.0rc.debug.js */

// Knockout JavaScript library v2.1.0rc
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function(e,t,n,r){var i=!0;!function(t){if(typeof require=="function"&&typeof exports=="object"&&typeof module=="object"){var n=module.exports||exports;t(n)}else typeof define=="function"&&define.amd?define(["exports"],t):t(e.ko={})}(function(s){function u(e){var t=this;if(e)for(var n in e){var r=o.extenders[n];typeof r=="function"&&(t=r(t,e[n]))}return t}function p(e,t,n){n&&t!==o.selectExtensions.readValue(e)&&o.selectExtensions.writeValue(e,t),t!==o.selectExtensions.readValue(e)&&o.utils.triggerEvent(e,"change")}var o=typeof s!="undefined"?s:{};o.exportSymbol=function(e,t){var n=e.split("."),r=o;for(var i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},o.exportProperty=function(e,t,n){e[t]=n},o.version="2.1.0rc",o.exportSymbol("version",o.version),o.utils=new function(){function m(e,t){if(o.utils.tagNameLower(e)!=="input"||!e.type)return!1;if(t.toLowerCase()!="click")return!1;var n=e.type;return n=="checkbox"||n=="radio"}var i=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,s={},u={},a=/Firefox\/2/i.test(n.userAgent)?"KeyboardEvent":"UIEvents";s[a]=["keyup","keydown","keypress"],s.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(var f in s){var l=s[f];if(l.length)for(var c=0,h=l.length;c<h;c++)u[l[c]]=f}var p=function(){var e=3,n=t.createElement("div"),i=n.getElementsByTagName("i");while(n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0]);return e>4?e:r}(),d=p===6,v=p===7;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])},arrayIndexOf:function(e,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r]))return e[r];return null},arrayRemoveItem:function(e,t){var n=o.utils.arrayIndexOf(e,t);n>=0&&e.splice(n,1)},arrayGetDistinctValues:function(e){e=e||[];var t=[];for(var n=0,r=e.length;n<r;n++)o.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t(e[r]));return n},arrayFilter:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)t(e[r])&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},emptyDomNode:function(e){while(e.firstChild)o.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){var n=o.utils.makeArray(e),r=t.createElement("div");for(var i=0,s=n.length;i<s;i++)o.cleanNode(n[i]),r.appendChild(n[i]);return r},setDomNodeChildren:function(e,t){o.utils.emptyDomNode(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){var r=n[0],i=r.parentNode;for(var s=0,u=t.length;s<u;s++)i.insertBefore(t[s],r);for(var s=0,u=n.length;s<u;s++)o.removeNode(n[s])}},setOptionNodeSelectionState:function(e,t){n.userAgent.indexOf("MSIE 6")>=0?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return(e||"").replace(i,"")},stringTokenize:function(e,t){var n=[],r=(e||"").split(t);for(var i=0,s=r.length;i<s;i++){var u=o.utils.stringTrim(r[i]);u!==""&&n.push(u)}return n},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},buildEvalWithinScopeFunction:function(e,t){var n="return ("+e+")";for(var r=0;r<t;r++)n="with(sc["+r+"]) { "+n+" } ";return new Function("sc",n)},domNodeIsContainedBy:function(e,t){if(t.compareDocumentPosition)return(t.compareDocumentPosition(e)&16)==16;while(e!=null){if(e==t)return!0;e=e.parentNode}return!1},domNodeIsAttachedToDocument:function(e){return o.utils.domNodeIsContainedBy(e,e.ownerDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(e,t,n){if(typeof jQuery!="undefined"){if(m(e,t)){var r=n;n=function(e,t){var n=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),r.call(this,e),this.checked=n}}jQuery(e).bind(t,n)}else if(typeof e.addEventListener=="function")e.addEventListener(t,n,!1);else{if(typeof e.attachEvent=="undefined")throw new Error("Browser doesn't support addEventListener or attachEvent");e.attachEvent("on"+t,function(t){n.call(e,t)})}},triggerEvent:function(n,r){if(!n||!n.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var i=[];m(n,r)&&i.push({checkedStateBeforeEvent:n.checked}),jQuery(n).trigger(r,i)}else if(typeof t.createEvent=="function"){if(typeof n.dispatchEvent!="function")throw new Error("The supplied element doesn't support dispatchEvent");var s=u[r]||"HTMLEvents",o=t.createEvent(s);o.initEvent(r,!0,!0,e,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(o)}else{if(typeof n.fireEvent=="undefined")throw new Error("Browser doesn't support triggering events");m(n,r)&&(n.checked=n.checked!==!0),n.fireEvent("on"+r)}},unwrapObservable:function(e){return o.isObservable(e)?e():e},toggleDomNodeCssClass:function(e,t,n){var r=(e.className||"").split(/\s+/),i=o.utils.arrayIndexOf(r,t)>=0;if(n&&!i)e.className+=(r[0]?" ":"")+t;else if(i&&!n){var s="";for(var u=0;u<r.length;u++)r[u]!=t&&(s+=r[u]+" ");e.className=o.utils.stringTrim(s)}},setTextContent:function(e,t){var n=o.utils.unwrapObservable(t);if(n===null||n===r)n="";"innerText"in e?e.innerText=n:e.textContent=n,p>=9&&(e.style.display=e.style.display)},ensureSelectElementIsRenderedCorrectly:function(e){if(p>=9){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=o.utils.unwrapObservable(e),t=o.utils.unwrapObservable(t);var n=[];for(var r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},isIe6:d,isIe7:v,ieVersion:p,getFormFields:function(e,t){var n=o.utils.makeArray(e.getElementsByTagName("input")).concat(o.utils.makeArray(e.getElementsByTagName("textarea"))),r=typeof t=="string"?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[];for(var s=n.length-1;s>=0;s--)r(n[s])&&i.push(n[s]);return i},parseJson:function(t){if(typeof t=="string"){t=o.utils.stringTrim(t);if(t)return e.JSON&&e.JSON.parse?e.JSON.parse(t):(new Function("return "+t))()}return null},stringifyJson:function(e,t,n){if(typeof JSON=="undefined"||typeof JSON.stringify=="undefined")throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(o.utils.unwrapObservable(e),t,n)},postJson:function(e,n,r){r=r||{};var i=r.params||{},s=r.includeFields||this.fieldsIncludedWithJsonPost,u=e;if(typeof e=="object"&&o.utils.tagNameLower(e)==="form"){var a=e;u=a.action;for(var f=s.length-1;f>=0;f--){var l=o.utils.getFormFields(a,s[f]);for(var c=l.length-1;c>=0;c--)i[l[c].name]=l[c].value}}n=o.utils.unwrapObservable(n);var h=t.createElement("form");h.style.display="none",h.action=u,h.method="post";for(var p in n){var d=t.createElement("input");d.name=p,d.value=o.utils.stringifyJson(o.utils.unwrapObservable(n[p])),h.appendChild(d)}for(var p in i){var d=t.createElement("input");d.name=p,d.value=i[p],h.appendChild(d)}t.body.appendChild(h),r.submitter?r.submitter(h):h.submit(),setTimeout(function(){h.parentNode.removeChild(h)},0)}}},o.exportSymbol("utils",o.utils),o.exportSymbol("utils.arrayForEach",o.utils.arrayForEach),o.exportSymbol("utils.arrayFirst",o.utils.arrayFirst),o.exportSymbol("utils.arrayFilter",o.utils.arrayFilter),o.exportSymbol("utils.arrayGetDistinctValues",o.utils.arrayGetDistinctValues),o.exportSymbol("utils.arrayIndexOf",o.utils.arrayIndexOf),o.exportSymbol("utils.arrayMap",o.utils.arrayMap),o.exportSymbol("utils.arrayPushAll",o.utils.arrayPushAll),o.exportSymbol("utils.arrayRemoveItem",o.utils.arrayRemoveItem),o.exportSymbol("utils.extend",o.utils.extend),o.exportSymbol("utils.fieldsIncludedWithJsonPost",o.utils.fieldsIncludedWithJsonPost),o.exportSymbol("utils.getFormFields",o.utils.getFormFields),o.exportSymbol("utils.postJson",o.utils.postJson),o.exportSymbol("utils.parseJson",o.utils.parseJson),o.exportSymbol("utils.registerEventHandler",o.utils.registerEventHandler),o.exportSymbol("utils.stringifyJson",o.utils.stringifyJson),o.exportSymbol("utils.range",o.utils.range),o.exportSymbol("utils.toggleDomNodeCssClass",o.utils.toggleDomNodeCssClass),o.exportSymbol("utils.triggerEvent",o.utils.triggerEvent),o.exportSymbol("utils.unwrapObservable",o.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),o.utils.domData=new function(){var e=0,t="__ko__"+(new Date).getTime(),n={};return{get:function(e,t){var n=o.utils.domData.getAll(e,!1);return n===r?r:n[t]},set:function(e,t,n){if(n===r&&o.utils.domData.getAll(e,!1)===r)return;var i=o.utils.domData.getAll(e,!0);i[t]=n},getAll:function(i,s){var o=i[t],u=o&&o!=="null";if(!u){if(!s)return r;o=i[t]="ko"+e++,n[o]={}}return n[o]},clear:function(e){var r=e[t];r&&(delete n[r],e[t]=null)}}},o.exportSymbol("utils.domData",o.utils.domData),o.exportSymbol("utils.domData.clear",o.utils.domData.clear),o.utils.domNodeDisposal=new function(){function i(t,n){var i=o.utils.domData.get(t,e);return i===r&&n&&(i=[],o.utils.domData.set(t,e,i)),i}function s(t){o.utils.domData.set(t,e,r)}function u(e){var t=i(e,!1);if(t){t=t.slice(0);for(var r=0;r<t.length;r++)t[r](e)}o.utils.domData.clear(e),typeof jQuery=="function"&&typeof jQuery["cleanData"]=="function"&&jQuery.cleanData([e]),n[e.nodeType]&&a(e)}function a(e){var t,n=e.firstChild;while(t=n)n=t.nextSibling,t.nodeType===8&&u(t)}var e="__ko_domNodeDisposal__"+(new Date).getTime(),t={1:!0,8:!0,9:!0},n={1:!0,9:!0};return{addDisposeCallback:function(e,t){if(typeof t!="function")throw new Error("Callback must be a function");i(e,!0).push(t)},removeDisposeCallback:function(e,t){var n=i(e,!1);n&&(o.utils.arrayRemoveItem(n,t),n.length==0&&s(e))},cleanNode:function(e){if(t[e.nodeType]){u(e);if(n[e.nodeType]){var r=[];o.utils.arrayPushAll(r,e.getElementsByTagName("*"));for(var i=0,s=r.length;i<s;i++)u(r[i])}}},removeNode:function(e){o.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)}}},o.cleanNode=o.utils.domNodeDisposal.cleanNode,o.removeNode=o.utils.domNodeDisposal.removeNode,o.exportSymbol("cleanNode",o.cleanNode),o.exportSymbol("removeNode",o.removeNode),o.exportSymbol("utils.domNodeDisposal",o.utils.domNodeDisposal),o.exportSymbol("utils.domNodeDisposal.addDisposeCallback",o.utils.domNodeDisposal.addDisposeCallback),o.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",o.utils.domNodeDisposal.removeDisposeCallback),function(){function i(n){var r=o.utils.stringTrim(n).toLowerCase(),i=t.createElement("div"),s=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],u="ignored<div>"+s[1]+n+s[2]+"</div>";typeof e["innerShiv"]=="function"?i.appendChild(e.innerShiv(u)):i.innerHTML=u;while(s[0]--)i=i.lastChild;return o.utils.makeArray(i.lastChild.childNodes)}function s(e){var t=jQuery.clean([e]);if(t&&t[0]){var n=t[0];while(n.parentNode&&n.parentNode.nodeType!==11)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}return t}var n=/^(\s*)<!--(.*?)-->/;o.utils.parseHtmlFragment=function(e){return typeof jQuery!="undefined"?s(e):i(e)},o.utils.setHtml=function(e,t){o.utils.emptyDomNode(e);if(t!==null&&t!==r){typeof t!="string"&&(t=t.toString());if(typeof jQuery!="undefined")jQuery(e).html(t);else{var n=o.utils.parseHtmlFragment(t);for(var i=0;i<n.length;i++)e.appendChild(n[i])}}}}(),o.exportSymbol("utils.parseHtmlFragment",o.utils.parseHtmlFragment),o.exportSymbol("utils.setHtml",o.utils.setHtml),o.memoization=function(){function t(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function n(){return t()+t()}function i(e,t){if(!e)return;if(e.nodeType==8){var n=o.memoization.parseMemoText(e.nodeValue);n!=null&&t.push({domNode:e,memoId:n})}else if(e.nodeType==1)for(var r=0,s=e.childNodes,u=s.length;r<u;r++)i(s[r],t)}var e={};return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var r=n();return e[r]=t,"<!--[ko_memo:"+r+"]-->"},unmemoize:function(t,n){var i=e[t];if(i===r)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return i.apply(null,n||[]),!0}finally{delete e[t]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];i(e,n);for(var r=0,s=n.length;r<s;r++){var u=n[r].domNode,a=[u];t&&o.utils.arrayPushAll(a,t),o.memoization.unmemoize(n[r].memoId,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),o.exportSymbol("memoization",o.memoization),o.exportSymbol("memoization.memoize",o.memoization.memoize),o.exportSymbol("memoization.unmemoize",o.memoization.unmemoize),o.exportSymbol("memoization.parseMemoText",o.memoization.parseMemoText),o.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",o.memoization.unmemoizeDomNodeAndDescendants),o.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return o.dependentObservable({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,t){return e.equalityComparer=t=="always"?function(){return!1}:o.observable.fn.equalityComparer,e}},o.exportSymbol("extenders",o.extenders),o.subscription=function(e,t,n){this.target=e,this.callback=t,this.disposeCallback=n,o.exportProperty(this,"dispose",this.dispose)},o.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},o.subscribable=function(){this._subscriptions={},o.utils.extend(this,o.subscribable.fn),o.exportProperty(this,"subscribe",this.subscribe),o.exportProperty(this,"extend",this.extend),o.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var a="change";o.subscribable.fn={subscribe:function(e,t,n){n=n||a;var r=t?e.bind(t):e,i=new o.subscription(this,r,function(){o.utils.arrayRemoveItem(this._subscriptions[n],i)}.bind(this));return this._subscriptions[n]||(this._subscriptions[n]=[]),this._subscriptions[n].push(i),i},notifySubscribers:function(e,t){t=t||a,this._subscriptions[t]&&o.utils.arrayForEach(this._subscriptions[t].slice(0),function(t){t&&t.isDisposed!==!0&&t.callback(e)})},getSubscriptionsCount:function(){var e=0;for(var t in this._subscriptions)this._subscriptions.hasOwnProperty(t)&&(e+=this._subscriptions[t].length);return e},extend:u},o.isSubscribable=function(e){return typeof e.subscribe=="function"&&typeof e["notifySubscribers"]=="function"},o.exportSymbol("subscribable",o.subscribable),o.exportSymbol("isSubscribable",o.isSubscribable),o.dependencyDetection=function(){var e=[];return{begin:function(t){e.push({callback:t,distinctDependencies:[]})},end:function(){e.pop()},registerDependency:function(t){if(!o.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");if(e.length>0){var n=e[e.length-1];if(o.utils.arrayIndexOf(n.distinctDependencies,t)>=0)return;n.distinctDependencies.push(t),n.callback(t)}}}}();var f={"undefined":!0,"boolean":!0,number:!0,string:!0};o.observable=function(e){function n(){if(arguments.length>0){if(!n.equalityComparer||!n.equalityComparer(t,arguments[0]))n.valueWillMutate(),t=arguments[0],i&&(n._latestValue=t),n.valueHasMutated();return this}return o.dependencyDetection.registerDependency(n),t}var t=e;return i&&(n._latestValue=t),o.subscribable.call(n),n.valueHasMutated=function(){n.notifySubscribers(t)},n.valueWillMutate=function(){n.notifySubscribers(t,"beforeChange")},o.utils.extend(n,o.observable.fn),o.exportProperty(n,"valueHasMutated",n.valueHasMutated),o.exportProperty(n,"valueWillMutate",n.valueWillMutate),n},o.observable.fn={equalityComparer:function(t,n){var r=t===null||typeof t in f;return r?t===n:!1}};var l=o.observable.protoProperty="__ko_proto__";o.observable.fn[l]=o.observable,o.hasPrototype=function(e,t){return e===null||e===r||e[l]===r?!1:e[l]===t?!0:o.hasPrototype(e[l],t)},o.isObservable=function(e){return o.hasPrototype(e,o.observable)},o.isWriteableObservable=function(e){return typeof e=="function"&&e[l]===o.observable?!0:typeof e=="function"&&e[l]===o.dependentObservable&&e.hasWriteFunction?!0:!1},o.exportSymbol("observable",o.observable),o.exportSymbol("isObservable",o.isObservable),o.exportSymbol("isWriteableObservable",o.isWriteableObservable),o.observableArray=function(e){arguments.length==0&&(e=[]);if(e===null||e===r||"length"in e){var t=o.observable(e);return o.utils.extend(t,o.observableArray.fn),t}throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},o.observableArray.fn={remove:function(e){var t=this(),n=[],r=typeof e=="function"?e:function(t){return t===e};for(var i=0;i<t.length;i++){var s=t[i];r(s)&&(n.length===0&&this.valueWillMutate(),n.push(s),t.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===r){var t=this(),n=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),n}return e?this.remove(function(t){return o.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this(),n=typeof e=="function"?e:function(t){return t===e};this.valueWillMutate();for(var r=t.length-1;r>=0;r--){var i=t[r];n(i)&&(t[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===r?this.destroy(function(){return!0}):e?this.destroy(function(t){return o.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return o.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this()[n]=t,this.valueHasMutated())}},o.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){o.observableArray.fn[e]=function(){var t=this();this.valueWillMutate();var n=t[e].apply(t,arguments);return this.valueHasMutated(),n}}),o.utils.arrayForEach(["slice"],function(e){o.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),o.exportSymbol("observableArray",o.observableArray),o.dependentObservable=function(e,t,n){function h(){o.utils.arrayForEach(c,function(e){e.dispose()}),c=[]}function y(){var e=w.throttleEvaluation;e&&e>=0?(clearTimeout(g),g=setTimeout(b,e)):b()}function b(){if(a)return;if(u&&v()){p();return}a=!0;try{var e=o.utils.arrayMap(c,function(e){return e.target});o.dependencyDetection.begin(function(t){var n;(n=o.utils.arrayIndexOf(e,t))>=0?e[n]=r:c.push(t.subscribe(y))});var n=f.call(t);for(var l=e.length-1;l>=0;l--)e[l]&&c.splice(l,1)[0].dispose();u=!0,w.notifySubscribers(s,"beforeChange"),s=n,i&&(w._latestValue=s)}finally{o.dependencyDetection.end()}w.notifySubscribers(s),a=!1}function w(){if(!(arguments.length>0))return S();E.apply(w,arguments)}function E(){if(typeof l!="function")throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");l.apply(t,arguments)}function S(){return u||b(),o.dependencyDetection.registerDependency(w),s}var s,u=!1,a=!1,f=e;f&&typeof f=="object"?(n=f,f=n.read):(n=n||{},f||(f=n.read));if(typeof f!="function")throw new Error("Pass a function that returns the value of the ko.computed");var l=n.write;t||(t=n.owner);var c=[],p=h,d=typeof n["disposeWhenNodeIsRemoved"]=="object"?n.disposeWhenNodeIsRemoved:null,v=n.disposeWhen||function(){return!1};if(d){p=function(){o.utils.domNodeDisposal.removeDisposeCallback(d,arguments.callee),h()},o.utils.domNodeDisposal.addDisposeCallback(d,p);var m=v;v=function(){return!o.utils.domNodeIsAttachedToDocument(d)||m()}}var g=null;return w.getDependenciesCount=function(){return c.length},w.hasWriteFunction=typeof n.write=="function",w.dispose=function(){p()},o.subscribable.call(w),o.utils.extend(w,o.dependentObservable.fn),n.deferEvaluation!==!0&&b(),o.exportProperty(w,"dispose",w.dispose),o.exportProperty(w,"getDependenciesCount",w.getDependenciesCount),w},o.isComputed=function(e){return o.hasPrototype(e,o.dependentObservable)};var c=o.observable.protoProperty;o.dependentObservable[c]=o.observable,o.dependentObservable.fn={},o.dependentObservable.fn[c]=o.dependentObservable,o.exportSymbol("dependentObservable",o.dependentObservable),o.exportSymbol("computed",o.dependentObservable),o.exportSymbol("isComputed",o.isComputed),function(){function t(e,s,o){o=o||new i,e=s(e);var u=typeof e=="object"&&e!==null&&e!==r&&!(e instanceof Date);if(!u)return e;var a=e instanceof Array?[]:{};return o.save(e,a),n(e,function(n){var i=s(e[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":a[n]=i;break;case"object":case"undefined":var u=o.get(i);a[n]=u!==r?u:t(i,s,o)}}),a}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);typeof e["toJSON"]=="function"&&t("toJSON")}else for(var r in e)t(r)}function i(){var e=[],t=[];this.save=function(n,r){var i=o.utils.arrayIndexOf(e,n);i>=0?t[i]=r:(e.push(n),t.push(r))},this.get=function(n){var i=o.utils.arrayIndexOf(e,n);return i>=0?t[i]:r}}var e=10;o.toJS=function(n){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return t(n,function(t){for(var n=0;o.isObservable(t)&&n<e;n++)t=t();return t})},o.toJSON=function(e,t,n){var r=o.toJS(e);return o.utils.stringifyJson(r,t,n)}}(),o.exportSymbol("toJS",o.toJS),o.exportSymbol("toJSON",o.toJSON),function(){var e="__ko__hasDomDataOptionValue__";o.selectExtensions={readValue:function(t){switch(o.utils.tagNameLower(t)){case"option":if(t[e]===!0)return o.utils.domData.get(t,o.bindingHandlers.options.optionValueDomDataKey);return t.getAttribute("value");case"select":return t.selectedIndex>=0?o.selectExtensions.readValue(t.options[t.selectedIndex]):r;default:return t.value}},writeValue:function(t,n){switch(o.utils.tagNameLower(t)){case"option":switch(typeof n){case"string":o.utils.domData.set(t,o.bindingHandlers.options.optionValueDomDataKey,r),e in t&&delete t[e],t.value=n;break;default:o.utils.domData.set(t,o.bindingHandlers.options.optionValueDomDataKey,n),t[e]=!0,t.value=typeof n=="number"?n:""}break;case"select":for(var i=t.options.length-1;i>=0;i--)if(o.selectExtensions.readValue(t.options[i])==n){t.selectedIndex=i;break}break;default:if(n===null||n===r)n="";t.value=n}}}}(),o.exportSymbol("selectExtensions",o.selectExtensions),o.exportSymbol("selectExtensions.readValue",o.selectExtensions.readValue),o.exportSymbol("selectExtensions.writeValue",o.selectExtensions.writeValue),o.jsonExpressionRewriting=function(){function r(t,n){var r=null;while(t!=r)r=t,t=t.replace(e,function(e,t){return n[t]});return t}function i(e){return o.utils.arrayIndexOf(n,o.utils.stringTrim(e).toLowerCase())>=0?!1:e.match(t)!==null}function s(e){var t=o.utils.stringTrim(e);switch(t.length&&t.charAt(0)){case"'":case'"':return e;default:return"'"+t+"'"}}var e=/\@ko_token_(\d+)\@/g,t=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i,n=["true","false"];return{bindingRewriteValidators:[],parseObjectLiteral:function(e){var t=o.utils.stringTrim(e);if(t.length<3)return[];t.charAt(0)==="{"&&(t=t.substring(1,t.length-1));var n=[],i=null,s;for(var u=0;u<t.length;u++){var a=t.charAt(u);if(i===null)switch(a){case'"':case"'":case"/":i=u,s=a}else if(a==s&&t.charAt(u-1)!=="\\"){var f=t.substring(i,u+1);n.push(f);var l="@ko_token_"+(n.length-1)+"@";t=t.substring(0,i)+l+t.substring(u+1),u-=f.length-l.length,i=null}}i=null,s=null;var c=0,h=null;for(var u=0;u<t.length;u++){var a=t.charAt(u);if(i===null)switch(a){case"{":i=u,h=a,s="}";break;case"(":i=u,h=a,s=")";break;case"[":i=u,h=a,s="]"}if(a===h)c++;else if(a===s){c--;if(c===0){var f=t.substring(i,u+1);n.push(f);var l="@ko_token_"+(n.length-1)+"@";t=t.substring(0,i)+l+t.substring(u+1),u-=f.length-l.length,i=null}}}var p=[],d=t.split(",");for(var v=0,m=d.length;v<m;v++){var g=d[v],y=g.indexOf(":");if(y>0&&y<g.length-1){var b=g.substring(0,y),w=g.substring(y+1);p.push({key:r(b,n),value:r(w,n)})}else p.push({unknown:r(g,n)})}return p},insertPropertyAccessorsIntoJson:function(e){var t=typeof e=="string"?o.jsonExpressionRewriting.parseObjectLiteral(e):e,n=[],r=[],u;for(var a=0;u=t[a];a++){n.length>0&&n.push(",");if(u.key){var f=s(u.key),l=u.value;n.push(f),n.push(":"),n.push(l),i(o.utils.stringTrim(l))&&(r.length>0&&r.push(", "),r.push(f+" : function(__ko_value) { "+l+" = __ko_value; }"))}else u.unknown&&n.push(u.unknown)}var c=n.join("");if(r.length>0){var h=r.join("");c=c+", '_ko_property_writers' : { "+h+" } "}return c},keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(o.utils.stringTrim(e[n]["key"])==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,i){if(!e||!o.isWriteableObservable(e)){var s=t()._ko_property_writers;s&&s[n]&&s[n](r)}else(!i||e()!==r)&&e(r)}}}(),o.exportSymbol("jsonExpressionRewriting",o.jsonExpressionRewriting),o.exportSymbol("jsonExpressionRewriting.bindingRewriteValidators",o.jsonExpressionRewriting.bindingRewriteValidators),o.exportSymbol("jsonExpressionRewriting.parseObjectLiteral",o.jsonExpressionRewriting.parseObjectLiteral),o.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.jsonExpressionRewriting.insertPropertyAccessorsIntoJson),function(){function s(t){return t.nodeType==8&&(e?t.text:t.nodeValue).match(n)}function u(t){return t.nodeType==8&&(e?t.text:t.nodeValue).match(r)}function a(e,t){var n=e,r=1,i=[];while(n=n.nextSibling){if(u(n)){r--;if(r===0)return i}i.push(n),s(n)&&r++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function f(e,t){var n=a(e,t);return n?n.length>0?n[n.length-1].nextSibling:e.nextSibling:null}function l(e){var t=e.firstChild,n=null;if(t)do if(n)n.push(t);else if(s(t)){var r=f(t,!0);r?t=r:n=[t]}else u(t)&&(n=[t]);while(t=t.nextSibling);return n}var e=t.createComment("test").text==="<!--test-->",n=e?/^<!--\s*ko\s+(.*\:.*)\s*-->$/:/^\s*ko\s+(.*\:.*)\s*$/,r=e?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};o.virtualElements={allowedBindings:{},childNodes:function(e){return s(e)?a(e):e.childNodes},emptyNode:function(e){if(!s(e))o.utils.emptyDomNode(e);else{var t=o.virtualElements.childNodes(e);for(var n=0,r=t.length;n<r;n++)o.removeNode(t[n])}},setDomNodeChildren:function(e,t){if(!s(e))o.utils.setDomNodeChildren(e,t);else{o.virtualElements.emptyNode(e);var n=e.nextSibling;for(var r=0,i=t.length;r<i;r++)n.parentNode.insertBefore(t[r],n)}},prepend:function(e,t){s(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t,n){s(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t)},firstChild:function(e){return s(e)?!e.nextSibling||u(e.nextSibling)?null:e.nextSibling:e.firstChild},nextSibling:function(e){return s(e)&&(e=f(e)),e.nextSibling&&u(e.nextSibling)?null:e.nextSibling},virtualNodeBindingValue:function(e){var t=s(e);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(!i[o.utils.tagNameLower(e)])return;var t=e.firstChild;if(t)do if(t.nodeType===1){var n=l(t);if(n){var r=t.nextSibling;for(var s=0;s<n.length;s++)r?e.insertBefore(n[s],r):e.appendChild(n[s])}}while(t=t.nextSibling)}}}(),o.exportSymbol("virtualElements",o.virtualElements),o.exportSymbol("virtualElements.allowedBindings",o.virtualElements.allowedBindings),o.exportSymbol("virtualElements.emptyNode",o.virtualElements.emptyNode),o.exportSymbol("virtualElements.insertAfter",o.virtualElements.insertAfter),o.exportSymbol("virtualElements.prepend",o.virtualElements.prepend),o.exportSymbol("virtualElements.setDomNodeChildren",o.virtualElements.setDomNodeChildren),function(){function t(e,t,r){var i=t+"_"+e;return r[i]||(r[i]=n(e,t))}function n(e,t){var n=" { "+o.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(e)+" } ";return o.utils.buildEvalWithinScopeFunction(n,t)}var e="data-bind";o.bindingProvider=function(){this.bindingCache={}},o.utils.extend(o.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(e)!=null;case 8:return o.virtualElements.virtualNodeBindingValue(t)!=null;default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t):null},getBindingsString:function(t,n){switch(t.nodeType){case 1:return t.getAttribute(e);case 8:return o.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(e,n){try{var r=n.$data,i=typeof r=="object"&&r!=null?[r,n]:[n],s=t(e,i.length,this.bindingCache);return s(i)}catch(o){throw new Error("Unable to parse bindings.\nMessage: "+o+";\nBindings value: "+e)}}}),o.bindingProvider.instance=new o.bindingProvider}(),o.exportSymbol("bindingProvider",o.bindingProvider),function(){function t(e){var t=o.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function n(e,t,n){var r,s=o.virtualElements.firstChild(t);while(r=s)s=o.virtualElements.nextSibling(r),i(e,r,n)}function i(e,t,r){var i=!0,u=t.nodeType===1;u&&o.virtualElements.normaliseVirtualElementDomStructure(t);var a=u&&r||o.bindingProvider.instance.nodeHasBindings(t);a&&(i=s(t,null,e,r).shouldBindDescendants),i&&n(e,t,!u)}function s(e,n,i,s){function f(e){return function(){return a[e]}}function l(){return a}var u=0,a,c;return o.dependentObservable(function(){var h=i&&i instanceof o.bindingContext?i:new o.bindingContext(o.utils.unwrapObservable(i)),p=h.$data;s&&o.storedBindingContextForNode(e,h);var d=typeof n=="function"?n():n;a=d||o.bindingProvider.instance.getBindings(e,h);if(a){if(u===0){u=1;for(var v in a){var m=o.bindingHandlers[v];m&&e.nodeType===8&&t(v);if(m&&typeof m["init"]=="function"){var g=m.init,y=g(e,f(v),l,p,h);if(y&&y.controlsDescendantBindings){if(c!==r)throw new Error("Multiple bindings ("+c+" and "+v+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");c=v}}}u=2}if(u===2)for(var v in a){var m=o.bindingHandlers[v];if(m&&typeof m["update"]=="function"){var b=m.update;b(e,f(v),l,p,h)}}}},null,{disposeWhenNodeIsRemoved:e}),{shouldBindDescendants:c===r}}o.bindingHandlers={},o.bindingContext=function(e,t){t?(o.utils.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e),this.$data=e},o.bindingContext.prototype.createChildContext=function(e){return new o.bindingContext(e,this)},o.bindingContext.prototype.extend=function(e){var t=o.utils.extend(new o.bindingContext,this);return o.utils.extend(t,e)};var u="__ko_bindingContext__";o.storedBindingContextForNode=function(e,t){if(arguments.length!=2)return o.utils.domData.get(e,u);o.utils.domData.set(e,u,t)},o.applyBindingsToNode=function(e,t,n){return e.nodeType===1&&o.virtualElements.normaliseVirtualElementDomStructure(e),s(e,t,n,!0)},o.applyBindingsToDescendants=function(e,t){(t.nodeType===1||t.nodeType===8)&&n(e,t,!0)},o.applyBindings=function(t,n){if(n&&n.nodeType!==1&&n.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||e.document.body,i(t,n,!0)},o.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=o.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return o.contextFor(e.parentNode)}return r},o.dataFor=function(e){var t=o.contextFor(e);return t?t.$data:r},o.exportSymbol("bindingHandlers",o.bindingHandlers),o.exportSymbol("applyBindings",o.applyBindings),o.exportSymbol("applyBindingsToDescendants",o.applyBindingsToDescendants),o.exportSymbol("applyBindingsToNode",o.applyBindingsToNode),o.exportSymbol("contextFor",o.contextFor),o.exportSymbol("dataFor",o.dataFor)}();var h=["click"];o.utils.arrayForEach(h,function(e){o.bindingHandlers[e]={init:function(t,n,r,i){var s=function(){var t={};return t[e]=n(),t};return o.bindingHandlers.event.init.call(this,t,s,r,i)}}}),o.bindingHandlers.event={init:function(e,t,n,r){var i=t()||{};for(var s in i)(function(){var i=s;typeof i=="string"&&o.utils.registerEventHandler(e,i,function(e){var s
,u=t()[i];if(!u)return;var a=n();try{var f=o.utils.makeArray(arguments);f.unshift(r),s=u.apply(r,f)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=a[i+"Bubble"]!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())})})()}},o.bindingHandlers.submit={init:function(e,t,n,r){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");o.utils.registerEventHandler(e,"submit",function(n){var i,s=t();try{i=s.call(r,e)}finally{i!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},o.bindingHandlers.visible={update:function(e,t){var n=o.utils.unwrapObservable(t()),r=e.style.display!="none";n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},o.bindingHandlers.enable={update:function(e,t){var n=o.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):!n&&!e.disabled&&(e.disabled=!0)}},o.bindingHandlers.disable={update:function(e,t){o.bindingHandlers.enable.update(e,function(){return!o.utils.unwrapObservable(t())})}},o.bindingHandlers.value={init:function(e,t,n){var r=["change"],i=n().valueUpdate;i&&(typeof i=="string"&&(i=[i]),o.utils.arrayPushAll(r,i),r=o.utils.arrayGetDistinctValues(r));var s=function(){var r=t(),i=o.selectExtensions.readValue(e);o.jsonExpressionRewriting.writeValueToProperty(r,n,"value",i,!0)},u=o.utils.ieVersion&&e.tagName.toLowerCase()=="input"&&e.type=="text"&&e.autocomplete!="off"&&(!e.form||e.form.autocomplete!="off");if(u&&o.utils.arrayIndexOf(r,"propertychange")==-1){var a=!1;o.utils.registerEventHandler(e,"propertychange",function(){a=!0}),o.utils.registerEventHandler(e,"blur",function(){a&&(a=!1,s())})}o.utils.arrayForEach(r,function(t){var n=s;o.utils.stringStartsWith(t,"after")&&(n=function(){setTimeout(s,0)},t=t.substring("after".length)),o.utils.registerEventHandler(e,t,n)})},update:function(e,t){var n=o.utils.tagNameLower(e)==="select",r=o.utils.unwrapObservable(t()),i=o.selectExtensions.readValue(e),s=r!=i;r===0&&i!==0&&i!=="0"&&(s=!0);if(s){var u=function(){o.selectExtensions.writeValue(e,r)};u();var a=n;a&&setTimeout(u,0)}n&&e.length>0&&p(e,r,!1)}},o.bindingHandlers.options={update:function(e,n,i){if(o.utils.tagNameLower(e)!=="select")throw new Error("options binding applies only to SELECT elements");var s=e.length==0,u=o.utils.arrayMap(o.utils.arrayFilter(e.childNodes,function(e){return e.tagName&&o.utils.tagNameLower(e)==="option"&&e.selected}),function(e){return o.selectExtensions.readValue(e)||e.innerText||e.textContent}),a=e.scrollTop,f=o.utils.unwrapObservable(n()),l=e.value;while(e.length>0)o.cleanNode(e.options[0]),e.remove(0);if(f){var c=i();typeof f.length!="number"&&(f=[f]);if(c.optionsCaption){var h=t.createElement("option");o.utils.setHtml(h,c.optionsCaption),o.selectExtensions.writeValue(h,r),e.appendChild(h)}for(var d=0,v=f.length;d<v;d++){var h=t.createElement("option"),m=typeof c["optionsValue"]=="string"?f[d][c.optionsValue]:f[d];m=o.utils.unwrapObservable(m),o.selectExtensions.writeValue(h,m);var g=c.optionsText,y;typeof g=="function"?y=g(f[d]):typeof g=="string"?y=f[d][g]:y=m;if(y===null||y===r)y="";o.utils.setTextContent(h,y),e.appendChild(h)}var b=e.getElementsByTagName("option"),w=0;for(var d=0,v=b.length;d<v;d++)o.utils.arrayIndexOf(u,o.selectExtensions.readValue(b[d]))>=0&&(o.utils.setOptionNodeSelectionState(b[d],!0),w++);e.scrollTop=a,s&&"value"in c&&p(e,o.utils.unwrapObservable(c.value),!0),o.utils.ensureSelectElementIsRenderedCorrectly(e)}}},o.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__",o.bindingHandlers.selectedOptions={getSelectedValuesFromSelectNode:function(e){var t=[],n=e.childNodes;for(var r=0,i=n.length;r<i;r++){var s=n[r],u=o.utils.tagNameLower(s);if(u=="option"&&s.selected)t.push(o.selectExtensions.readValue(s));else if(u=="optgroup"){var a=o.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(s);Array.prototype.splice.apply(t,[t.length,0].concat(a))}}return t},init:function(e,t,n){o.utils.registerEventHandler(e,"change",function(){var e=t(),r=o.bindingHandlers.selectedOptions.getSelectedValuesFromSelectNode(this);o.jsonExpressionRewriting.writeValueToProperty(e,n,"value",r)})},update:function(e,t){if(o.utils.tagNameLower(e)!="select")throw new Error("values binding applies only to SELECT elements");var n=o.utils.unwrapObservable(t());if(n&&typeof n.length=="number"){var r=e.childNodes;for(var i=0,s=r.length;i<s;i++){var u=r[i];o.utils.tagNameLower(u)==="option"&&o.utils.setOptionNodeSelectionState(u,o.utils.arrayIndexOf(n,o.selectExtensions.readValue(u))>=0)}}}},o.bindingHandlers.text={update:function(e,t){o.utils.setTextContent(e,t())}},o.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){var n=o.utils.unwrapObservable(t());o.utils.setHtml(e,n)}},o.bindingHandlers.css={update:function(e,t){var n=o.utils.unwrapObservable(t()||{});for(var r in n)if(typeof r=="string"){var i=o.utils.unwrapObservable(n[r]);o.utils.toggleDomNodeCssClass(e,r,i)}}},o.bindingHandlers.style={update:function(e,t){var n=o.utils.unwrapObservable(t()||{});for(var r in n)if(typeof r=="string"){var i=o.utils.unwrapObservable(n[r]);e.style[r]=i||""}}},o.bindingHandlers.uniqueName={init:function(e,n){n()&&(e.name="ko_unique_"+ ++o.bindingHandlers.uniqueName.currentIndex,(o.utils.isIe6||o.utils.isIe7)&&e.mergeAttributes(t.createElement("<input name='"+e.name+"'/>"),!1))}},o.bindingHandlers.uniqueName.currentIndex=0,o.bindingHandlers.checked={init:function(e,t,n){var r=function(){var r;if(e.type=="checkbox")r=e.checked;else{if(e.type!="radio"||!e.checked)return;r=e.value}var i=t();if(e.type=="checkbox"&&o.utils.unwrapObservable(i)instanceof Array){var s=o.utils.arrayIndexOf(o.utils.unwrapObservable(i),e.value);e.checked&&s<0?i.push(e.value):!e.checked&&s>=0&&i.splice(s,1)}else o.jsonExpressionRewriting.writeValueToProperty(i,n,"checked",r,!0)};o.utils.registerEventHandler(e,"click",r),e.type=="radio"&&!e.name&&o.bindingHandlers.uniqueName.init(e,function(){return!0})},update:function(e,t){var n=o.utils.unwrapObservable(t());e.type=="checkbox"?n instanceof Array?e.checked=o.utils.arrayIndexOf(n,e.value)>=0:e.checked=n:e.type=="radio"&&(e.checked=e.value==n)}};var d={"class":"className","for":"htmlFor"};o.bindingHandlers.attr={update:function(e,t,n){var i=o.utils.unwrapObservable(t())||{};for(var s in i)if(typeof s=="string"){var u=o.utils.unwrapObservable(i[s]),a=u===!1||u===null||u===r;a&&e.removeAttribute(s),o.utils.ieVersion<=8&&s in d?(s=d[s],a?e.removeAttribute(s):e[s]=u):a||e.setAttribute(s,u.toString())}}},o.bindingHandlers.hasfocus={init:function(e,t,n){var r=function(e){var r=t();o.jsonExpressionRewriting.writeValueToProperty(r,n,"hasfocus",e,!0)};o.utils.registerEventHandler(e,"focus",function(){r(!0)}),o.utils.registerEventHandler(e,"focusin",function(){r(!0)}),o.utils.registerEventHandler(e,"blur",function(){r(!1)}),o.utils.registerEventHandler(e,"focusout",function(){r(!1)})},update:function(e,t){var n=o.utils.unwrapObservable(t());n?e.focus():e.blur(),o.utils.triggerEvent(e,n?"focusin":"focusout")}},o.bindingHandlers["with"]={makeTemplateValueAccessor:function(e){return function(){var t=e();return{"if":t,data:t,templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers["with"].makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers["with"].makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators["with"]=!1,o.virtualElements.allowedBindings["with"]=!0,o.bindingHandlers["if"]={makeTemplateValueAccessor:function(e){return function(){return{"if":e(),templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers["if"].makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers["if"].makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators["if"]=!1,o.virtualElements.allowedBindings["if"]=!0,o.bindingHandlers.ifnot={makeTemplateValueAccessor:function(e){return function(){return{ifnot:e(),templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers.ifnot.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers.ifnot.makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators.ifnot=!1,o.virtualElements.allowedBindings.ifnot=!0,o.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=o.utils.unwrapObservable(e());return!t||typeof t.length=="number"?{foreach:t,templateEngine:o.nativeTemplateEngine.instance}:{foreach:t.data,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,templateEngine:o.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return o.bindingHandlers.template.init(e,o.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return o.bindingHandlers.template.update(e,o.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,i)}},o.jsonExpressionRewriting.bindingRewriteValidators.foreach=!1,o.virtualElements.allowedBindings.foreach=!0,o.templateEngine=function(){},o.templateEngine.prototype.renderTemplateSource=function(e,t,n){throw new Error("Override renderTemplateSource")},o.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},o.templateEngine.prototype.makeTemplateSource=function(e,n){if(typeof e=="string"){n=n||t;var r=n.getElementById(e);if(!r)throw new Error("Cannot find template with ID "+e);return new o.templateSources.domElement(r)}if(e.nodeType==1||e.nodeType==8)return new o.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},o.templateEngine.prototype.renderTemplate=function(e,t,n,r){var i=this.makeTemplateSource(e,r);return this.renderTemplateSource(i,t,n)},o.templateEngine.prototype.isTemplateRewritten=function(e,n){if(this.allowTemplateRewriting===!1)return!0;var r=n&&n!=t;return!r&&this.knownRewrittenTemplates&&this.knownRewrittenTemplates[e]?!0:this.makeTemplateSource(e,n).data("isRewritten")},o.templateEngine.prototype.rewriteTemplate=function(e,n,r){var i=this.makeTemplateSource(e,r),s=n(i.text());i.text(s),i.data("isRewritten",!0);var o=r&&r!=t;!o&&typeof e=="string"&&(this.knownRewrittenTemplates=this.knownRewrittenTemplates||{},this.knownRewrittenTemplates[e]=!0)},o.exportSymbol("templateEngine",o.templateEngine),o.templateRewriting=function(){function n(e){var t=o.jsonExpressionRewriting.bindingRewriteValidators;for(var n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var i=t[r];if(typeof i=="function"){var s=i(e[n].value);if(s)throw new Error(s)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function r(e,t,r){var i=o.jsonExpressionRewriting.parseObjectLiteral(e);n(i);var s=o.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(i),u="ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {             return (function() { return { "+s+" } })()         })";return r.createJavaScriptEvaluatorBlock(u)+t}var e=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,t=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return o.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(n,i){return n.replace(e,function(){return r(arguments[6],arguments[1],i)}).replace(t,function(){return r(arguments[1],"<!-- ko -->",i)})},applyMemoizedBindingsToNextSibling:function(e){return o.memoization.memoize(function(t,n){t.nextSibling&&o.applyBindingsToNode(t.nextSibling,e,n)})}}}(),o.exportSymbol("templateRewriting",o.templateRewriting),o.exportSymbol("templateRewriting.applyMemoizedBindingsToNextSibling",o.templateRewriting.applyMemoizedBindingsToNextSibling),function(){o.templateSources={},o.templateSources.domElement=function(e){this.domElement=e},o.templateSources.domElement.prototype.text=function(){var e=o.utils.tagNameLower(this.domElement),t=e==="script"?"text":e==="textarea"?"value":"innerHTML";if(arguments.length==0)return this.domElement[t];var n=arguments[0];t==="innerHTML"?o.utils.setHtml(this.domElement,n):this.domElement[t]=n},o.templateSources.domElement.prototype.data=function(e){if(arguments.length===1)return o.utils.domData.get(this.domElement,"templateSourceData_"+e);o.utils.domData.set(this.domElement,"templateSourceData_"+e,arguments[1])};var e="__ko_anon_template__";o.templateSources.anonymousTemplate=function(e){this.domElement=e},o.templateSources.anonymousTemplate.prototype=new o.templateSources.domElement,o.templateSources.anonymousTemplate.prototype.text=function(){if(arguments.length==0){var t=o.utils.domData.get(this.domElement,e)||{};return t.textData===r&&t.containerData&&(t.textData=t.containerData.innerHTML),t.textData}var n=arguments[0];o.utils.domData.set(this.domElement,e,{textData:n})},o.templateSources.domElement.prototype.nodes=function(){if(arguments.length==0){var t=o.utils.domData.get(this.domElement,e)||{};return t.containerData}var n=arguments[0];o.utils.domData.set(this.domElement,e,{containerData:n})},o.exportSymbol("templateSources",o.templateSources),o.exportSymbol("templateSources.domElement",o.templateSources.domElement),o.exportSymbol("templateSources.anonymousTemplate",o.templateSources.anonymousTemplate)}(),function(){function t(e,t,n){var r,i=e,s=o.virtualElements.nextSibling(t);while(i&&(r=i)!==s)i=o.virtualElements.nextSibling(r),(r.nodeType===1||r.nodeType===8)&&n(r)}function n(e,n){if(e.length){var r=e[0],i=e[e.length-1];t(r,i,function(e){o.applyBindings(n,e)}),t(r,i,function(e){o.memoization.unmemoizeDomNodeAndDescendants(e,[n])})}}function i(e){return e.nodeType?e:e.length>0?e[0]:null}function s(t,r,s,u,a){a=a||{};var f=t&&i(t),l=f&&f.ownerDocument,c=a.templateEngine||e;o.templateRewriting.ensureTemplateIsRewritten(s,c,l);var h=c.renderTemplate(s,u,a,l);if(typeof h.length!="number"||h.length>0&&typeof h[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(r){case"replaceChildren":o.virtualElements.setDomNodeChildren(t,h),p=!0;break;case"replaceNode":o.utils.replaceDomNodes(t,h),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+r)}return p&&(n(h,u),a.afterRender&&a.afterRender(h,u.$data)),h}function a(e,t){var n=o.utils.domData.get(e,u);n&&typeof n.dispose=="function"&&n.dispose(),o.utils.domData.set(e,u,t)}var e;o.setTemplateEngine=function(t){if(!(t==r||t instanceof o.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");e=t},o.renderTemplate=function(t,n,u,a,f){u=u||{};if((u["templateEngine"]||e)==r)throw new Error("Set a template engine before calling renderTemplate");f=f||"replaceChildren";if(a){var l=i(a),c=function(){return!l||!o.utils.domNodeIsAttachedToDocument(l)},h=l&&f=="replaceNode"?l.parentNode:l;return o.dependentObservable(function(){var e=n&&n instanceof o.bindingContext?n:new o.bindingContext(o.utils.unwrapObservable(n)),r=typeof t=="function"?t(e.$data):t,c=s(a,f,r,e,u);f=="replaceNode"&&(a=c,l=i(a))},null,{disposeWhen:c,disposeWhenNodeIsRemoved:h})}return o.memoization.memoize(function(e){o.renderTemplate(t,n,u,e,"replaceNode")})},o.renderTemplateForEach=function(e,t,i,u,a){var f,l=function(t,n){var r=typeof e=="function"?e(t):e;return f=a.createChildContext(o.utils.unwrapObservable(t)),f.$index=n,s(null,"ignoreTargetNode",r,f,i)},c=function(e,t,r){n(t,f),i.afterRender&&i.afterRender(t,e)};return o.dependentObservable(function(){var e=o.utils.unwrapObservable(t)||[];typeof e.length=="undefined"&&(e=[e]);var n=o.utils.arrayFilter(e,function(e){return i.includeDestroyed||e===r||e===null||!o.utils.unwrapObservable(e._destroy)});o.utils.setDomNodeChildrenFromArrayMapping(u,n,l,i,c)},null,{disposeWhenNodeIsRemoved:u})};var u="__ko__templateSubscriptionDomDataKey__";o.bindingHandlers.template={init:function(e,t){var n=o.utils.unwrapObservable(t());if(typeof n!="string"&&!n.name&&(e.nodeType==1||e.nodeType==8)){var r=e.nodeType==1?e.childNodes:o.virtualElements.childNodes(e),i=o.utils.moveCleanedNodesToContainerElement(r);(new o.templateSources.anonymousTemplate(e)).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var s=o.utils.unwrapObservable(t()),u,f=!0;typeof s=="string"?u=s:(u=s.name,"if"in s&&(f=f&&o.utils.unwrapObservable(s["if"])),"ifnot"in s&&(f=f&&!o.utils.unwrapObservable(s.ifnot)));var l=null;if(typeof s=="object"&&"foreach"in s){var c=f&&s.foreach||[];l=o.renderTemplateForEach(u||e,c,s,e,i)}else if(f){var h=typeof s=="object"&&"data"in s?i.createChildContext(o.utils.unwrapObservable(s.data)):i;l=o.renderTemplate(u||e,h,s,e)}else o.virtualElements.emptyNode(e);a(e,l)}},o.jsonExpressionRewriting.bindingRewriteValidators.template=function(e){var t=o.jsonExpressionRewriting.parseObjectLiteral(e);return t.length==1&&t[0].unknown?null:o.jsonExpressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.virtualElements.allowedBindings.template=!0}(),o.exportSymbol("setTemplateEngine",o.setTemplateEngine),o.exportSymbol("renderTemplate",o.renderTemplate),function(){function e(e,t,n){var i=[];for(var s=0;s<=t.length;s++)i[s]=[];for(var s=0,o=Math.min(e.length,n);s<=o;s++)i[0][s]=s;for(var s=1,o=Math.min(t.length,n);s<=o;s++)i[s][0]=s;var u,a=e.length,f,l=t.length,c,h;for(u=1;u<=a;u++){var p=Math.max(1,u-n),d=Math.min(l,u+n);for(f=p;f<=d;f++)if(e[u-1]===t[f-1])i[f][u]=i[f-1][u-1];else{var v=i[f-1][u]===r?Number.MAX_VALUE:i[f-1][u]+1,m=i[f][u-1]===r?Number.MAX_VALUE:i[f][u-1]+1;i[f][u]=Math.min(v,m)}}return i}function t(e,t,n){var i=t.length,s=n.length,o=[],u=e[s][i];if(u===r)return null;while(i>0||s>0){var a=e[s][i],f=s>0?e[s-1][i]:u+1,l=i>0?e[s][i-1]:u+1,c=s>0&&i>0?e[s-1][i-1]:u+1;if(f===r||f<a-1)f=u+1;if(l===r||l<a-1)l=u+1;c<a-1&&(c=u+1),f<=l&&f<c?(o.push({status:"added",value:n[s-1]}),s--):l<f&&l<c?(o.push({status:"deleted",value:t[i-1]}),i--):(o.push({status:"retained",value:t[i-1]}),s--,i--)}return o.reverse()}o.utils.compareArrays=function(n,i,s){if(s===r)return o.utils.compareArrays(n,i,1)||o.utils.compareArrays(n,i,10)||o.utils.compareArrays(n,i,Number.MAX_VALUE);n=n||[],i=i||[];var u=e(n,i,s);return t(u,n,i)}}(),o.exportSymbol("utils.compareArrays",o.utils.compareArrays),function(){function e(e){if(e.length>2){var t=e[0],n=e[e.length-1],r=[t];while(t!==n){t=t.nextSibling;if(!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}}function t(t,n,r,i,s){var u=[],a=o.dependentObservable(function(){var t=n(r,s)||[];u.length>0&&(e(u),o.utils.replaceDomNodes(u,t),i&&i(r,t)),u.splice(0,u.length),o.utils.arrayPushAll(u,t)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return u.length==0||!o.utils.domNodeIsAttachedToDocument(u[0])}});return{mappedNodes:u,dependentObservable:a}}var n="setDomNodeChildrenFromArrayMapping_lastMappingResult";o.utils.setDomNodeChildrenFromArrayMapping=function(i,s,u,a,f){s=s||[],a=a||{};var l=o.utils.domData.get(i,n)===r,c=o.utils.domData.get(i,n)||[],h=o.utils.arrayMap(c,function(e){return e.arrayEntry}),p=o.utils.compareArrays(h,s),d=[],v=0,m=[],g=0,y=[],b=null;for(var w=0,E=p.length;w<E;w++)switch(p[w].status){case"retained":var S=c[v];S.indexObservable(g),g=d.push(S),S.domNodes.length>0&&(b=S.domNodes[S.domNodes.length-1]),v++;break;case"deleted":c[v].dependentObservable.dispose(),e(c[v].domNodes),o.utils.arrayForEach(c[v].domNodes,function(e){m.push({element:e,index:w,value:p[w].value}),b=e}),v++;break;case"added":var x=p[w].value,T=o.observable(g),N=t(i,u,x,f,T),C=N.mappedNodes;g=d.push({arrayEntry:p[w].value,domNodes:C,dependentObservable:N.dependentObservable,indexObservable:T});for(var k=0,L=C.length;k<L;k++){var A=C[k];y.push({element:A,index:w,value:p[w].value}),b==null?o.virtualElements.prepend(i,A):o.virtualElements.insertAfter(i,A,b),b=A}f&&f(x,C,T)}o.utils.arrayForEach(m,function(e){o.cleanNode(e.element)});var O=!1;if(!l){if(a.afterAdd)for(var w=0;w<y.length;w++)a.afterAdd(y[w].element,y[w].index,y[w].value);if(a.beforeRemove){for(var w=0;w<m.length;w++)a.beforeRemove(m[w].element,m[w].index,m[w].value);O=!0}}if(!O&&m.length){var M=m[0].element.parentNode;if(M)for(var w=0;w<m.length;w++)M.removeChild(m[w].element)}o.utils.domData.set(i,n,d)}}(),o.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",o.utils.setDomNodeChildrenFromArrayMapping),o.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},o.nativeTemplateEngine.prototype=new o.templateEngine,o.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n){var r=!(o.utils.ieVersion<9),i=r?e.nodes:null,s=i?e.nodes():null;if(s)return o.utils.makeArray(s.cloneNode(!0).childNodes);var u=e.text();return o.utils.parseHtmlFragment(u)},o.nativeTemplateEngine.instance=new o.nativeTemplateEngine,o.setTemplateEngine(o.nativeTemplateEngine.instance),o.exportSymbol("nativeTemplateEngine",o.nativeTemplateEngine),function(){o.jqueryTmplTemplateEngine=function(){function n(){if(e<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function r(e,t,n){return jQuery.tmpl(e,t,n)}var e=this.jQueryTmplVersion=function(){if(typeof jQuery=="undefined"||!jQuery.tmpl)return 0;try{if(jQuery.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(e,i,s){s=s||{},n();var o=e.data("precompiled");if(!o){var u=e.text()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}",o=jQuery.template(null,u),e.data("precompiled",o)}var a=[i.$data],f=jQuery.extend({koBindingContext:i},s.templateOptions),l=r(o,a,f);return l.appendTo(t.createElement("div")),jQuery.fragments={},l},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,n){t.write("<script type='text/html' id='"+e+"'>"+n+"</script>")},e>0&&(jQuery.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQuery.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.jqueryTmplTemplateEngine.prototype=new o.templateEngine;var e=new o.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&o.setTemplateEngine(e),o.exportSymbol("jqueryTmplTemplateEngine",o.jqueryTmplTemplateEngine)}()})})(window,document,navigator);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/knockout-custom.js */

// ############################################
// #     knockoutjs observable extensions     #
// ############################################
ko.observableArray.fn.indexed=function(){return this.subscribe(function(e){if(e){var t;for(var n=0,r=e.length;n<r;n++)t=e[n],ko.isObservable(t.$index)||(t.$index=ko.observable()),t.$index(n)}}),this.valueHasMutated(),this};

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/jquery-easing-1.3.js */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright ÃÂ© 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
*/// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/jquery.sortable.js */

/*
 * HTML5 Sortable jQuery Plugin
 * http://farhadi.ir/projects/html5sortable
 * 
 * Copyright 2012, Ali Farhadi
 * Released under the MIT license.
 */(function(e){var t,n=e();e.fn.sortable=function(r){var i=String(r);return r=e.extend({connectWith:!1},r),this.each(function(){if(/^enable|disable|destroy$/.test(i)){var s=e(this).children(e(this).data("items")).attr("draggable",i=="enable");i=="destroy"&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}var o,u,s=e(this).children(r.items),a=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');s.find(r.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1}),e(this).data("items",r.items),n=n.add(a),r.connectWith&&e(r.connectWith).add(this).data("connectWith",r.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(n){if(r.handle&&!o)return!1;o=!1;var i=n.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),u=(t=e(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){if(!t)return;t.removeClass("sortable-dragging").show(),n.detach(),u!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,a]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return!s.is(t)&&r.connectWith!==e(t).parent().data("connectWith")?!0:i.type=="drop"?(i.stopPropagation(),n.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(r.forcePlaceholderSize&&a.height(t.outerHeight()),t.hide(),e(this)[a.index()<e(this).index()?"after":"before"](a),n.not(a).detach()):!n.is(this)&&!e(this).children(r.items).length&&(n.detach(),e(this).append(a)),!1)})})}})(jQuery);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/jquery-twodal-0.1.js */

/**
 * jquery-twodal plugin v0.1
 * Copyright (C) 2010-2012 BerlinOnline Stadtportal GmbH & Co. Kg.
 * Thorsten Schmitt-Rink - thorsten.schmitt-rink@berlinonline.de
 *
 * This plugin is a wrapper around twitter-bootstrap modal plugin.
 * It extends bootstrap's modal behaviour to support event registration
 * by using a data-attribute named "data-twodal-event" that can by applied to dialog (.btn)buttons.
 * You can than pass in callbacks for those events when initializing a twodal-dialog.
 * Example:
 * Html       - <div id="foodialog" class="modal">...<a data-twodal-event="registerclicked" class=".btn">register</a>..</div>
 * Javascript - var el = $('#foodialog').twodal({
 *     events: {
 *         registerclicked: function() {
               var promptVal = el.twodal('promptVal', '.foo-input')
 *             console.log("yay I can haz clicks!", promptVal);
 *         }
 *     },
 * });
 *
 * Besides the "events" option use in the above example,
 * jquery-twodal also supports all of the standard bootstrap modal options(show, keyboard, backdrop).
 */(function(e){var t="data-twodal-event",n=".btn",r={show:!0,backdrop:!0,keyboard:!0,events:{}},i={init:function(i){return i=e.merge(i||{},r),this.find(n).each(function(n,r){r=e(r);var s=r.attr(t);s&&r.click(function(e){e.preventDefault();var t=i.events;"function"==typeof t[s]&&t[s]()})}),this.modal({show:i.show,backdrop:i.backdrop,keyboard:i.keyboard}),this},promptVal:function(e){return 2===arguments.length?(this.find(e).val(arguments[1]),this):this.find(e).val()},show:function(){return this.modal("show"),this},hide:function(){return this.modal("hide"),this}};e.fn.twodal=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof t||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.twodal")}})(jQuery),function(e){jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.createTextRange){var e=this.createTextRange();e.moveStart("character",this.value.length),e.collapse(),e.select()}else{this.focus();var t=this.value.length;this.setSelectionRange(t,t)}})}}(jQuery);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/ichie.min.js */

(function(e,t,n){var r=e.Kinetic,i=function(){this.options=null,this.clipboard=null,this.main_display=null,this.preview_display=null,this.working_canvas=null,this.command_queue=null};i.prototype={init:function(e){this.options=t.extend({},i.DEFAULT_OPTIONS,e||{});var n=this;this.options.preview_display&&(this.preview_display=new m),this.main_display=new v,this.preview_display&&this.preview_display.init({container:this.options.preview_container,onViewportChanged:n.main_display.onViewportChanged.bind(n.main_display)}),this.main_display.init({container:this.options.main_container,width:this.options.width,height:this.options.height,onViewportChanged:this.preview_display?this.preview_display.onViewPortChanged.bind(this.preview_display):function(){},onSelectionChanged:this.options.onSelectionChanged}),this.working_canvas=document.createElement("canvas"),this.command_queue=new s,this.command_queue.init()},onImageProcessed:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=this.working_canvas.getContext("2d"),i=this.working_canvas.width!==t||this.working_canvas.height!==n;i&&(this.working_canvas.width=t,this.working_canvas.height=n),r.drawImage(e,0,0),this.preview_display&&this.preview_display.setImage(e,i),this.main_display.setImage(e,i)},launch:function(e,t){var n=this,r=new Image;r.onload=function(){n.onImageProcessed(r),t()},r.src=e},showSelection:function(){this.main_display.showSelection()},hideSelection:function(){this.main_display.hideSelection()},setSelection:function(e){this.main_display.setSelection(e)},setSelectMode:function(e){this.main_display.setSelectMode(e)},copySelection:function(){var e=this.main_display.getCurrentSelection();this.clipboard=this.working_canvas.getContext("2d").getImageData(e.left,e.top,e.right-e.left,e.bottom-e.top)},downloadAsImage:function(){var e=this.working_canvas.toDataURL("image/png");e=e.replace("image/png","image/octet-stream"),document.location.href=e},getStage:function(){return this.main_display.getStage()},getLayer:function(){return this.main_display.getLayer()},getImage:function(){return this.main_display.getImage()},pasteClipboard:function(){if(!this.clipboard)return;var e=new a,t=this.main_display.getCurrentSelection(),n=this;e.init(this.working_canvas,{data:this.clipboard,coords:{x:t.left,y:t.top},onexecuted:this.onImageProcessed.bind(this)}),this.command_queue.execute(e),this.clipboard=null},filter:function(e,t){var n=new o,r=this;n.init(this.working_canvas,{filter:e,bounds:this.main_display.getCurrentSelection(),onexecuted:this.onImageProcessed.bind(this)}),this.command_queue.execute(n)},crop:function(){var e=new u,t=this;e.init(this.working_canvas,{bounds:this.main_display.getCurrentSelection(),onexecuted:t.onImageProcessed.bind(this)}),this.command_queue.execute(e)},resize:function(e,t){var n=new f,r=this;n.init(this.working_canvas,{width:e,height:t,bounds:this.main_display.getCurrentSelection(),onexecuted:r.onImageProcessed.bind(this)}),this.command_queue.execute(n)},undo:function(){this.command_queue.undo()},redo:function(){this.command_queue.redo()}},i.DEFAULT_OPTIONS={width:500,height:300,onSelectionChanged:function(){}};var s=function(){this.commands=null,this.cursor=null};s.prototype={init:function(){this.commands=[],this.cursor=-1},execute:function(e){e.execute(),this.cursor!==this.commands.length&&(this.commands=[]),this.commands.push(e),this.cursor=this.commands.length},redo:function(){this.valid()&&(this.commands[this.cursor].execute(),this.cursor++)},undo:function(){this.mayUndo()&&(this.cursor--,this.commands[this.cursor].revert())},mayUndo:function(){return!!this.commands[this.cursor-1]},valid:function(){return!!this.commands[this.cursor]}};var o=function(){this.canvas=null,this.ctx=null,this.original_data=null};o.prototype={init:function(e,n){this.options=t.extend({},o.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){var e=this.options.bounds.left,t=this.options.bounds.top,n=this.options.bounds.right-this.options.bounds.left,r=this.options.bounds.bottom-this.options.bounds.top,i=this.ctx.getImageData(e,t,n,r);this.original_data=this.ctx.getImageData(e,t,n,r);var s=g[this.options.filter](i);this.ctx.putImageData(s,e,t),this.onExecuted(this.canvas)},revert:function(){this.ctx.putImageData(this.original_data,this.options.bounds.left,this.options.bounds.top),this.onExecuted(this.canvas)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},o.DEFAULT_OPTIONS={onexecuted:function(){}};var u=function(){this.canvas=null,this.ctx=null,this.original_data=null};u.prototype={init:function(e,n){this.options=t.extend({},u.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){this.original_data=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);var e=this.options.bounds.left,t=this.options.bounds.top,n=this.options.bounds.right-this.options.bounds.left,r=this.options.bounds.bottom-this.options.bounds.top,i=this.ctx.getImageData(e,t,n,r),s=document.createElement("canvas");s.width=n,s.height=r;var o=s.getContext("2d");o.putImageData(i,0,0),this.onExecuted(s)},revert:function(){var e=document.createElement("canvas");e.width=this.original_data.width,e.height=this.original_data.height;var t=e.getContext("2d");t.putImageData(this.original_data,0,0),this.onExecuted(e)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},u.DEFAULT_OPTIONS={onexecuted:function(){}};var a=function(){this.canvas=null,this.ctx=null,this.original_data=null};a.prototype={init:function(e,n){this.options=t.extend({},a.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){var e=this.ctx.createImageData(this.options.data.width,this.options.data.height);g.Copy(this.options.data,e),this.original_data=this.ctx.getImageData(this.options.coords.x,this.options.coords.y,this.options.data.width,this.options.data.height),this.ctx.putImageData(this.options.data,this.options.coords.x,this.options.coords.y),this.options.data=e,this.onExecuted(this.canvas)},revert:function(){this.ctx.putImageData(this.original_data,this.options.coords.x,this.options.coords.y),this.onExecuted(this.canvas)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},a.DEFAULT_OPTIONS={onexecuted:function(){}};var f=function(){this.canvas=null,this.ctx=null,this.original_data=null};f.prototype={init:function(e,n){this.options=t.extend({},f.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){this.original_data=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);var e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),t=g.ResizeNearestNeighbor(e,this.options.width,this.options.height),n=document.createElement("canvas");n.width=this.options.width,n.height=this.options.height;var r=n.getContext("2d");r.putImageData(t,0,0),this.onExecuted(n)},revert:function(){var e=document.createElement("canvas");e.width=this.original_data.width,e.height=this.original_data.height;var t=e.getContext("2d");t.putImageData(this.original_data,0,0),this.onExecuted(e)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},f.DEFAULT_OPTIONS={onexecuted:function(){}};var l=function(){this.display=null,this.stage=null,this.options=null,this.ratio=null,this.shapes_group=null,this.layer=null,this.resize_handles=null,this.selection_rect=null,this.resizeInteraction=null,this.resize_overlay=null,this.drag_bounds=null};l.prototype={init:function(e,n){this.display=e,this.stage=n.stage,this.options=t.extend({},l.DEFAULT_OPTIONS,n||{}),this.selection_rect=this.createSelectionRect(),this.resize_handles=this.createResizeHandles(),this.shapes_group=this.createShapesGroup(),this.ratio=this.selection_rect.getWidth()/this.selection_rect.getHeight(),this.setDragBounds({top:0,right:this.stage.getWidth(),bottom:this.stage.getHeight(),left:0}),this.layer=new r.Layer({id:"selection-layer",visible:this.options.show||!1}),this.layer.add(this.shapes_group),this.resizeInteraction=new h,this.resizeInteraction.init(this),this.resize_overlay=new c,this.resize_overlay.init(this),this.stage.add(this.layer)},createSelectionRect:function(){return new r.Rect({id:"selection-rect",width:this.options.width,height:this.options.height,fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:this.options.stroke,x:0,y:0})},createResizeHandles:function(){var e=this,t=[],r=this.calculateResizeHandleCoordMap();return n.each(l.HANDLES,function(n){t.push(e.createResizeHandle(n,r))}),t},createResizeHandle:function(e,t){return new r.Rect({width:this.options.size,height:this.options.size,fill:this.options.fill,stroke:this.options.stroke,strokeWidth:this.options.stroke_width-1,x:t[e.x],y:t[e.y]})},calculateResizeHandleCoordMap:function(){return{north:-1*(this.options.size/2),east:this.selection_rect.getWidth()-this.options.size/2,south:this.selection_rect.getHeight()-this.options.size/2,west:-1*(this.options.size/2),center:this.selection_rect.getWidth()/2-this.options.size/2,middle:this.selection_rect.getHeight()/2-this.options.size/2}},createShapesGroup:function(){var e=new r.Group({draggable:!0,x:this.stage.getWidth()/2-this.options.width/2,y:this.stage.getHeight()/2-this.options.height/2});return e.add(this.selection_rect),n.each(this.resize_handles,function(t){e.add(t)}),e},updateDragBounds:function(){this.shapes_group.setDragBounds({top:this.drag_bounds.top,right:this.drag_bounds.right-this.selection_rect.getWidth(),bottom:this.drag_bounds.bottom-this.selection_rect.getHeight(),left:this.drag_bounds.left}),this.resize_overlay&&this.resize_overlay.update()},setDragBounds:function(e){this.drag_bounds=e,this.updateDragBounds()},correctResizeHandlePositions:function(){var e=this,t=0,r=this.calculateResizeHandleCoordMap();n.each(l.HANDLES,function(n){var i=e.resize_handles[t++];i.setX(r[n.x]),i.setY(r[n.y])})},getSelection:function(e){var t=this.selection_rect.getAbsolutePosition(),n,r;return typeof e=="object"?(n=t.x-e.x,r=t.y-e.y):(n=t.x,r=t.y),{top:r,right:n+this.selection_rect.getWidth(),bottom:r+this.selection_rect.getHeight(),left:n}},setSelection:function(e){this.selection_rect.setWidth(e.dim.width),this.selection_rect.setHeight(e.dim.height),this.shapes_group.setX(e.pos.x),this.shapes_group.setY(e.pos.y),this.correctResizeHandlePositions(),this.resize_overlay.update(),this.updateDragBounds(),this.layer.draw(),this.options.onSelectionChanged(this.getSelection(!0))},setResizeMode:function(e){this.resizeInteraction.setMode(e)},getHandles:function(e){return t.merge([],this.resize_handles)},getSelectionRect:function(){return this.selection_rect},getImageBoundry:function(){return this.drag_bounds},getLayer:function(){return this.layer},show:function(){this.layer.show(),this.resize_overlay.show(),this.layer.draw()},hide:function(){this.layer.hide(),this.resize_overlay.hide(),this.layer.draw()}},l.HANDLES=[{x:"west",y:"north"},{x:"center",y:"north"},{x:"east",y:"north"},{x:"east",y:"middle"},{x:"east",y:"south"},{x:"center",y:"south"},{x:"west",y:"south"},{x:"west",y:"middle"}],l.DEFAULT_OPTIONS={size:7,fill:"rgba(23, 23, 223, 1)",show:!1,stroke:"white",stroke_width:2,keep_ratio:!1,onSelectionChanged:function(){}};var c=function(){this.image_selection=null,this.layer=null,this.shapes=null};c.prototype={init:function(e){this.image_selection=e,this.layer=new r.Layer({alpha:.5,visible:!1});var t=this.image_selection.drag_bounds;this.shapes={north:new r.Rect({fill:"grey",x:t.left,y:t.top,width:t.right-t.left}),east:new r.Rect({fill:"grey"}),south:new r.Rect({fill:"grey",x:t.left,width:t.right-t.left}),west:new r.Rect({fill:"grey",x:t.left})},this.layer.add(this.shapes.north),this.layer.add(this.shapes.south),this.layer.add(this.shapes.east),this.layer.add(this.shapes.west),this.image_selection.stage.add(this.layer)},update:function(){var e=this.image_selection.getImageBoundry(),t=this.image_selection.getSelectionRect(),n=t.getAbsolutePosition();this.shapes.north.setWidth(e.right-e.left),this.shapes.north.setX(e.left),this.shapes.north.setY(e.top),this.shapes.north.setHeight(Math.ceil(n.y-e.top));var r=n.y+t.getHeight();this.shapes.south.setX(e.left),this.shapes.south.setY(Math.ceil(r)),this.shapes.south.setWidth(e.right-e.left),this.shapes.south.setHeight(Math.ceil(e.bottom-r)),this.shapes.west.setX(e.left),this.shapes.west.setY(n.y),this.shapes.west.setWidth(n.x-e.left),this.shapes.west.setHeight(Math.ceil(t.getHeight()));var i=n.x+t.getWidth();this.shapes.east.setX(i),this.shapes.east.setY(Math.ceil(n.y)),this.shapes.east.setWidth(e.right-i),this.shapes.east.setHeight(Math.ceil(t.getHeight())),this.layer.draw()},show:function(){this.layer.show(),this.layer.draw()},hide:function(){this.layer.hide(),this.layer.draw()}};var h=function(){this.image_selection=null,this.handles=null,this.last_mousepos=null,this.mode=null};h.prototype={init:function(e){this.image_selection=e,this.handles=this.image_selection.getHandles(),this.canvas=t(this.image_selection.getLayer().getCanvas()),this.mode=new p,this.mode.init(this),this.last_mousepos=null,this.registerHandleEvents()},registerHandleEvents:function(){var e=this,t=function(t){var n=e.handles[t],r=function(n){e.onMouseMove(n,t)},i=function(t){e.image_selection.shapes_group.setDraggable(!0),e.last_mousepos=null,window.document.removeEventListener("mousemove",r),window.document.removeEventListener("mouseup",i)};n.on("mousedown touchstart",function(t){e.image_selection.shapes_group.setDraggable(!1),e.last_mousepos={x:t.pageX,y:t.pageY},window.document.addEventListener("mousemove",r),window.document.addEventListener("mouseup",i)})};for(var n=0;n<this.handles.length;n++)t(n);var r=this.image_selection.getSelectionRect();this.image_selection.shapes_group.on("dragmove",function(){e.image_selection.setSelection({pos:r.getAbsolutePosition(),dim:{width:r.getWidth(),height:r.getHeight()}})})},onMouseMove:function(e,t){var n={x:e.pageX,y:e.pageY},r=this.image_selection.getSelectionRect(),i=r.getAbsolutePosition(),s=r.getWidth(),o=r.getHeight(),u=this.calculateEventDelta(t,n);this.image_selection.setSelection(this.mode.buildSelectGeometry(t,u)),this.last_mousepos=n},calculateEventDelta:function(e,t){var n=t.x,r=t.y,i=n-this.last_mousepos.x,s=r-this.last_mousepos.y,o=[0,6,7],u=[0,1,2];return-1!==o.indexOf(e)&&(i*=-1),-1!==u.indexOf(e)&&(s*=-1),{x:i,y:s}},getBoundry:function(){return this.image_selection.getImageBoundry()},setMode:function(e){"keep-ratio"===e?this.mode=new d:this.mode=new p,this.mode.init(this)},getImageSelection:function(){return this.image_selection}},h.DIRECTION={HORIZONTAL:"horizontal",VERTICAL:"vertical",BOTH:"both"},h.MODE={DEFAULT:"default",RATIO:"ratio"};var p=function(){this.interaction=null};p.prototype={init:function(e){this.interaction=e},buildSelectGeometry:function(e,t){return this.clipSelectionToBoundry({pos:this.calculateSelectPostion(e,t),dim:this.calculateSelectDimensions(e,t)})},calculateSelectDimensions:function(e,t){var n=this.interaction.getImageSelection(),r=n.getSelectionRect(),i=r.getWidth(),s=r.getHeight(),o=h.DIRECTION,u=this.determineResizeDirection(e,t);return i+=u===o.HORIZONTAL||u===o.BOTH?t.x:0,s+=u===o.VERTICAL||u===o.BOTH?t.y:0,{width:i,height:s}},determineResizeDirection:function(e,t){var r=h.DIRECTION,i=null,s={};return s[r.HORIZONTAL]=[3,7],s[r.VERTICAL]=[1,5],s[r.BOTH]=[0,2,4,6],n.each(s,function(t,n){-1!==t.indexOf(e)&&(i=n)}),i},calculateSelectPostion:function(e,t){var n=this.interaction.getImageSelection(),r=n.getSelectionRect(),i=r.getAbsolutePosition(),s=i.x,o=i.y,u=[0,6,7],a=[0,1,2];return s-=-1!==u.indexOf(e)?t.x:0,o-=-1!==a.indexOf(e)?t.y:0,{x:s,y:o}},clipSelectionToBoundry:function(e){var t=this.interaction.getImageSelection(),n=this.interaction.getBoundry(),r=e.pos,i=e.dim,s=t.getSelectionRect(),o=s.getAbsolutePosition(),u={top:r.y,right:r.x+i.width,bottom:r.y+i.height,left:r.x},a={width:s.getWidth(),height:s.getHeight()};return u.left<n.left&&(r.x=n.left,i.width=a.width+(o.x-r.x)),u.right>n.right&&(i.width=n.right-r.x),u.top<n.top&&(r.y=n.top,i.height=a.height+(o.y-r.y)),u.bottom>n.bottom&&(i.height=n.bottom-r.y),{pos:r,dim:i}}};var d=function(){p.prototype.constructor.call(this)};d.prototype=new p,d.prototype.constructor=d,d.prototype.buildSelectGeometry=function(e,t){var n=p.prototype.buildSelectGeometry.call(this,e,t),r=this.interaction.getImageSelection(),i=h.DIRECTION,s=this.determineResizeDirection(e,t),o=n.dim,u=n.pos,a=this.interaction.getBoundry(),f=r.getSelectionRect(),l=f.getAbsolutePosition(),c=[0,6],d=[0,2];if(s===i.HORIZONTAL)if(u.y+o.height>=a.bottom&&3<=e&&7>=e&&f.getWidth()<=o.width)o.height=a.bottom-u.y,o.width=o.height*r.ratio,u.x=l.x;else if(u.y<=a.top&&0<=e&&2>=e&&f.getWidth()<=o.width){var v=u.y+o.height;u.y=a.top,o.height=a.top-u.y,o.width=o.height*r.ratio,u.x=l.x}else{var m=o.width/r.ratio;-1!==d.indexOf(e)&&(u.y=l.y-(m-f.getHeight())),o.height=m}else if(u.x+o.width>=a.right&&1<=e&&5>=e&&f.getHeight()<=o.height)o.width=a.right-u.x,o.height=o.width/r.ratio,u.y=l.y;else if(u.x<=a.left&&-1!==[0,6,7].indexOf(e)&&f.getHeight()<=o.height){var g=u.x+o.width;u.x=a.left,o.width=g-u.x,o.height=o.width/r.ratio,u.y=l.y}else{var y=o.height*r.ratio;-1!==c.indexOf(e)&&(u.x=l.x-(y-f.getWidth())),o.width=y}return{pos:u,dim:o}},d.prototype.determineResizeDirection=function(e,t){var n=h.DIRECTION,r=p.prototype.determineResizeDirection.call(this,e,t);return n.BOTH===r&&(r=Math.abs(t.x)<Math.abs(t.y)?n.VERTICAL:n.HORIZONTAL),r};var v=function(){this.stage=null,this.layer=null,this.image=null,this.scale_x=null,this.scale_y=null,this.drag_bounds=null,this.original_bounds=null,this.natural_dim=null,this.zoom_handler=null,this.image_selection=null};v.prototype={init:function(e){this.options=t.extend({},v.DEFAULT_OPTIONS,e||{}),this.options.container=t(this.options.container).first(),this.natural_dim={width:0,height:0},this.stage=new r.Stage({width:this.options.width,height:this.options.height,container:this.options.container[0]}),this.layer=new r.Layer({id:"image-layer"}),this.image=new r.Image({id:"preview-image",draggable:!0}),this.layer.add(this.image),this.stage.add(this.layer);var n=this;this.image_selection=new l,this.image_selection.init(this,{stage:this.stage,width:e.select_width||this.stage.getWidth(),height:e.select_height||this.stage.getHeight(),onSelectionChanged:function(){n.options.onSelectionChanged(n.getCurrentSelection())}}),this.zoom_handler=this.onImageZoomed.bind(this),this.image.on("dragmove",function(){n.options.onViewportChanged(n.translateDimensions({top:-n.image.getY(),right:-n.image.getX()+n.stage.getWidth(),bottom:-n.image.getY()+n.stage.getHeight(),left:-n.image.getX()})),n.options.onSelectionChanged(n.getCurrentSelection())})},fitImageToStage:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=t/n,i=this.stage.getWidth(),s=this.stage.getHeight(),o=i/s,u,a;o<=r&&i<t?(u=i,a=u/r):o>r&&s<n?(a=s,u=a*r):(u=t,a=n),this.scale_x=t/u,this.scale_y=n/a,this.image.setHeight(a),this.image.setWidth(u);var f=i/2-u/2,l=s/2-a/2;return this.image.setX(f),this.image.setY(l),{top:l,right:f+u,bottom:l+a,left:f}},setImageDragBounds:function(e){this.drag_bounds=e;var t=e.left<0?0:e.left,n=e.top<0?0:e.top,r=e.right-e.left,i=e.bottom-e.top,s=this.stage.getWidth(),o=this.stage.getHeight(),u=r>s?s:r,a=i>o?o:i;this.image_selection.setDragBounds({top:n,right:t+u,bottom:n+a,left:t})},manageZoomHandler:function(){1<this.scale_x||1<this.scale_y?t(this.stage.getDOM()).bind("mousewheel",this.zoom_handler):t(this.stage.getDOM()).unbind("mousewheel",this.zoom_handler)},onImageZoomed:function(e,t,n,r){n=Math.ceil(n),r=Math.ceil(r);var i,s,o=this.natural_dim.width/this.natural_dim.height,u=this.image.getHeight()+r,a=u*o,f=this.original_bounds.bottom-this.original_bounds.top,l=this.stage.getWidth(),c=this.stage.getHeight();return this.image.getHeight()===f&&0>=r?!1:(u<f?(i=this.original_bounds.left,s=this.original_bounds.top,u=f,a=u*o):(i=l/2-a/2,s=c/2-u/2),this.image.setX(i),this.image.setY(s),this.image.setHeight(u),this.image.setWidth(a),this.scale_x=this.natural_dim.width/a,this.scale_y=this.natural_dim.height/u,this.setImageDragBounds({top:s,right:i+a,bottom:s+u,left:i}),this.updateViewportDragBounds(),this.layer.draw(),this.options.onViewportChanged(this.translateDimensions({top:-s,right:-i+l,bottom:-s+c,left:-i})),this.options.onSelectionChanged(this.getCurrentSelection()),!1)},updateViewportDragBounds:function(){var e={},t=this.image.getWidth(),n=this.image.getHeight(),r=this.stage.getWidth(),i=this.stage.getHeight();t>r?(e.left=r-t,e.right=0):(e.left=this.image.getX(),e.right=e.left),n>i?(e.top=i-n,e.bottom=0):(e.top=this.image.getY(),e.bottom=e.top),this.image.setDragBounds(e)},translateDimensions:function(e){return{top:e.top*this.scale_y,right:e.right*this.scale_x,bottom:e.bottom*this.scale_y,left:e.left*this.scale_x}},setImage:function(e){var n=this.natural_dim.width,r=this.natural_dim.height;this.natural_dim={width:e.naturalWidth,height:e.naturalHeight},this.image.setImage(e);if(n!==this.natural_dim.width||r!==this.natural_dim.height){this.original_bounds=this.fitImageToStage(e);var i=this.image.getX(),s=this.image.getY(),o=this.image.getWidth(),u=this.image.getHeight(),a=this.stage.getWidth(),f=this.stage.getHeight();this.setImageDragBounds(t.extend({},this.original_bounds)),this.image_selection.setSelection({dim:{width:o,height:u},pos:{x:i,y:s}}),this.updateViewportDragBounds(),this.options.onViewportChanged(this.translateDimensions({top:-s,right:-i+a,bottom:-s+f,left:-i})),this.manageZoomHandler()}this.layer.draw()},onViewportChanged:function(e){var t=this.image.getAbsolutePosition(),n=(e.right-e.left)/this.scale_x,r=(e.bottom-e.top)/this.scale_y,i=this.natural_dim.width/this.natural_dim.height,s=this.stage.getHeight()/r,o=this.stage.getWidth()/n,u=this.natural_dim.height/this.scale_y*s,a=u*i,f=-(e.left/this.scale_x)*o,l=-(e.top/this.scale_y)*s;this.image.setHeight(u),this.image.setWidth(a),this.image.setX(f),this.image.setY(l),this.scale_x=this.natural_dim.width/a,this.scale_y=this.natural_dim.height/u,this.setImageDragBounds({top:l,right:f+a,bottom:l+u,left:f}),this.updateViewportDragBounds(),this.layer.draw(),this.options.onSelectionChanged(this.getCurrentSelection())},getCurrentSelection:function(){var e=this.image.getAbsolutePosition();return this.translateDimensions(this.image_selection.getSelection(e))},showSelection:function(){this.image_selection.show()},hideSelection:function(){this.image_selection.hide()},setSelection:function(e){var t={top:Math.round(e.top/this.scale_y),right:Math.round(e.right/this.scale_x),bottom:Math.round(e.bottom/this.scale_y),left:Math.round(e.left/this.scale_x)},n=this.image.getAbsolutePosition();this.image_selection.setSelection({pos:{x:t.left+n.x,y:t.top+n.y},dim:{width:t.right-t.left,height:t.bottom-t.top}})},setSelectMode:function(e){this.image_selection.setResizeMode(e)},getImageBoundry:function(){return this.drag_bounds}},v.DEFAULT_OPTIONS={width:400,height:300,onViewportChanged:function(){},onSelectionChanged:function(){}};var m=function(){this.stage=null,this.layer=null,this.image=null,this.scale_x=null,this.scale_y=null,this.original_dim=null,this.orig_viewport_size=null,this.viewport_rect=null};m.prototype={init:function(e){this.options=t.extend({},m.DEFAULT_OPTIONS,e||{}),this.options.container=t(this.options.container).first(),this.original_dim={width:0,height:0},this.stage=new r.Stage({width:this.options.width,height:this.options.height,container:this.options.container[0]}),this.layer=new r.Layer({id:"image-layer"}),this.image=new r.Image({id:"preview-image"}),this.viewport_rect=new r.Rect({id:"viewport-rect",fill:"rgba(0, 0, 0, 0)",stroke:"black",strokeWidth:.5,draggable:!0});var n=this;this.viewport_rect.on("dragmove",function(){n.options.onViewportChanged(n.translateDimensions(n.getRelativeViewportBounds()))}),t(this.stage.getDOM()).bind("mousewheel",this.onViewportZoomed.bind(this)),this.layer.add(this.image),this.layer.add(this.viewport_rect),this.stage.add(this.layer)},onViewportZoomed:function(e,t,n,r){n=-Math.ceil(n),r=-Math.ceil(r);var i,s,o=this.orig_viewport_size.width/this.orig_viewport_size.height,u=this.viewport_rect.getHeight()+r,a=u*o,f=this.orig_viewport_size.height,l=15,c=this.stage.getWidth(),h=this.stage.getHeight();return this.viewport_rect.getHeight()===f&&0<r||this.viewport_rect.getHeight()===l&&0>r?!1:(u>=f?(i=this.orig_viewport_size.x,s=this.orig_viewport_size.y,u=f,a=u*o):u<=l?(u=l,a=u*o,i=c/2-a/2,s=h/2-u/2):(i=c/2-a/2,s=h/2-u/2),this.viewport_rect.setX(i),this.viewport_rect.setY(s),this.viewport_rect.setHeight(u),this.viewport_rect.setWidth(a),this.updateViewportDragBounds(),this.layer.draw(),this.options.onViewportChanged(this.translateDimensions(this.getRelativeViewportBounds())),!1)},fitImageToStage:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=t/n,i=this.stage.getWidth(),s=this.stage.getHeight(),o=i/s,u,a;o<=r&&i<t?(u=i,a=u/r):o>r&&s<n?(a=s,u=a*r):(u=t,a=n),this.scale_x=t/u,this.scale_y=n/a,this.image.setHeight(a),this.image.setWidth(u);var f=i/2-u/2,l=s/2-a/2;this.image.setX(f),this.image.setY(l)},updateViewportDragBounds:function(){var e={},t=this.image.getWidth(),n=this.image.getHeight(),r=this.viewport_rect.getWidth(),i=this.viewport_rect.getHeight();t>r?(e.left=this.image.getX(),e.right=this.image.getX()+t-r):(e.left=this.viewport_rect.getX(),e.right=e.left),n>i?(e.top=this.image.getY(),e.bottom=this.image.getY()+n-i):(e.top=this.image.getY(),e.bottom=e.top),this.viewport_rect.setDragBounds(e)},getRelativeViewportBounds:function(){var e=this.viewport_rect.getAbsolutePosition(),t=this.image.getAbsolutePosition(),n=e.x-t.x,r=e.y-t.y;return{top:r,right:n+this.viewport_rect.getWidth(),bottom:r+this.viewport_rect.getHeight(),left:n}},translateDimensions:function(e){return{top:e.top*this.scale_y,right:e.right*this.scale_x,bottom:e.bottom*this.scale_y,left:e.left*this.scale_x}},setImage:function(e){var t=this.original_dim.width,n=this.original_dim.height;this.original_dim={width:e.naturalWidth,height:e.naturalHeight},(t!==this.original_dim.width||n!==this.original_dim.height)&&this.fitImageToStage(e),this.image.setImage(e),this.updateViewportDragBounds(),this.layer.draw()},onViewPortChanged:function(e){var t=this.image.getAbsolutePosition(),n=e.left/this.scale_x+t.x,r=e.top/this.scale_y+t.y,i=(e.right-e.left)/this.scale_x,s=(e.bottom-e.top)/this.scale_y;this.viewport_rect.setWidth(i),this.viewport_rect.setHeight(s),this.viewport_rect.setX(n),this.viewport_rect.setY(r),this.updateViewportDragBounds(),this.layer.draw(),this.orig_viewport_size||(this.orig_viewport_size={width:this.viewport_rect.getWidth(),height:this.viewport_rect.getHeight(),x:this.viewport_rect.getX(),y:this.viewport_rect.getY()})}},m.DEFAULT_OPTIONS={width:250,height:150,onViewportChanged:function(){}};var g={};g.utils={initSampleCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=0,e.height=0,this.getSampleCanvas=function(){return e},this.getSampleContext=function(){return t},this.createImageData=t.createImageData?function(e,n){return t.createImageData(e,n)}:function(e,t){return new ImageData(e,t)}},getSampleCanvas:function(){return this.initSampleCanvas(),this.getSampleCanvas()},getSampleContext:function(){return this.initSampleCanvas(),this.getSampleContext()},createImageData:function(e,t){return this.initSampleCanvas(),this.createImageData(e,t)},clamp:function(e){return e>255?255:e<0?0:e},buildMap:function(e){for(var t=[],n=0,r;n<256;n+=1)t[n]=(r=e(n))>255?255:r<0?0:r|0;return t},applyMap:function(e,t,n){for(var r=0,i=e.length;r<i;r+=4)t[r]=n[e[r]],t[r+1]=n[e[r+1]],t[r+2]=n[e[r+2]],t[r+3]=e[r+3]},mapRGB:function(e,t,n){this.applyMap(e,t,this.buildMap(n))},getPixelIndex:function(e,t,n,r,i){if(e<0||e>=n||t<0||t>=r)switch(i){case 1:e=e<0?0:e>=n?n-1:e,t=t<0?0:t>=r?r-1:t;break;case 2:e=(e%=n)<0?e+n:e,t=(t%=r)<0?t+r:t;break;default:return null}return t*n+e<<2},getPixel:function(e,t,n,r,i,s){if(t<0||t>=r||n<0||n>=i)switch(s){case 1:t=t<0?0:t>=r?r-1:t,n=n<0?0:n>=i?i-1:n;break;case 2:t=(t%=r)<0?t+r:t,n=(n%=i)<0?n+i:n;break;default:return 0}var o=n*r+t<<2;return e[o+3]<<24|e[o]<<16|e[o+1]<<8|e[o+2]},getPixelByIndex:function(e,t){return e[t+3]<<24|e[t]<<16|e[t+1]<<8|e[t+2]},copyBilinear:function(e,t,n,r,i,s,o,u){var a=t<0?t-1|0:t|0,f=n<0?n-1|0:n|0,l=t-a,c=n-f,h,p=0,d=0,v=0,m=0,g,y,b,w,E,S;if(a>=0&&a<r-1&&f>=0&&f<i-1){h=f*r+a<<2;if(!l&&!c){s[o]=e[h],s[o+1]=e[h+1],s[o+2]=e[h+2],s[o+3]=e[h+3];return}p=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2],h+=4,d=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2],h=h-8+(r<<2),v=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2],h+=4,m=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2]}else{p=this.getPixel(e,a,f,r,i,u);if(!l&&!c){s[o]=p>>16&255,s[o+1]=p>>8&255,s[o+2]=p&255,s[o+3]=p>>24&255;return}d=this.getPixel(e,a+1,f,r,i,u),v=this.getPixel(e,a,f+1,r,i,u),m=this.getPixel(e,a+1,f+1,r,i,u)}g=1-l,y=1-c,b=((p>>16&255)*g+(d>>16&255)*l)*y+((v>>16&255)*g+(m>>16&255)*l)*c,w=((p>>8&255)*g+(d>>8&255)*l)*y+((v>>8&255)*g+(m>>8&255)*l)*c,E=((p&255)*g+(d&255)*l)*y+((v&255)*g+(m&255)*l)*c,S=((p>>24&255)*g+(d>>24&255)*l)*y+((v>>24&255)*g+(m>>24&255)*l)*c,s[o]=b>255?255:b<0?0:b|0,s[o+1]=w>255?255:w<0?0:w|0,s[o+2]=E>255?255:E<0?0:E|0,s[o+3]=S>255?255:S<0?0:S|0},rgbToHsl:function(e,t,n){e/=255,t/=255,n/=255;var r=e>t?e>n?e:n:t>n?t:n,i=e<t?e<n?e:n:t<n?t:n,s=r-i,o=0,u=0,a=(i+r)/2;return s!==0&&(e===r?o=(t-n)/s+(t<n?6:0):t===r?o=(n-e)/s+2:o=(e-t)/s+4,o/=6,u=a>.5?s/(2-r-i):s/(r+i)),[o,u,a]},hslToRgb:function(e,t,n){var r,i,s,o,u,a,f=[];if(t===0)o=u=a=n*255+.5|0,f=[o,u,a];else{n<=.5?i=n*(t+1):i=n+t-n*t,r=n*2-i,s=e+1/3;var l;for(var c=0;c<3;c+=1)s<0?s+=1:s>1&&(s-=1),6*s<1?l=r+(i-r)*s*6:2*s<1?l=i:3*s<2?l=r+(i-r)*(2/3-s)*6:l=r,f[c]=l*255+.5|0,s-=1/3}return f}},g.Translate=function(e,t,n,r){},g.Scale=function(e,t,n,r){},g.Rotate=function(e,t,n,r,i,s){},g.Affine=function(e,t,n,r){},g.UnsharpMask=function(e,t){},g.ConvolutionFilter=function(e,t,n,r,i,s,o,u,a,f){var l=e.data,c=e.width,h=e.height,p=l.length,d=this.utils.createImageData(c,h),v=d.data;i=i||1,s=s||0,o!==!1&&(o=!0),u!==!1&&(u=!0),a=a||0,f=f||0;var m=0,g=t>>1,y=n>>1,b=a>>16&255,w=a>>8&255,E=a&255,S=f*255;for(var x=0;x<h;x+=1)for(var T=0;T<c;T+=1,m+=4){var N=0,C=0,k=0,L=0,A=!1,O=0,M;for(var _=-g;_<=g;_+=1){var D=x+_,P;0<=D&&D<h?P=D*c:u?P=x*c:A=!0;for(var H=-y;H<=y;H+=1){var B=r[O++];if(B!==0){var j=T+H;0<=j&&j<c||(u?j=T:A=!0);if(A)N+=B*b,C+=B*w,k+=B*E,L+=B*S;else{var F=P+j<<2;N+=B*l[F],C+=B*l[F+1],k+=B*l[F+2],L+=B*l[F+3]}}}}v[m]=(M=N/i+s)>255?255:M<0?0:M|0,v[m+1]=(M=C/i+s)>255?255:M<0?0:M|0,v[m+2]=(M=k/i+s)>255?255:M<0?0:M|0,v[m+3]=o?l[m+3]:(M=L/i+s)>255?255:M<0?0:M|0}return d},g.Binarize=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;isNaN(t)&&(t=.5),t*=255;for(var a=0;a<s;a+=4){var f=n[a]+n[a+1]+n[a+2]/3;u[a]=u[a+1]=u[a+2]=f<=t?0:255,u[a+3]=255}return o},g.BlendAdd=function(e,t,n,r){var i=e.data,s=e.width,o=e.height,u=i.length,a=this.utils.createImageData(s,o),f=a.data,l=t.data,c;for(var h=0;h<u;h+=4)f[h]=(c=i[h]+l[h])>255?255:c,f[h+1]=(c=i[h+1]+l[h+1])>255?255:c,f[h+2]=(c=i[h+2]+l[h+2])>255?255:c,f[h+3]=255;return a},g.BlendSubtract=function(e,t,n,r){var i=e.data,s=e.width,o=e.height,u=i.length,a=this.utils.createImageData(s,o),f=a.data,l=t.data,c;for(var h=0;h<u;h+=4)f[h]=(c=i[h]-l[h])<0?0:c,f[h+1]=(c=i[h+1]-l[h+1])<0?0:c,f[h+2]=(c=i[h+2]-l[h+2])<0?0:c,f[h+3]=255;return a},g.BoxBlur=function(){var e=function(e,t,n,r,i){var s=i*2+1,o=i+1,u=n-1,a,f,l,c,h=0,p,d,v,m,g,y,b,w,E,S,x=[];for(g=0,y=256*s;g<y;g+=1)x[g]=g/s|0;for(w=0;w<r;w+=1){a=f=l=c=0,p=w,d=h<<2,a+=o*e[d],f+=o*e[d+1],l+=o*e[d+2],c+=o*e[d+3];for(g=1;g<=i;g+=1)d=h+(g<n?g:u)<<2,a+=e[d],f+=e[d+1],l+=e[d+2],c+=e[d+3];for(b=0;b<n;b+=1)d=p<<2,t[d]=x[a],t[d+1]=x[f],t[d+2]=x[l],t[d+3]=x[c],E=b+o,E>u&&(E=u),S=b-i,S<0&&(S=0),v=h+E<<2,m=h+S<<2,a+=e[v]-e[m],f+=e[v+1]-e[m+1],l+=e[v+2]-e[m+2],c+=e[v+3]-e[m+3],p+=r;h+=n}};return function(t,n,r,i){var s=t.data,o=t.width,u=t.height,a=s.length,f=this.utils.createImageData(o,u),l=f.data,c=this.utils.createImageData(o,u),h=c.data;for(var p=0;p<i;p+=1)e(p?l:s,h,o,u,n),e(h,l,u,o,r);return f}}(),g.GaussianBlur=function(e,t){var n,r,i;switch(t){case 2:n=5,r=[1,1,2,1,1,1,2,4,2,1,2,4,8,4,2,1,2,4,2,1,1,1,2,1,1],i=52;break;case 3:n=7,r=[1,1,2,2,2,1,1,1,2,2,4,2,2,1,2,2,4,8,4,2,2,2,4,8,16,8,4,2,2,2,4,8,4,2,2,1,2,2,4,2,2,1,1,1,2,2,2,1,1],i=140;break;case 4:n=15,r=[2,2,3,4,5,5,6,6,6,5,5,4,3,2,2,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,6,8,11,13,16,18,19,20,19,18,16,13,11,8,6,6,8,10,13,15,17,19,19,19,17,15
,13,10,8,6,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,2,2,3,4,5,5,6,6,6,5,5,4,3,2,2],i=2044;break;default:n=3,r=[1,2,1,2,4,2,1,2,1],i=16}return this.ConvolutionFilter(e,n,n,r,i,0,!1)},g.StackBlur=function(){function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],t=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return function(r,i){var s=r.data,o=r.width,u=r.height,a=s.length,f=this.Clone(r),l=f.data,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=i+i+1,B=o<<2,j=o-1,F=u-1,I=i+1,q=I*(I+1)/2,R=new n,U=R,z,W,X,V=e[i],$=t[i];for(p=1;p<H;p+=1)U=U.next=new n,p===I&&(X=U);U.next=R,g=m=0;for(h=0;h<u;h+=1){C=k=L=A=y=b=w=E=0,S=I*(O=l[m]),x=I*(M=l[m+1]),T=I*(_=l[m+2]),N=I*(D=l[m+3]),y+=q*O,b+=q*M,w+=q*_,E+=q*D,U=R;for(p=0;p<I;p+=1)U.r=O,U.g=M,U.b=_,U.a=D,U=U.next;for(p=1;p<I;p+=1)d=m+((j<p?j:p)<<2),y+=(U.r=O=l[d])*(P=I-p),b+=(U.g=M=l[d+1])*P,w+=(U.b=_=l[d+2])*P,E+=(U.a=D=l[d+3])*P,C+=O,k+=M,L+=_,A+=D,U=U.next;z=R,W=X;for(c=0;c<o;c+=1)l[m]=y*V>>$,l[m+1]=b*V>>$,l[m+2]=w*V>>$,l[m+3]=E*V>>$,y-=S,b-=x,w-=T,E-=N,S-=z.r,x-=z.g,T-=z.b,N-=z.a,d=g+((d=c+i+1)<j?d:j)<<2,C+=z.r=l[d],k+=z.g=l[d+1],L+=z.b=l[d+2],A+=z.a=l[d+3],y+=C,b+=k,w+=L,E+=A,z=z.next,S+=O=W.r,x+=M=W.g,T+=_=W.b,N+=D=W.a,C-=O,k-=M,L-=_,A-=D,W=W.next,m+=4;g+=o}for(c=0;c<o;c+=1){k=L=A=C=b=w=E=y=0,m=c<<2,S=I*(O=l[m]),x=I*(M=l[m+1]),T=I*(_=l[m+2]),N=I*(D=l[m+3]),y+=q*O,b+=q*M,w+=q*_,E+=q*D,U=R;for(p=0;p<I;p+=1)U.r=O,U.g=M,U.b=_,U.a=D,U=U.next;v=o;for(p=1;p<=i;p+=1)m=v+c<<2,y+=(U.r=O=l[m])*(P=I-p),b+=(U.g=M=l[m+1])*P,w+=(U.b=_=l[m+2])*P,E+=(U.a=D=l[m+3])*P,C+=O,k+=M,L+=_,A+=D,U=U.next,p<F&&(v+=o);m=c,z=R,W=X;for(h=0;h<u;h+=1)d=m<<2,l[d]=y*V>>$,l[d+1]=b*V>>$,l[d+2]=w*V>>$,l[d+3]=E*V>>$,y-=S,b-=x,w-=T,E-=N,S-=z.r,x-=z.g,T-=z.b,N-=z.a,d=c+((d=h+I)<F?d:F)*o<<2,y+=C+=z.r=l[d],b+=k+=z.g=l[d+1],w+=L+=z.b=l[d+2],E+=A+=z.a=l[d+3],z=z.next,S+=O=W.r,x+=M=W.g,T+=_=W.b,N+=D=W.a,C-=O,k-=M,L-=_,A-=D,W=W.next,m+=o}return f}}(),g.Brightness=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;return this.utils.mapRGB(n,u,function(e){return e+=t,e>255?255:e}),o},g.BrightnessContrastGimp=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(i,s),a=u.data,f=Math.PI/4;t/=100,n*=.99,n/=100,n=Math.tan((n+1)*f);for(var l=0,c=0;c<o;c+=4)l+=r[c]*19595+r[c+1]*38470+r[c+2]*7471>>16;return l/=o/4,this.utils.mapRGB(r,a,function(e){return t<0?e*=1+t:t>0&&(e+=(255-e)*t),n!==0&&(e=(e-l)*n+l),e+.5|0}),u},g.BrightnessContrastPhotoshop=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(i,s),a=u.data;return t=(t+100)/100,n=(n+100)/100,this.utils.mapRGB(r,a,function(e){return e*=t,e=(e-127.5)*n+127.5,e+.5|0}),u},g.Channels=function(e,t){var n;switch(t){case 2:n=[0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0];break;case 3:n=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0];break;default:n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0]}return this.ColorMatrixFilter(e,n)},g.Clone=function(e){return this.Copy(e,this.utils.createImageData(e.width,e.height))},g.CloneBuiltin=function(e){var t=e.width,n=e.height,r=this.utils.getSampleCanvas(),i=this.utils.getSampleContext(),s;return r.width=t,r.height=n,i.putImageData(e,0,0),s=i.getImageData(0,0,t,n),r.width=0,r.height=0,s},g.ColorMatrixFilter=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data,a=t[0],f=t[1],l=t[2],c=t[3],h=t[4],p=t[5],d=t[6],v=t[7],m=t[8],g=t[9],y=t[10],b=t[11],w=t[12],E=t[13],S=t[14],x=t[15],T=t[16],N=t[17],C=t[18],k=t[19],L,A,O,M,_,D;for(A=0;A<s;A+=4)O=n[A],M=n[A+1],_=n[A+2],D=n[A+3],u[A]=(L=O*a+M*f+_*l+D*c+h)>255?255:L<0?0:L|0,u[A+1]=(L=O*p+M*d+_*v+D*m+g)>255?255:L<0?0:L|0,u[A+2]=(L=O*y+M*b+_*w+D*E+S)>255?255:L<0?0:L|0,u[A+3]=(L=O*x+M*T+_*N+D*C+k)>255?255:L<0?0:L|0;return o},g.ColorTransformFilter=function(e,t,n,r,i,s,o,u,a){var f=e.data,l=e.width,c=e.height,h=f.length,p=this.utils.createImageData(l,c),d=p.data,v,m;for(v=0;v<h;v+=4)d[v]=(m=f[v]*t+s)>255?255:m<0?0:m,d[v+1]=(m=f[v+1]*n+o)>255?255:m<0?0:m,d[v+2]=(m=f[v+2]*r+u)>255?255:m<0?0:m,d[v+3]=(m=f[v+3]*i+a)>255?255:m<0?0:m;return p},g.Copy=function(e,t){var n=e.data,r=n.length,i=t.data;while(r--)i[r]=n[r];return t},g.Crop=function(e,t,n,r,i){var s=e.data,o=e.width,u=e.height,a=s.length,f=this.utils.createImageData(r,i),l=f.data,c=Math.max(t,0),h=Math.max(n,0),p=Math.min(t+r,o),d=Math.min(n+i,u),v=c-t,m=h-n,g,y,b,w,E,S;for(g=h,w=m;g<d;g+=1,w+=1)for(y=c,E=v;y<p;y+=1,E+=1)b=g*o+y<<2,S=w*r+E<<2,l[S]=s[b],l[S+1]=s[b+1],l[S+2]=s[b+2],l[S+3]=s[b+3];return f},g.CropBuiltin=function(e,t,n,r,i){var s=e.width,o=e.height,u=this.utils.getSampleCanvas(),a=this.utils.getSampleContext();u.width=s,u.height=o,a.putImageData(e,0,0);var f=a.getImageData(t,n,r,i);return u.width=0,u.height=0,f},g.Desaturate=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;for(var u=0;u<i;u+=4){var a=t[u],f=t[u+1],l=t[u+2],c=a>f?a>l?a:l:f>l?f:l,h=a<f?a<l?a:l:f<l?f:l,p=(c+h)/2+.5|0;o[u]=o[u+1]=o[u+2]=p,o[u+3]=t[u+3]}return s},g.DisplacementMapFilter=function(e,t,n,r,i,s,o,u,a){var f=e.data,l=e.width,c=e.height,h=f.length,p=g.Clone(e),d=p.data;n=n||0,r=r||0,i=i||0,s=s||0,o=o||0,u=u||0,a=a||2;var v=t.width,m=t.height,y=t.data,b=v+n,w=m+r,E,S,x,T,N,C,k,L,A;for(L=0;L<l;L+=1)for(A=0;A<c;A+=1)E=A*l+L<<2,L<n||A<r||L>=b||A>=w?S=E:(x=(A-r)*v+(L-n)<<2,T=y[x+i],C=L+((T-128)*o>>8),N=y[x+s],k=A+((N-128)*u>>8),S=g.utils.getPixelIndex(C+.5|0,k+.5|0,l,c,a),S===null&&(S=E)),d[E]=f[S],d[E+1]=f[S+1],d[E+2]=f[S+2],d[E+3]=f[S+3];return p},g.Dither=function(e,t){var n=e.width,r=e.height,i=this.Clone(e),s=i.data;t=t<2?2:t>255?255:t;var o,u=[],a=t-1,f=0,l=0,c;for(c=0;c<t;c+=1)u[c]=255*c/a;o=this.utils.buildMap(function(e){var n=u[f];return l+=t,l>255&&(l-=255,f+=1),n});var h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k=n-1,L=r-1,A=7/16,O=3/16,M=5/16,_=1/16;for(p=0;p<r;p+=1)for(h=0;h<n;h+=1)d=p*n+h<<2,v=s[d],m=s[d+1],g=s[d+2],y=o[v],b=o[m],w=o[g],s[d]=y,s[d+1]=b,s[d+2]=w,E=v-y,S=m-b,x=g-w,d+=4,h<k&&(T=s[d]+A*E,N=s[d+1]+A*S,C=s[d+2]+A*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0),d+=n-2<<2,h>0&&p<L&&(T=s[d]+O*E,N=s[d+1]+O*S,C=s[d+2]+O*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0),d+=4,p<L&&(T=s[d]+M*E,N=s[d+1]+M*S,C=s[d+2]+M*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0),d+=4,h<k&&p<L&&(T=s[d]+_*E,N=s[d+1]+_*S,C=s[d+2]+_*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0);return i},g.Edge=function(e){return this.ConvolutionFilter(e,3,3,[-1,-1,-1,-1,8,-1,-1,-1,-1])},g.Emboss=function(e){return this.ConvolutionFilter(e,3,3,[-2,-1,0,-1,1,1,0,1,2])},g.Enrich=function(e){return this.ConvolutionFilter(e,3,3,[0,-2,0,-2,20,-2,0,-2,0],10,-40)},g.Flip=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data,a,f,l,c,h;for(f=0;f<i;f+=1)for(a=0;a<r;a+=1)l=f*r+a<<2,t?c=(i-f-1)*r+a<<2:c=f*r+(r-a-1)<<2,u[c]=n[l],u[c+1]=n[l+1],u[c+2]=n[l+2],u[c+3]=n[l+3];return o},g.Gamma=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;return this.utils.mapRGB(n,u,function(e){return e=255*Math.pow(e/255,1/t)+.5,e>255?255:e+.5|0}),o},g.GrayScale=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;for(var u=0;u<i;u+=4){var a=t[u]*19595+t[u+1]*38470+t[u+2]*7471>>16;o[u]=o[u+1]=o[u+2]=a,o[u+3]=t[u+3]}return s},g.HSLAdjustment=function(e,t,n,r){var i=e.data,s=e.width,o=e.height,u=i.length,a=this.utils.createImageData(s,o),f=a.data;t/=360,n/=100,r/=100;var l=this.utils.rgbToHsl,c=this.utils.hslToRgb,h,p,d,v,m,g;for(g=0;g<u;g+=4){v=l(i[g],i[g+1],i[g+2]),h=v[0]+t;while(h<0)h+=1;while(h>1)h-=1;p=v[1]+v[1]*n,p<0?p=0:p>1&&(p=1),d=v[2],r>0?d+=(1-d)*r:r<0&&(d+=d*r),m=c(h,p,d),f[g]=m[0],f[g+1]=m[1],f[g+2]=m[2],f[g+3]=i[g+3]}return a},g.Invert=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;return this.utils.mapRGB(t,o,function(e){return 255-e}),s},g.Mosaic=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data,a=Math.ceil(r/t),f=Math.ceil(i/t),l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;for(l=0;l<f;l+=1){d=l*t,v=d+t,v>i&&(v=i);for(c=0;c<a;c+=1){h=c*t,p=h+t,p>r&&(p=r),E=S=x=T=0,w=(p-h)*(v-d);for(g=d;g<v;g+=1){y=g*r;for(m=h;m<p;m+=1)b=y+m<<2,E+=n[b],S+=n[b+1],x+=n[b+2],T+=n[b+3]}E=E/w+.5|0,S=S/w+.5|0,x=x/w+.5|0,T=T/w+.5|0;for(g=d;g<v;g+=1){y=g*r;for(m=h;m<p;m+=1)b=y+m<<2,u[b]=E,u[b+1]=S,u[b+2]=x,u[b+3]=T}}}return o},g.Oil=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(i,s),a=u.data,f=0,l=[],c=[],h=[],p=[],d=[],v=[],m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D;for(g=0;g<s;g+=1)for(m=0;m<i;m+=1){for(y=0;y<n;y+=1)l[y]=c[y]=h[y]=p[y]=d[y]=v[y]=0;for(b=-t;b<=t;b+=1){E=g+b;if(E<0||E>=s)continue;x=E*i;for(w=-t;w<=t;w+=1){S=m+w;if(S<0||S>=i)continue;T=x+S<<2,N=r[T],C=r[T+1],k=r[T+2],L=N*n>>8,A=C*n>>8,O=k*n>>8,p[L]+=N,d[A]+=C,v[O]+=k,l[L]+=1,c[A]+=1,h[O]+=1}}M=_=D=0;for(y=1;y<n;y+=1)l[y]>l[M]&&(M=y),c[y]>c[_]&&(_=y),h[y]>h[D]&&(D=y);a[f]=p[M]/l[M]|0,a[f+1]=d[_]/c[_]|0,a[f+2]=v[D]/h[D]|0,a[f+3]=r[f+3],f+=4}return u},g.OpacityFilter=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;for(var a=0;a<s;a+=4)u[a]=n[a],u[a+1]=n[a+1],u[a+2]=n[a+2],u[a+3]=t;return o},g.Posterize=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;t=t<2?2:t>255?255:t;var a=[],f=t-1,l=0,c=0,h;for(h=0;h<t;h+=1)a[h]=255*h/f;return this.utils.mapRGB(n,u,function(e){var n=a[l];return c+=t,c>255&&(c-=255,l+=1),n}),o},g.Rescale=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;return this.utils.mapRGB(n,u,function(e){return e*=t,e>255?255:e+.5|0}),o},g.ResizeNearestNeighbor=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(t,n),a=u.data,f=i/t,l=s/n,c=0,h,p,d,v;for(d=0;d<n;d+=1){v=(d*l|0)*i;for(p=0;p<t;p+=1)h=v+p*f<<2,a[c]=r[h],a[c+1]=r[h+1],a[c+2]=r[h+2],a[c+3]=r[h+3],c+=4}return u},g.Resize=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(t,n),a=u.data,f=i/t,l=s/n,c=0,h,p;for(p=0;p<n;p+=1)for(h=0;h<t;h+=1)this.utils.copyBilinear(r,h*f,p*l,i,s,a,c,0),c+=4;return u},g.ResizeBuiltin=function(e,t,n){var r=e.width,i=e.height,s=this.utils.getSampleCanvas(),o=this.utils.getSampleContext(),u;return s.width=Math.max(r,t),s.height=Math.max(i,n),o.save(),o.putImageData(e,0,0),o.scale(t/r,n/i),o.drawImage(s,0,0),u=o.getImageData(0,0,t,n),o.restore(),s.width=0,s.height=0,u},g.Sepia=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data,u,a,f,l,c;for(l=0;l<i;l+=4)u=t[l],a=t[l+1],f=t[l+2],o[l]=(c=u*.393+a*.769+f*.189)>255?255:c<0?0:c+.5|0,o[l+1]=(c=u*.349+a*.686+f*.168)>255?255:c<0?0:c+.5|0,o[l+2]=(c=u*.272+a*.534+f*.131)>255?255:c<0?0:c+.5|0,o[l+3]=t[l+3];return s},g.Sharpen=function(e,t){return this.ConvolutionFilter(e,3,3,[-t/16,-t/8,-t/16,-t/8,t*.75+1,-t/8,-t/16,-t/8,-t/16])},g.Solarize=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;return this.utils.mapRGB(t,o,function(e){return e>127?(e-127.5)*2:(127.5-e)*2}),s},g.Transpose=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(r,n),o=s.data,u,a;for(var f=0;f<r;f+=1)for(var l=0;l<n;l+=1)u=f*n+l<<2,a=l*r+f<<2,o[a]=t[u],o[a+1]=t[u+1],o[a+2]=t[u+2],o[a+3]=t[u+3];return s},g.Twril=function(e,t,n,r,i,s,o){var u=e.data,a=e.width,f=e.height,l=u.length,c=this.utils.createImageData(a,f),h=c.data;t=a*t,n=f*n,i*=Math.PI/180;var p=r*r,d=f-1,v=a-1,m=0,g,y,b,w,E,S,x,T,N,C,k;for(y=0;y<f;y+=1)for(g=0;g<a;g+=1)b=g-t,w=y-n,E=b*b+w*w,E>p?(h[m]=u[m],h[m+1]=u[m+1],h[m+2]=u[m+2],h[m+3]=u[m+3]):(E=Math.sqrt(E),S=Math.atan2(w,b)+i*(r-E)/r,x=t+E*Math.cos(S),T=n+E*Math.sin(S),o?this.utils.copyBilinear(u,x,T,a,f,h,m,s):(N=(T+.5|0)*a+(x+.5|0)<<2,h[m]=u[N],h[m+1]=u[N+1],h[m+2]=u[N+2],h[m+3]=u[N+3])),m+=4;return c},e.IchieJs={create:function(e){var t=["launch","showSelection","hideSelection","setSelection","setSelectMode","copySelection","pasteClipboard","filter","crop","undo","redo","downloadAsImage","resize"],n=new i;n.init(e);var r={};for(var s=0;s<t.length;s++){var o=t[s];r[o]=n[o].bind(n)}return r}}})(typeof exports=="object"&&exports||this,$,_);

/* /home/vagrant/projects/honeybee/app/resources/scripts/libs/ZeroClipboard.js */

// Simple Set Clipboard System
// Author: Joseph Huckaby
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){var t=this.className.split(/\s+/),n=-1;for(var r=0;r<t.length;r++)t[r]==e&&(n=r,r=t.length);return n>-1&&(t.splice(n,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,n){var r=this.clients[e];r&&r.receiveEvent(t,n)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){var n={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};while(e&&e!=t)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,t,n){this.domElement=ZeroClipboard.$(e);var r=99;this.domElement.style.zIndex&&(r=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]);var i=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div");var s=this.div.style;s.position="absolute",s.left=""+i.left+"px",s.top=""+i.top+"px",s.width=""+i.width+"px",s.height=""+i.height+"px",s.zIndex=r;if(typeof n=="object")for(addedStyle in n)s[addedStyle]=n[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(i.width,i.height)},getHTML:function(e,t){var n="",r="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var i=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide());if(this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+t.left+"px",n.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");switch(e){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var n=this;setTimeout(function(){n.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var r=0,i=this.handlers[e].length;r<i;r++){var s=this.handlers[e][r];typeof s=="function"?s(this,t):typeof s=="object"&&s.length==2?s[0][s[1]](this,t):typeof s=="string"&&window[s](this,t)}}};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/core.js */

ZeroClipboard.setMoviePath("flash/ZeroClipboard.swf");var midas={core:{}};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/Module.js */

/**
 * @class
 * @description The Module object helps to maintain code based on the module pattern thereby supporting simple inheritance.
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.Module=function(){var e=function(){},t=function(e){return typeof e=="function"},n=function(){};return n.create=function(n){var r=function(n){if(n===e)return;t(this.init)&&this.init.apply(this,arguments)};r.prototype=new this(e);for(attribute_name in n)(function(e,n){!t(e)||!t(n)?r.prototype[attribute_name]=e:r.prototype[attribute_name]=function(){return this.parent=n,e.apply(this,arguments)}})(n[attribute_name],r.prototype[attribute_name]);return r.prototype.constructor=r,r.extend=this.extend||this.create,r},n}();

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/BaseObject.js */

/**
 * @class
 * @description <p>The BaseObject serves as the base implementation for all 'modules'.</p>
 * <p>It passes options support and logging functionality on to it's children.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.BaseObject=midas.core.Module.create({log_prefix:"BaseObject",logger:null,listeners:null,init:function(e){this.options=e||{},this.logger={},this.listeners={}},on:function(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),this},removeListener:function(e,t){if(!this.listeners[e])return this;var n=this.listeners[e].indexOf(t);return-1!==n&&this.listeners[e].splice(n,1),this},removeAllListeners:function(e){return this.listeners[e]?(this.listeners[e]=[],this):this},fire:function(e,t){if(!this.listeners[e])return this;for(var n=0;n<this.listeners[e].length;n++)this.listeners[e][n].apply(null,t);return this},logDebug:function(e){var t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return this.log(e,"debug",t),this},logInfo:function(e){var t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return this.log(e,"info",t),this},logWarning:function(e){var t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return this.log(e,"warn",t),this},log:function(e,t,n){n.unshift("["+(new Date).getTime()+"] ["+this.log_prefix+"] "+e),console&&console[t]&&console[t].apply(console,n)},handleException:function(e){console&&console.exception&&console.exception.apply(console,[e])}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/CidSequence.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The CidSequence module provides a forthrunning sequence of ids.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.CidSequence=midas.core.BaseObject.extend({log_prefix:"CidSequence",current_id:null,sequence:null,init:function(e){this.parent(e),this.current_id=0,this.sequence={}},nextCid:function(e){return this.current_id++,this.sequence[this.current_id]=e,this.current_id}}),midas.core.CidSequence.nextCid=function(e){return midas.core.CidSequence._instance||(midas.core.CidSequence._instance=new midas.core.CidSequence),midas.core.CidSequence._instance.nextCid(e)};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/Behaviour.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The Behaviour module provides separation of configuration state (options) and implementation.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.Behaviour=midas.core.BaseObject.extend({log_prefix:"Behaviour",prefix:"jsb-",element:null,init:function(e,t){this.parent(t),this.element=$(e),this.apply()},apply:function(){var e=this.element.attr("class");typeof e!="undefined"&&e!==!1&&$.each(e.split(" "),function(e,t){if(t.match(this.prefix)){var n="."+t+"-options",r=this.element.children(n);r=0<r.length?r:this.element.next(n);if(0<r.length){var i=$.parseJSON(r.val());r.remove(),this.element.removeClass(t);for(var s in i)this.options[s]=i[s]}}}.bind(this))}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/Routing.js */

/**
 * @class
 * @augments midas.core.Behaviour
 * @description <p>The Input module provides behaviour, such as validation, for HTMLForm input element.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.Routing=midas.core.Behaviour.extend({log_prefix:"Routing",init:function(e,t){this.parent(e,t)},getRoute:function(e){return this.options[e]}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/BaseController.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description The BaseController module provides base functionality for connecting views to an async backend.
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.BaseController=midas.core.BaseObject.extend({log_prefix:"BaseController",intent_filters:null,init:function(e){this.parent(e),this.intent_filters={},this.intent_filters=this.getIntentFilters()},getIntentFilters:function(){throw"A BaseController implementation must override the getIntentFilters method."},apply:function(e,t){var n=!1;return $.each(this.intent_filters,function(r,i){!n&&e.name.match(r)&&("string"==typeof i&&"function"==typeof this[i]?(this[i].apply(this,[e,t]),n=!0):"function"==typeof i&&!0===i(e,t)&&(n=!0))}.bind(this)),n}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/BaseView.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The BaseView module provides base functionality for organizing client side behaviour for a certain view.</p>
 * <p>It has access to the view's layout root and manages the various behaviours on a page
 * as aggregated components that derive from the Behaviour core module.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.BaseView=midas.core.BaseObject.extend({log_prefix:"BaseView",controllers:null,layout_root:null,init:function(e,t){this.parent(t),this.controllers=[],this.layout_root=$(e),typeof this.onInitGui=="function"&&this.onInitGui.apply(this)},propagateIntent:function(e,t){for(var n=0;n<this.controllers.length;n++)if(this.controllers[n].apply(e,t))return!0;return this.logWarning("No one liked your intent."),!1},attach:function(e){if(!(e instanceof midas.core.BaseController))throw"Only midas.core.BaseController instances may be attached to a BaseView instance";for(var t=0;t<this.controllers.length;t++)if(this.conrollers[t]===e){this.logWarning("The given controller has allready been attached.");return}this.controllers.push(e)},dettach:function(e){var t=this.controllers.indexOf(conroller);-1<t&&(this.controllers=this.controllers.splice(t,1))},confirm:function(e,t,n,r){n=n||function(){},r=r||function(){};var i=ich["dialog-tpl"]({title:e,message:t});this.layout_root.append(i),i.dialog({resizable:!1,modal:!0,width:"20em",buttons:{Ja:function(){$(this).dialog("close"),n(),$(this).remove()},Nein:function(){$(this).dialog("close"),r(),$(this).remove()}}})},warn:function(e,t,n){n=n||function(){};var r=ich["dialog-tpl"]({title:e,message:t});this.layout_root.append(r),r.dialog({resizable:!1,modal:!0,width:"20em",buttons:{Ok:function(){$(this).dialog("close"),n(),$(this).remove()}}}).prev().addClass("ui-state-error")}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/CommandTriggerList.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The CommandTriggerList is a generic component for handling click events on a list of elements
 * and mapping them to specific commands.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.CommandTriggerList=midas.core.BaseObject.extend({log_prefix:"CommandTriggerList",container:null,command_items:null,init:function(e,t){this.parent(t),this.command_items={},this.container=e,this.container.find("li a").each(function(e,t){var n=this.parseCommandName(t);this.command_items[n]={name:n,item:$(t),callback:null}}.bind(this)),this.container.find("li a").click(function(e){return e.originalEvent._preventDefault=!0,$(e.target).parent("li").hasClass("inactive")||this.dispatchCommand(this.parseCommandName(e.target),e.target),!1}.bind(this)),this.options.commands&&this.registerCommands(this.options.commands)},registerCommands:function(e){for(var t in e)this.registerCommand(t,e[t])},registerCommand:function(e,t){if("function"!=typeof t)throw"The 'command' parameter must be a function. Invalid type given.";if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].callback=t},dispatchCommand:function(e,t){if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].callback&&this.command_items[e].callback(t)},parseCommandName:function(e){var t=$(e).attr("href");return 0!==t.indexOf("#")?t:t.substr(1)},enable:function(e){if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].item.parent("li").removeClass("inactive")},disable:function(e){if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].item.parent("li").addClass("inactive")}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/Request.js */

midas.core.Request=midas.core.BaseObject.extend({log_prefix:"Request",init:function(){this.parent()}}),midas.core.Request.curry=function(e,t,n,r){return function(i,s){$.ajax({url:e,dataType:r||"json",data:t||{},type:n||"get",success:i,error:s||function(){console&&console.log&&console.log("request failed and no error callback was provided.")}})}};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/core/EditController.js */

midas.core.EditController=midas.core.BaseObject.extend({log_prefix:"EditController",element:null,options:null,widgets:null,alerts:null,init:function(e,t){this.parent(),this.element=e,this.options=t,this.widgets={},this.initKnockoutProperties(),this.options.autobind&&(ko.applyBindings(this,this.element[0]),this.registerWidgets())},onFormSubmit:function(){var e=this,t=this.element.find("form"),n=function(t){if(!t||!t.state)throw"Unexpected response data structure received from midas backend (places save).";if("ok"===t.state){var n=e.element.find(".ticket-identifier").first(),r=n.val();n.val(t.data.ticket_id),e.addAlerts(t.messages||[],"success"),e.addAlerts(t.errors||[],"error"),r||(window.location.href+="?ticket="+t.data.ticket_id)}else"error"===t.state&&e.addAlerts(t.errors||[],"error")};midas.core.Request.curry(t.attr("action"),t.serialize(),"post")(n,n)},addAlerts:function(e,t){var n=this;for(var r=0;r<e.length;r++)this.addAlert({type:t,message:e[r]})},addAlert:function(e){var t=this;this.alerts.push(e),setTimeout(function(){-1!==t.alerts.indexOf(e)&&t.removeAlert(e)},1e4)},removeAlert:function(e){this.alerts.remove(e)},showAlert:function(e,t,n){var r=this;e.nodeType===1&&($(e).animate({opacity:1},{duration:600,queue:!1}),$(e).animate({"margin-top":"0px"},{duration:400,queue:!1}))},hideAlert:function(e,t,n){e.nodeType===1&&($(e).animate({opacity:0},{duration:300,queue:!1}),$(e).animate({"margin-top":"-55px"},{duration:600,queue:!1,complete:function(){$(e).remove()}}))},initKnockoutProperties:function(){this.alerts=ko.observableArray([])},registerWidgets:function(){var e=this;for(var t=0;t<this.options.widgets.length;t++){var n=this.options.widgets[t],r=midas.widgets.Widget.factory(n.selector,n.type);this.widgets[r.name]=r,r.on("notify::info",function(t){e.addAlert({type:"success",message:t})})}}}),midas.core.EditController.factory=function(e){e=$(e);var t=$.extend({},midas.core.EditController.DEFAULT_OPTIONS,JSON.parse(e.attr("data-edit-controller-options")||"{}"));return t.widgets=t.widgets||[],new midas.core.EditController(e,t)},midas.core.EditController.DEFAULT_OPTIONS={autobind:!0,view_name:"CoreItem",widgets:null};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/list.js */

midas=midas||{},midas.list=midas.list||{};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/WorkflowHandler.js */

midas.list.WorkflowHandler=midas.core.BaseObject.extend({log_prefix:"WorkflowHandler",urls:null,init:function(e){this.parent(),this.urls=e||{}},proceed:function(e,t){var n=this,r=this.urls.proceed.replace("{TICKET}",e.id),i={gate:t};return function(e,t){var n=midas.core.Request.curry(r,i,"POST");n(function(t){e(t)},function(e){t(e)})}},checkout:function(e){var t=this.urls.checkout.replace("{TICKET_ID}",e.id).replace("{TICKET_REV}",e.rev),n=midas.core.Request.curry(t),r=this;return function(e,t){e()}},release:function(e){var t=this.urls.release.replace("{TICKET}",e.id),n=midas.core.Request.curry(t),r=this;return function(e,t){n(function(n){"ok"===n.state?e(n):t(n)},function(e){t&&t(e)})}},run:function(e){window.location.href=this.urls.run.replace("{TICKET}",e.id)}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/Action.js */

midas.list.Action=midas.core.BaseObject.extend({log_prefix:"Action",payload:null,init:function(e){this.parent();if("function"!=typeof e)throw"The payload parameter must be a function and is reqired.";this.payload=e},execute:function(){var e=this;try{e.fire("start"),e.payload(function(){e.fire("success")},function(t){e.fire("failure",[t])})}catch(t){e.fire("failure",[t])}}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/ActionBatch.js */

midas.list.ActionBatch=midas.core.BaseObject.extend({log_prefix:"ActionBatch",actions:null,queue:null,progress_dialog:null,init:function(e){this.parent(),this.actions=e||[],this.queue=[],this.progress_dialog=$(".modal-batch-progress").clone().twodal({events:{keyboard:!1,show:!1,cancelbatch:function(){console.log("cancel batch clicked!")}}})},addAction:function(e){this.actions.push(e)},run:function(){for(var e=0;e<this.actions.length;e++){var t=this.actions[e];this.queue.push(t.on("start",this.onActionStarted.bind(this)).on("success",this.onActionSuccess.bind(this)).on("failure",function(e){this.onActionFailure(e)}.bind(this)).execute.bind(t))}return this.dequeue(),this.progress_dialog.twodal("show"),this},dequeue:function(){if(0===this.queue.length){this.progress_dialog.twodal("hide"),this.fire("complete");return}this.queue.shift()()},onActionStarted:function(){this.fire("started")},onActionSuccess:function(){var e=100/this.actions.length*(this.actions.length-this.queue.length);this.progress_dialog.find(".progress .bar").css("width",Math.round(e)+"%"),this.fire("progress"),this.dequeue()},onActionFailure:function(e){this.fire("error",[e]),this.dequeue()}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/ListItemModel.js */

midas.list.ListItemModel=midas.core.BaseObject.extend({log_prefix:"ListItemModel",data:null,display_data:null,css_classes:null,ticket:null,selected:null,init:function(e){this.parent(),this.data=e.data,this.ticket=e.ticket,this.display_data=e.display_data,this.css_classes=e.css_classes?e.css_classes.join(" "):"",this.selected=ko.observable(!1)}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/ListViewModel.js */

midas.list.ListViewModel=midas.core.BaseObject.extend({log_prefix:"ListViewModel",ctrl:null,workflow_handler:null,selected_items:null,all_selected:null,list_items:null,dont_toggle:null,has_selection:null,init:function(e,t){this.parent(),this.ctrl=e,this.workflow_handler=this.ctrl.workflow_handler,this.dont_toggle=!1,this.selected_items=ko.observableArray(),this.list_items=ko.observableArray(),this.all_selected=ko.observable(!1),this.all_selected.subscribe(this.toggleAllItemsSelection.bind(this));var n=this;this.has_selection=ko.computed(function(){return 0<n.selected_items().length}),this.initItems(t)},initItems:function(e){for(var t=0;t<e.length;t++)this.addItem(new midas.list.ListItemModel(e[t]))},addItem:function(e){this.list_items.push(e),e.selected.subscribe(this.onItemSelectionToggled.bind(this,e))},onItemSelectionToggled:function(e){e.selected()?this.selected_items.push(e):this.selected_items.remove(e);if(this.dont_toggle)return;this.dont_toggle=!0,this.all_selected(this.list_items().length===this.selected_items().length),this.dont_toggle=!1},toggleAllItemsSelection:function(e){if(this.dont_toggle)return;this.dont_toggle=!0,ko.utils.arrayForEach(this.list_items(),function(t){t.selected(e)}.bind(this)),this.dont_toggle=!1}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/list/ListController.js */

midas.list.ListController=midas.core.BaseObject.extend({log_prefix:"ListController",viewmodel:null,workflow_handler:null,search_widget:null,confirm_dialog:null,options:null,init:function(e){this.parent(),this.options=e},attach:function(){this.workflow_handler=new midas.list.WorkflowHandler(this.options.workflow_urls||{}),this.viewmodel=new midas.list.ListViewModel(this,JSON.parse($("input.list-data").val())),ko.applyBindings(this.viewmodel),this.search_widget=midas.widgets.Widget.factory(".search-widget","SearchWidget"),this.confirm_dialog=new midas.list.ListController.ConfirmDialog(".dialog-confirm")},proceed:function(e,t,n,r){var i=this;r=undefined===r?!0:r;var s=function(){i.createProceedBatch(!0===e?i.getSelectedItems():[t],n).run()};r?this.confirm_dialog.show(function(){i.confirm_dialog.hide(),s()}):s()},createProceedBatch:function(e,t){var n=new midas.list.ActionBatch;for(var r=0;r<e.length;r++){var i=e[r];n.addAction(new midas.list.Action(this.workflow_handler.proceed(i.ticket,t))),n.on("complete",function(){window.location.href=window.location.href})}return n},run:function(e,t){if(e)return;var n=this.workflow_handler.checkout(t.ticket),r=this,i=t.ticket;n(function(){r.workflow_handler.run(i)},function(){alert("Datensatz konnte nicht geÃ¶ffnet werden, da er bereits bearbeitet wird.")})},releaseTicket:function(e){var t=this.workflow_handler.release(e.ticket),n=this;t(function(){window.location.href=window.location.href},function(){alert("Ticket konnte nicht freigegeben werden.")})},getSelectedItems:function(){return this.viewmodel.selected_items()},ajaxCurry:function(e,t,n,r){return midas.core.Request.curry(e,t,n,r)}}),midas.list.ListController.create=function(e,t){e=$(e);if(0===e.length)throw"Unable to find element to create controller from. Looked for: "+e;var n=e.attr("data-controller");if(!n||!t[n])throw"Unable to resolve controller implementor: "+n;var r=e.attr("data-controller-options")||"{}",i=new t[n](JSON.parse(r));return i},midas.list.ListController.ConfirmDialog=midas.core.BaseObject.extend({log_prefix:"ConfirmDialog",confirm_prompt:null,init:function(e,t){this.parent();var n=this;this.categories_uri=t,this.confirm_prompt=$(e).twodal({show:!1,backdrop:!0,events:{confirm:this.onConfirmed.bind(this)}})},show:function(e){return this.removeAllListeners("confirmed"),this.on("confirmed",e),this.confirm_prompt.twodal("show"),this},hide:function(){return this.confirm_prompt.twodal("hide"),this},onConfirmed:function(){this.fire("confirmed")}});

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/widgets.js */

midas=midas||{},midas.widgets=midas.widgets||{};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/Widget.js */

midas.widgets.Widget=midas.core.BaseObject.extend({log_prefix:"Widget",element:null,options:null,init:function(e,t,n){this.parent(),n=n||function(){},this.element=e,this.options=t;var r=this.getTemplate(),i=this;if(r&&0<=r.indexOf(".html")){this.element.load(r,null,function(){i.initGui(),n()});return}r&&this.element.html(r),i.initGui(),n()},initGui:function(){this.initKnockoutProperties(),this.options.autobind&&ko.applyBindings(this,this.element[0])},initKnockoutProperties:function(){},getTemplate:function(){throw"Your widget does not implement a getTemplate method! Make sure to do so and return a valid html string."}}),midas.widgets.Widget.factory=function(e,t,n){var r=t.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")});r=r.charAt(0).toUpperCase()+r.slice(1),n=n||midas.widgets,e=$(e);var i=n[r];if(!i)throw"Unable to find widget implementor: "+r+" inside the given namespace: "+n.toString();var s=r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),o="data"+s+"-options",u;try{u=$.extend({},i.DEFAULT_OPTIONS||{},JSON.parse(e.attr(o)||"{}"))}catch(a){console.log(e,a);return}return new i(e,u)};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/SearchWidget.js */

midas.widgets.SearchWidget=midas.widgets.Widget.extend({log_prefix:"SearchWidget",form:null,filter_dialog:null,labels:null,sort_direction:null,sort_field:null,search_phrase:null,has_search_phrase:null,has_filter_dialog:null,search_url:"",init:function(e,t){this.parent(e,t),this.form=this.element.find("form").first(),this.filter_dialog=$(".modal-search-filter").twodal({show:!1,backdrop:!0}),this.filter_dialog.find(".widget").each(function(e,t){var n=$(t).attr("class").split(" ");for(var r=0;r<n.length;r++)css_class=n[r],css_class.match(/^widget-/g)&&midas.widgets.Widget.factory(t,css_class.replace("widget-",""))})},getTemplate:function(){return"static/widgets/SearchWidget.html"},initKnockoutProperties:function(){this.labels={search:ko.observable(this.options.labels.search),placeholder:ko.observable(this.options.labels.placeholder),filter:ko.observable(this.options.labels.filter)},this.search_phrase=ko.observable(this.options.search_phrase||""),this.sort_direction=ko.observable(this.options.sort_direction),this.sort_field=ko.observable(this.options.sort_field),this.search_url=ko.observable(this.options.search_url),this.has_filter_dialog=ko.observable(this.filter_dialog.length===1);var e=this;this.has_search_phrase=ko.computed(function(){return e.search_phrase().length>0})},search:function(){return!0},showFilterDialog:function(){return this.filter_dialog.twodal("show"),!1},resetSearchPhrase:function(){this.search_phrase(""),this.form.find(".search-query").focus()}}),midas.widgets.SearchWidget.DEFAULT_OPTIONS={autobind:!0,search_url:window.location.href,filter_url:"",search_phrase:"",sort_direction:"desc",sort_field:"identifier",labels:{search:"Suche",placeholder:"Suche",filter:"(Erweiterte Suche)"}};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/TagsList.js */

midas.widgets.TagsList=midas.widgets.Widget.extend({log_prefix:"TagsList",currently_valid:null,fieldname:null,tags:null,current_tag:null,has_focus:null,is_valid:null,max_reached:null,enabled:null,disabled:null,disabled_text:null,init:function(e,t,n){this.parent(e,t,n),this.currently_valid={}},getTemplate:function(){return"static/widgets/TagsList."+this.options.tpl+".html"},initGui:function(){this.parent(),this.options.autocomplete&&this.initTypeahead()},initKnockoutProperties:function(){var e=this,t=this.options.fieldname;this.fieldname=ko.observable(t+(1===this.options.max?"":"[]")),this.tags=ko.observableArray(this.options.tags||[]),this.current_tag=ko.observable(""),this.has_focus=ko.observable(!1),this.max_reached=ko.observable(!1),this.is_valid=ko.observable(!1),this.disabled=ko.observable(!1),this.disabled_text=ko.observable(""),this.enabled=ko.computed(function(){return e.is_valid()&&!e.max_reached()&&!e.disabled()}),this.current_tag.subscribe(function(t){e.validate()})},onInput:function(e,t){return 13===t.which?(this.is_valid()&&this.addCurrentTag(),!1):!0},busyStart:function(e){this.disabled(!0),this.disabled_text(e),console.log(e)},busyEnd:function(){this.disabled(!1),this.disabled_text("")},validate:function(){var e=this.current_tag(),t=!0;return this.options.autocomplete&&this.options.restrict_values&&(t="undefined"!=typeof this.currently_valid[e]),this.is_valid(t&&0<e.length&&(0===this.options.max||this.options.max>this.tags().length)),this.is_valid()},addCurrentTag:function(){var e=this.current_tag(),t=-1;for(var n=0;n<this.tags().length;n++)if(e===this.tags()[n].label){t=n;break}-1===t||this.options.allow_duplicates?(this.tags.push({label:e,value:this.options.autocomplete?this.currently_valid[e]:e}),this.current_tag(""),this.fire("tagschanged",[this.fieldname(),this.tags()])):this.highlightTag(t),this.has_focus(!0)},removeTag:function(e){this.tags.remove(e),this.has_focus(!0),this.fire("tagschanged",[this.fieldname(),this.tags()])},initTypeahead:function(){var e=this;this.element.find(".tagslist-input").typeahead({property:this.options.autocomplete_display_prop,source:this.fetchTypeAheadData.bind(this),items:this.options.autocomplete_limit,onselect:function(t){e.current_tag(t[e.options.autocomplete_display_prop]),e.is_valid()&&e.addCurrentTag()}})},fetchTypeAheadData:function(e,t){var n=this;if(1>=t.length){e.process([]),n.currently_valid={};return}var r=midas.core.Request.curry(n.options.autocomplete_uri.replace("{PHRASE}",t));r(function(t){var r=t.data;n.currently_valid={};for(var i=0;i<r.length;i++)n.currently_valid[r[i].name]=r[i].identifier;e.process(r)})},highlightTag:function(e){var t=!0,n=$(this.element.find(".tagslist-list li")[e]),r=function(){if(!t){n.removeClass("highlight-transition"),n.unbind("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",r);return}t=!1,n.removeClass("highlight")};n.bind("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",r),n.addClass("highlight-transition").addClass("highlight")}}),midas.widgets.TagsList.DEFAULT_OPTIONS={autobind:!0,max:0,fieldname:"tagslist[]",autocomplete:!1,autocomplete_uri:null,autocomplete_limit:20,autocomplete_display_prop:"name",autocomplete_value_prop:null,restrict_values:!0,allow_duplicates:!1,tpl:"Float"},midas.widgets.TagsList.TPL={FLOAT:"Float",STACK:"Stack",INLINE:"Inline"};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/KeyValuesList.js */

midas.widgets.KeyValuesList=midas.widgets.Widget.extend({log_prefix:"KeyValuesList",fieldname:null,keyvalues_pairs:null,init:function(e,t){this.parent(e,t);if(this.options.data)for(var n=0;n<this.options.data.length;n++){var r=this.options.data[n];this.keyvalues_pairs.push(new midas.widgets.KeyValuesList.KeyValuesPair(this.fieldname(),r.name,r.values))}},getTemplate:function(){return midas.widgets.KeyValuesList.TPL},addNewKeyValuesPair:function(){this.keyvalues_pairs.push(new midas.widgets.KeyValuesList.KeyValuesPair(this.fieldname(),"Eigentschaft/Name",["Eigentschaft/Wert 1","Eigenschaft/Wert 2"]))},removeKeyValuesPair:function(e){this.keyvalues_pairs.remove(e)},initKnockoutProperties:function(){this.fieldname=ko.observable(this.options.fieldname),this.keyvalues_pairs=ko.observableArray([])}}),midas.widgets.KeyValuesList.KeyValuesPair=midas.core.BaseObject.extend({log_prefix:"KeyValuesList.KeyValuesPair",fieldname:null,key:null,values:null,key_edit_enabled:null,key_input_focused:null,values_edit_enabled:null,values_string:null,values_input_focused:null,init:function(e,t,n){this.parent(),this.initKnockoutProperties(e,t,n)},enableKeyEditing:function(){this.key_edit_enabled(!0),this.key_input_focused(!0)},enableValuesEditing:function(){this.values_edit_enabled(!0),this.values_input_focused(!0),this.values_string(this.values().join(", "))},applyCurrentValues:function(){var e=$.trim(this.values_string()).split(",");this.values([]);for(var t=0;t<e.length;t++)this.values.push($.trim(e[t]))},handleFocus:function(e,t){var n=$(e.originalEvent.target);"select"===t&&n.select(),"setend"===t&&n.putCursorAtEnd()},onKeyInput:function(e,t){return 13===t.which?($(t.originalEvent.target).blur(),!1):!0},initKnockoutProperties:function(e,t,n){var r=this;this.key=ko.observable(t),this.fieldname=ko.computed(function(){return e+"["+r.key()+"][]"}),this.values=ko.observableArray(n),this.key_edit_enabled=ko.observable(!1),this.values_edit_enabled=ko.observable(!1),this.key_input_focused=ko.observable(!1),this.values_input_focused=ko.observable(!1),this.values_string=ko.observable(n.join(", ")),this.key_input_focused.subscribe(function(e){!1===e&&r.key_edit_enabled(!1)}),this.values_input_focused.subscribe(function(e){!1===e&&(r.values_edit_enabled(!1),r.applyCurrentValues())})}}),midas.widgets.KeyValuesList.DEFAULT_OPTIONS={autobind:!0,fieldname:"keyvalueslist"},midas.widgets.KeyValuesList.TPL='<a class="btn btn-success"    data-bind="click: addNewKeyValuesPair">  <i class="icon-white icon-plus " ></i> Neue Eigenschaft</a><br /><br /><table class="propertyExplorer table table-bordered table-striped">    <thead>        <tr>            <th>Name</th>            <th>Werte</th>            <th></th>        </tr>    </thead>    <tbody data-bind="foreach: keyvalues_pairs">        <tr>            <td class="propertyName">                <input class="key-values-list-keyinput" type="text"                       data-bind="value: key,                                  valueUpdate: \'afterkeydown\',                                  hasfocus: key_input_focused,                                  visible: key_edit_enabled,                                  event: {                                    focus: function(data, event) { handleFocus(event, \'select\'); },                                    keypress: onKeyInput                                  }" />                <span data-bind="text: key,                                 visible: !key_edit_enabled(),                                 click: enableKeyEditing">                </span>            </td>            <td class="propertyValues">                <textarea class="span8"                           data-bind="hasfocus: values_input_focused,                                      visible: values_edit_enabled,                                      value: values_string,                                     event: { focus: function(data, event) { handleFocus(event, \'setend\'); } }">                </textarea>                <ul data-bind="foreach: values,                                visible: !values_edit_enabled()">                    <li class="label label-info"                         data-bind="text: $data,                                    click: function() { $parent.enableValuesEditing(); }">                    </li>                </ul>            </td>            <td>                <i class="icon-remove"                    data-bind="click: function(data){ $parent.removeKeyValuesPair(data); }">                </i>            </td>        </tr>    </tbody></table><ul class="key-values-list-valuelist" style="display: none"     data-bind="foreach: keyvalues_pairs">    <div class="key-values-list-proplist"          data-bind="foreach: values">        <input type="hidden"                data-bind="attr: { name: $parent.fieldname },                           value: $data" />    </div></ul>';

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/TimeTable.js */

midas.widgets.TimeTable=midas.widgets.Widget.extend({log_prefix:"TimeTable",fieldname:null,time_spans:null,days_of_week:null,input_from:null,input_to:null,is_valid:null,init:function(e,t){this.parent(e,t);if(this.options.data)for(var n=0;n<this.options.data.length;n++){var r=this.options.data[n];this.time_spans.push(new midas.widgets.TimeTable.TimeSpan(r.from,r.to))}},getTemplate:function(){return midas.widgets.TimeTable.TPL},onInput:function(e,t){return 13===t.which?(this.is_valid()&&this.addCurrentTimeSpan(),!1):!0},validate:function(){return this.is_valid((new RegExp(this.options.time_pattern,"g")).test(this.input_from.time())&&(new RegExp(this.options.time_pattern,"g")).test(this.input_to.time())),this.is_valid()},addCurrentTimeSpan:function(){var e={day:this.input_from.day()[0],time:this.input_from.time()},t={day:this.input_to.day()[0],time:this.input_to.time()};this.time_spans.push(new midas.widgets.TimeTable.TimeSpan(e,t)),this.input_from.time(""),this.input_to.time(""),this.element.find(".tagslist-from-day").focus()},removeTimeSpan:function(e){this.time_spans.remove(e)},initKnockoutProperties:function(){var e=this;this.is_valid=ko.observable(!1),this.fieldname=ko.observable(this.options.fieldname),this.time_spans=ko.observableArray([]).indexed(),this.days_of_week=ko.observableArray(["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"]),this.input_from={day:ko.observable(["Montag"]),time:ko.observable("")},this.input_to={day:ko.observableArray(["Montag"]),time:ko.observable("")},this.input_from.time.subscribe(function(t){e.validate()}),this.input_to.time.subscribe(function(t){e.validate()})}}),midas.widgets.TimeTable.TimeSpan=midas.core.BaseObject.extend({log_prefix:"TimeSpan",from:null,to:null,init:function(e,t){this.parent(),this.from=e,this.to=t}}),midas.widgets.TimeTable.DEFAULT_OPTIONS={autobind:!0,fieldname:"timetable",time_pattern:"([01]?[0-9]|2[0-3]):[0-5][0-9]",data:null},midas.widgets.TimeTable.TPL='<div class="row-fluid"><div class="span3">  <div class="control-group">      <label>Von</label>      <div class="controls">          <select class="tagslist-from-day input-medium"                   data-bind="options: days_of_week,                              selectedOptions: input_from.day,                              event: { keypress: onInput }">          </select>          <input class="tagslist-from-time input-medium" placeholder="09:00"                  data-bind=\'value: input_from.time,                              valueUpdate: "afterkeydown",                              event: { keypress: onInput }\' />      </div>  </div></div><div class="span3">  <div class="control-group">      <label>Bis</label>      <div class="controls">          <select class="tagslist-to-day input-medium"                   data-bind="options: days_of_week,                              selectedOptions: input_to.day,                              event: { keypress: onInput }">          </select>          <input class="tagslist-to-time input-medium" placeholder="09:00"                  data-bind=\'value: input_to.time,                               valueUpdate: "afterkeydown",                               event: { keypress: onInput }\' />      </div>  </div></div><div class="span3">  <div class="control-group">      <label>ist dieser Ort geÃ¶ffnet.</label>  </div></div><div class="span3">  <button class="btn btn-success timetable-add" style="margin-top:32px"           data-bind="enable: is_valid,           click: addCurrentTimeSpan">hinzufÃ¼gen</button></div></div><div class="row-fluid">  <table class="table table-bordered table-striped">      <thead>          <tr>              <th>Von</th>              <th>Bis</th>              <th>Status</th>              <th></th>          </tr>      </thead>      <tbody data-bind="foreach: time_spans">          <tr>              <td><span data-bind="text: from.day"></span>, <span data-bind="text: from.time"></span> Uhr</td>              <td><span data-bind="text: to.day"></span>, <span data-bind="text: to.time"></span> Uhr</td>              <td>geÃ¶ffnet</td>              <td><i class="icon-remove"                      data-bind="click: function(data) { $parent.removeTimeSpan(data); }"></i>              </td>          </tr>      </tbody>  </table></div><ul class="timetable-valuelist" style="display: none">  <li data-bind="foreach: time_spans">      <input type="hidden" data-bind="attr: { name: $parent.fieldname() + \'[\'+$index()+\'][from][day]\' }, value: from.day" />      <input type="hidden" data-bind="attr: { name: $parent.fieldname()+\'[\'+$index()+\'][from][time]\' }, value: from.time" />      <input type="hidden" data-bind="attr: { name: $parent.fieldname()+\'[\'+$index()+\'][to][day]\' }, value: to.day" />      <input type="hidden" data-bind="attr: { name: $parent.fieldname()+\'[\'+$index()+\'][to][time]\' }, value: to.time" />  </li></ul>';

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/AutoComplete.js */

midas.widgets.AutoComplete=midas.widgets.Widget.extend({log_prefix:"AutoComplete",currently_valid:null,fieldname:null,current_entry:null,current_val:null,has_focus:null,is_valid:null,init:function(e,t){this.parent(e,t),this.currently_valid={},this.initTypeahead()},getTemplate:function(){return midas.widgets.AutoComplete.TPL},initKnockoutProperties:function(){var e=this;this.fieldname=ko.observable(this.options.fieldname),this.current_entry=ko.observable(""),this.current_val=ko.observable(""),this.has_focus=ko.observable(!1),this.is_valid=ko.observable(!1),this.current_entry.subscribe(function(t){var n=e.options.autocomplete_prop,r=e.options.autocomplete_value_prop||n,i=n!==r;i&&e.validate()?e.current_val(e.currently_valid[e.current_entry()]):i||e.current_val(e.current_entry())})},validate:function(){var e=this.current_entry();return this.is_valid("undefined"!=typeof this.currently_valid[e]),this.is_valid()},initTypeahead:function(){var e=this;this.element.find(".autocomp-input").typeahead({property:this.options.autocomplete_prop,source:this.fetchTypeAheadData.bind(this),items:this.options.autocomplete_limit,onselect:function(t){var n=e.options.autocomplete_prop,r=e.options.autocomplete_value_prop||n,i=n!==r;e.current_entry(t[e.options.autocomplete_prop]),e.is_valid()&&i&&e.current_val(t[r])}})},fetchTypeAheadData:function(e,t){var n=this;if(1>=t.length){e.process([]),n.currently_valid={};return}var r=midas.core.Request.curry(n.options.autocomplete_uri.replace("{PHRASE}",t));r(function(t){var r=n.options.autocomplete_prop,i=n.options.autocomplete_value_prop||r,s=t.data;n.currently_valid={};for(var o=0;o<s.length;o++)n.currently_valid[s[o][r]]=s[o][i];e.process(s)})}}),midas.widgets.AutoComplete.DEFAULT_OPTIONS={autobind:!0,autocomplete_uri:null,autocomplete_limit:20,autocomplete_prop:"name",autocomplete_value_prop:"identifier"},midas.widgets.AutoComplete.TPL='<input type="text" class="class8 typeahead autocomp-input"        data-bind=\'value: current_entry, valueUpdate: "afterkeydown"\' /><input type="hidden" class="class8 typeahead autocomp-input"        data-bind="value: current_val, attr: { name: fieldname }" />';

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/LocationWidget.js */

midas.widgets.LocationWidget=midas.widgets.Widget.extend({log_prefix:"LocationWidget",select_dialog:null,map_canvas:null,found_locations:null,fields:null,location:null,is_processing:null,init:function(e,t){this.parent(e,t)},getTemplate:function(){return"static/widgets/LocationWidget.html"},initGui:function(){this.map_canvas=this.element.find(".map-canvas").first(),this.parent(),this.location&&this.renderLocationOnMap()},initKnockoutProperties:function(){this.found_locations=ko.observableArray([]),this.is_processing=ko.observable(!1),this.location=new midas.widgets.LocationWidget.Location(this.options.location||{})},localize:function(){var e=midas.core.Request.curry(this.options.localize_url,this.location.values(),"get","json");this.is_processing(!0);var t=this;e(function(e){var n=e.location.items_count;t.found_locations([]);for(var r=0;r<n;r++){var i=e.location[r];i&&"AuÃerhalb Berlins"!=i["administrative district"]&&t.found_locations.push(midas.widgets.LocationWidget.Location.createFromServiceResp(i))}1<t.found_locations().length?t.showSelectLocationDialog():t.onLocationSelected(t.found_locations()[0]),t.is_processing(!1)},function(){t.is_processing(!1)})},onLocationSelected:function(e){if(!e)return;this.hideSelectLocationDialog(),this.location.longitude(e.longitude()),this.location.latitude(e.latitude()),this.location.postal_code(e.postal_code()),this.location.neighborhood(e.neighborhood()),this.location.district(e.district()),this.location.administrative_district(e.administrative_district()),this.location.street()||this.location.street(e.street()),this.location.city()||this.location.city(e.city()),this.location.housenumber()||this.location.housenumber(e.housenumber()),this.renderLocationOnMap()},showSelectLocationDialog:function(){this.select_dialog?this.select_dialog.twodal("show"):this.select_dialog=this.element.find(".dialog-select-location").twodal({show:!0,backdrop:!0})},hideSelectLocationDialog:function(){this.select_dialog&&this.select_dialog.twodal("hide")},renderLocationOnMap:function(){var e=new google.maps.LatLng(this.location.latitude(),this.location.longitude()),t=new google.maps.Marker({position:e,title:this.location.name()}),n={zoom:16,center:e,sensor:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},r=new google.maps.Map(this.map_canvas[0],n);t.setMap(r)}}),midas.widgets.LocationWidget.DEFAULT_OPTIONS={autobind:!0,localize_url:"",location:null},midas.widgets.LocationWidget.Location=midas.core.BaseObject.extend({name:null,street:null,housenumber:null,details:null,postal_code:null,city:null,administrative_district:null,district:null,neighborhood:null,longitude:null,latitude:null,init:function(e){this.name=ko.observable(e.name||""),this.street=ko.observable(e.street||""),this.housenumber=ko.observable(e.housenumber||""),this.details=ko.observable(e.details||""),this.city=ko.observable(e.city||""),this.postal_code=ko.observable(e.postalCode||""),this.administrative_district=ko.observable(e.administrativeDistrict||""),this.district=ko.observable(e.district||""),this.neighborhood=ko.observable(e.neighborhood||""),e.coordinates?(this.longitude=ko.observable(e.coordinates.lon||""),this.latitude=ko.observable(e.coordinates.lat||"")):(this.longitude=ko.observable(""),this.latitude=ko.observable(""))},values:function(){var e=["street","housenumber","city","postal_code"],t={};for(var n=0;n<e.length;n++){var r=this[e[n]]().trim();r&&(t[e[n]]=r)}return t}}),midas.widgets.LocationWidget.Location.createFromServiceResp=function(e){var t={district:e.district||null,administrativeDistrict:e["administrative district"]||null,neighborhood:e.neighborhood||null,postalCode:e.uzip||null,street:e.street||null};return e.latitude&&e.longitude&&(t.coordinates={lon:e.longitude,lat:e.latitude}),new midas.widgets.LocationWidget.Location(t)};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/DropdownWidget.js */

midas.widgets.DropdownWidget=midas.widgets.Widget.extend({log_prefix:"DropdownWidget",init:function(e,t){this.parent(e,t)},getTemplate:function(){return!1},initGui:function(){var e=this.element.find(this.options.text_input),t=this.element.find(this.options.select_input);t.change(function(){e.val($(this).find(":selected").text().trim())})}}),midas.widgets.DropdownWidget.DEFAULT_OPTIONS={autobind:!0,select_input:".value-select",text_input:".text-hidden"};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/AssetList.js */

/**
 * midas.widgets
 **/midas.widgets.AssetList=midas.widgets.Widget.extend({log_prefix:"AssetList",assets:null,fieldname:null,uploader:null,ichie:null,area_of_interest:null,aoi_enabled:null,start_active:null,init:function(e,t){this.parent(e,t)},getTemplate:function(){return"static/widgets/AssetList.html"},initGui:function(){this.parent();var e=this;this.ichie=window.IchieJs.create({main_container:this.element.find(".ichiejs-main-stage")[0],width:500,height:385,onSelectionChanged:function(t){var n;e.dialog&&(n=e.dialog.data("cur_asset"))&&e.applyAoiSelection(t)}}),this.element.find("ul").sortable().bind("sortupdate",function(){console.log("Yay, we've a new sorting!")})},initKnockoutProperties:function(){this.fieldname=ko.observable(this.options.fieldname),this.aoi_enabled=ko.observable(!1),this.start_active=ko.observable(!1),this.area_of_interest=ko.observableArray([0,0,0,0]);var e=this.options.assets||[];this.assets=ko.observableArray([]);for(var t=0;t<e.length;t++)this.assets.push(new midas.widgets.AssetList.Asset(e[t]));this.initUploader(),this.initDialog()},initUploader:function(){var e=this;this.uploader=new midas.widgets.AssetList.FileUploader({drop_target:this.element.find(".asset-list").first(),put_url:this.options.put_url}),this.uploader.on("upload::start",function(t){e.assets.push(t),e.options.max<=e.assets().length&&(e.uploader.enabled=!1)}),this.uploader.on("upload::progress",function(e,t){e.progress(t*100)}),this.uploader.on("upload::complete",function(t,n){e.element.find(".asset-list").sortable(),t.id(n.identifier),t.url(n.url)}),e.options.max<=e.assets().length&&(e.uploader.enabled=!1)},initDialog:function(){var e=this;this.dialog=$(".modal-edit-asset").first().twodal({backdrop:!0,show:!1,events:{onstoredata:function(){var t=e.dialog.data("cur_asset");t||alert("AssetList widget state is invalid, no current asset found!"),e.storeMetaData(t,{caption:e.dialog.twodal("promptVal",".input-caption"),copyright:e.dialog.twodal("promptVal",".input-copyright"),copyright_url:e.dialog.twodal("promptVal",".input-copyright-url"),aoi:e.aoi_enabled()?e.area_of_interest():null}),e.dialog.twodal("hide")}}})},onEditClicked:function(e){this.dialog.data("cur_asset",e),this.dialog.twodal("promptVal",".input-caption",e.caption()),this.dialog.twodal("promptVal",".input-copyright",e.copyright()),this.dialog.twodal("promptVal",".input-copyright-url",e.copyright_url());var t=this;this.ichie.launch(e.url(),function(){e.aoi?(t.ichie.setSelection({left:e.aoi[0],top:e.aoi[1],right:e.aoi[0]+e.aoi[2],bottom:e.aoi[1]+e.aoi[3]}),t.aoi_enabled(!0),t.start_active(!1),t.start_active(!0),t.ichie.showSelection()):(t.ichie.setSelection({left:60,top:60,right:200,bottom:200}),t.aoi_enabled(!1),t.start_active(!0),t.start_active(!1),t.ichie.hideSelection())}),this.dialog.twodal("show")},onDeleteClicked:function(e){this.assets.remove(e),this.options.max>this.assets().length&&(this.uploader.enabled=!0)},storeMetaData:function(e,t){var n={aid:e.id(),metaData:t},r=midas.core.Request.curry(this.options.post_url,n,"post");e.is_loading(!0),r(function(t){var n=t.data.asset.metaData;e.caption(n.caption||""),e.copyright_url(n.copyright_url||""),e.copyright(n.copyright||""),e.setAoi(n.aoi),e.is_loading(!1)},function(t){e.is_loading(!1)})},toggleAoiSelection:function(){this.aoi_enabled(!this.aoi_enabled()),this.ichie[this.aoi_enabled()?"showSelection":"hideSelection"]()},applyAoiSelection:function(e){this.area_of_interest.splice(0,4,Math.floor(e.left),Math.ceil(e.top),Math.ceil(e.right-e.left),Math.ceil(e.bottom-e.top))}}),midas.widgets.AssetList.Asset=midas.core.BaseObject.extend({id:null,url:null,name:null,caption:null,caption_txt:null,copyright:null,copyright_txt:null,copyright_url:null,copyright_url_txt:null,aoi:null,aoi_enabled:null,has_id:null,progress:null,is_loading:null,init:function(e){this.parent(),this.initKnockoutProperties(e),this.setAoi(e.aoi)},setAoi:function(e){if($.isArray(e)){this.aoi=[];for(var t=0;t<4;t++)this.aoi[t]=+e[t]}},initKnockoutProperties:function(e){this.id=ko.observable(e.id||""),this.is_loading=ko.observable(!1),this.url=ko.observable(e.url),this.name=ko.observable(e.name),this.caption=ko.observable(e.caption||""),this.aoi_enabled=ko.observable(!!e.aoi),this.progress=ko.observable(0);var t=this;this.caption_txt=ko.computed(function(){return 0===t.caption().length?" - ":t.caption()}),this.copyright=ko.observable(e.copyright||""),this.copyright_txt=ko.computed(function(){return 0===t.copyright().length?" - ":t.copyright()}),this.copyright_url=ko.observable(e.copyright_url||""),this.copyright_url_txt=ko.computed(function(){return 0===t.copyright_url().length?" - ":t.copyright_url()}),this.has_id=ko.computed(function(){return!!t.id()})}}),midas.widgets.AssetList.FileUploader=midas.core.BaseObject.extend({log_prefix:"FileUploader",put_url:null,enabled:null,drop_target:null,queue:null,is_running:null,init:function(e){this.parent(),this.queue=[],this.enabled=!0,this.put_url=e.put_url,this.is_running=!1,this.drop_target=$(e.drop_target),this.initDragEvents()},initDragEvents:function(){var e=this,t=this.drop_target[0],n=$(document.body);document.addEventListener("dragenter",function(t){t.stopPropagation(),t.preventDefault(),e.enabled&&n.addClass("drag-enabled")},!1),document.addEventListener("dragexit",function(e){e.stopPropagation(),e.preventDefault(),n.removeClass("drag-enabled")},!1),document.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),n.removeClass("drag-enabled")},!1),document.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),t.addEventListener("dragover",this.dragHover.bind(this),!1),t.addEventListener("drop",this.dragDropped.bind(this),!1)},dragHover:function(e){e.stopPropagation(),e.preventDefault()},dragDropped:function(e){$(document.body).removeClass("drag-enabled");if(this.enabled){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;0<t.length&&this.handleFiles(t)}},handleFiles:function(e){var t=this;for(i=0;i<e.length;i++)this.queue.push(e[i]);this.is_running||this.shiftQueue()},handleReaderProgress:function(e){e.lengthComputable&&this.fire("readfile::progress",[e.loaded/e.total])},handleReaderLoadComplete:function(e,t){this.fire("readfile::complete",[t]),this.uploadFile(t,e.target.result)},shiftQueue:function(){var e=this;if(!this.enabled){this.queue=[],this.is_running=!1;return}var t=this.queue.shift();if(t){this.is_running=!0;var n=new FileReader;n.onloadend=function(n){e.handleReaderLoadComplete(n,t)},n.onprogress=function(n){e.handleReaderProgress(n,t)},n.readAsDataURL(t)}else this.is_running=!1},uploadFile:function(e,t){var n=this,r=new FormData;r.append("asset",e);var i=new midas.widgets.AssetList.Asset({name:e.name,url:t});xhr=new XMLHttpRequest,xhr.onload=function(e){if(xhr.status==200){var t=JSON.parse(xhr.responseText);n.fire("upload::complete",[i,t.data]),n.shiftQueue()}},xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&n.fire("upload::progress",[i,e.loaded/e.total])},!1),this.fire("upload::start",[i]),xhr.open("post",this.put_url,!0),xhr.setRequestHeader("Accept","application/json"),xhr.send(r)}}),midas.widgets.AssetList.DEFAULT_OPTIONS={autobind:!0,fieldname:"",assets:null,post_url:"",put_url:"",max:50};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/ClipboardWidget.js */

midas.widgets.ClipboardWidget=midas.widgets.Widget.extend({log_prefix:"AutoComplete",clipboard_client:null,init:function(e,t){this.parent(e,t),this.options.copy_trigger_el=this.element.find(this.options.copy_trigger_el).first(),this.options.copy_text_el=this.element.find(this.options.copy_text_el).first(),this.clipboard_client=new ZeroClipboard.Client,this.clipboard_client.setText(this.options.copy_text),this.clipboard_client.glue(this.options.copy_trigger_el[0]),this.clipboard_client.addEventListener("onComplete",this.onCopiedToClipboard.bind(this))},getTemplate:function(){return null},onCopiedToClipboard:function(e,t){this.fire("notify::info",['Der Text: "'+t+'" wurde in die Zwischenablage kopiert.'])}}),midas.widgets.ClipboardWidget.DEFAULT_OPTIONS={autobind:!0,copy_text:"",copy_trigger_el:null,copy_trigger_el:null};

/* /home/vagrant/projects/honeybee/app/resources/scripts/midas/widgets/EmbedCodeWidget.js */

midas.widgets.EmbedCodeWidget=midas.widgets.Widget.extend({log_prefix:"EmbedCodeWidget",fieldname:null,embed_code:null,preview_code:null,is_valid:null,init:function(e,t){this.parent(e,t)},getTemplate:function(){return"static/widgets/EmbedCodeWidget.html"},initKnockoutProperties:function(){var e=this;this.fieldname=ko.observable(this.options.fieldname),this.embed_code=ko.observable(this.options.embed_code||""),this.preview_code=ko.observable(""),this.is_valid=ko.computed(function(){return e.embed_code().match(/<iframe.*?<\/iframe>/ig)?(e.preview_code(e.embed_code()),!0):(e.preview_code(""),!1)})}}),midas.widgets.EmbedCodeWidget.DEFAULT_OPTIONS={autobind:!0,fieldname:null,embed_code:null};