

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/jquery-1.8.2.min.js */

/*! jQuery v1.8.2 jquery.com | jquery.org/license */(function(e,t){function n(e){var t=dt[e]={};return Y.each(e.split(tt),function(e,n){t[n]=!0}),t}function r(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(mt,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:vt.test(r)?Y.parseJSON(r):r}catch(s){}Y.data(e,n,r)}else r=t}return r}function i(e){var t;for(t in e){if(t==="data"&&Y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function s(){return!1}function o(){return!0}function u(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function a(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function f(e,t,n){t=t||0;if(Y.isFunction(t))return Y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return Y.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=Y.grep(e,function(e){return e.nodeType===1});if(Bt.test(t))return Y.filter(t,r,!n);t=Y.filter(t,r)}return Y.grep(e,function(e,r){return Y.inArray(e,t)>=0===n})}function l(e){var t=It.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(t.nodeType!==1||!Y.hasData(e))return;var n,r,i,s=Y._data(e),o=Y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)Y.event.add(t,n,u[n][r])}o.data&&(o.data=Y.extend({},o.data))}function p(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.support.html5Clone&&e.innerHTML&&!Y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Kt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Y.expando)}function d(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function v(e){Kt.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=yn.length;while(i--){t=yn[i]+n;if(t in e)return t}return r}function g(e,t){return e=t||e,Y.css(e,"display")==="none"||!Y.contains(e.ownerDocument,e)}function y(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=Y._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&g(n)&&(i[s]=Y._data(n,"olddisplay",S(n.nodeName)))):(r=nn(n,"display"),!i[s]&&r!=="none"&&Y._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function b(e,t,n){var r=cn.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function w(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=Y.css(e,n+gn[i],!0)),r?(n==="content"&&(s-=parseFloat(nn(e,"padding"+gn[i]))||0),n!=="margin"&&(s-=parseFloat(nn(e,"border"+gn[i]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+gn[i]))||0,n!=="padding"&&(s+=parseFloat(nn(e,"border"+gn[i]+"Width"))||0));return s}function E(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=nn(e,t);if(r<0||r==null)r=e.style[t];if(hn.test(r))return r;i=s&&(Y.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+w(e,t,n||(s?"border":"content"),i)+"px"}function S(e){if(dn[e])return dn[e];var t=Y("<"+e+">").appendTo(R.body),n=t.css("display");t.remove();if(n==="none"||n===""){rn=R.body.appendChild(rn||Y.extend(R.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!sn||!rn.createElement)sn=(rn.contentWindow||rn.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close();t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),R.body.removeChild(rn)}return dn[e]=n,n}function x(e,t,n,r){var i;if(Y.isArray(t))Y.each(t,function(t,i){n||En.test(e)?r(e,i):x(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&Y.type(t)==="object")for(i in t)x(e+"["+i+"]",t[i],n,r);else r(e,t)}function T(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(tt),u=0,a=o.length;if(Y.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function N(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===jn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=N(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=N(e,n,r,i,"*",o)),u}function C(e,n){var r,i,s=Y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&Y.extend(!0,e,i)}function k(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function L(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function A(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function M(){return setTimeout(function(){Jn=t},0),Jn=Y.now()}function _(e,t){Y.each(t,function(t,n){var r=(er[t]||[]).concat(er["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function D(e,t,n){var r,i=0,s=0,o=Zn.length,u=Y.Deferred().always(function(){delete a.elem}),a=function(){var t=Jn||M(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:Y.extend({},t),opts:Y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Jn||M(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=Y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;P(l,f.opts.specialEasing);for(;i<o;i++){r=Zn[i].call(f,e,l,f.opts);if(r)return r}return _(f,l),Y.isFunction(f.opts.start)&&f.opts.start.call(e,f),Y.fx.timer(Y.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function P(e,t){var n,r,i,s,o;for(n in e){r=Y.camelCase(n),i=t[r],s=e[n],Y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=Y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function H(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],v=e.nodeType&&g(e);n.queue||(f=Y._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,Y.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],Y.css(e,"display")==="inline"&&Y.css(e,"float")==="none"&&(!Y.support.inlineBlockNeedsLayout||S(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",Y.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Qn.exec(s)){delete t[r];if(s===(v?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=Y._data(e,"fxshow")||Y._data(e,"fxshow",{}),v?Y(e).show():c.done(function(){Y(e).hide()}),c.done(function(){var t;Y.removeData(e,"fxshow",!0);for(t in p)Y.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,v?u[i]:0),p[i]=u[i]||Y.style(e,i),i in u||(u[i]=a.start,v&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function B(e,t,n,r,i){return new B.prototype.init(e,t,n,r,i)}function j(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=gn[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function F(e){return Y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var I,q,R=e.document,U=e.location,z=e.navigator,W=e.jQuery,X=e.$,V=Array.prototype.push,$=Array.prototype.slice,J=Array.prototype.indexOf,K=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,G=String.prototype.trim,Y=function(e,t){return new Y.fn.init(e,t,I)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,it=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,ot=/(?:^|:|,)(?:\s*\[)+/g,ut=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,at=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ft=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return(t+"").toUpperCase()},ht=function(){R.addEventListener?(R.removeEventListener("DOMContentLoaded",ht,!1),Y.ready()):R.readyState==="complete"&&(R.detachEvent("onreadystatechange",ht),Y.ready())},pt={};Y.fn=Y.prototype={constructor:Y,init:function(e,n,r){var i,s,o,u;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=rt.exec(e);if(i&&(i[1]||!n)){if(i[1])return n=n instanceof Y?n[0]:n,u=n&&n.nodeType?n.ownerDocument||n:R,e=Y.parseHTML(i[1],u,!0),it.test(i[1])&&Y.isPlainObject(n)&&this.attr.call(e,n,!0),Y.merge(this,e);s=R.getElementById(i[2]);if(s&&s.parentNode){if(s.id!==i[2])return r.find(e);this.length=1,this[0]=s}return this.context=R,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return Y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return $.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=Y.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return Y.each(this,e,t)},ready:function(e){return Y.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack($.apply(this,arguments),"slice",$.call(arguments).join(","))},map:function(e){return this.pushStack(Y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:V,sort:[].sort,splice:[].splice},Y.fn.init.prototype=Y.fn,Y.extend=Y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!Y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(Y.isPlainObject(i)||(s=Y.isArray(i)))?(s?(s=!1,o=r&&Y.isArray(r)?r:[]):o=r&&Y.isPlainObject(r)?r:{},u[n]=Y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},Y.extend({noConflict:function(t){return e.$===Y&&(e.$=X),t&&e.jQuery===Y&&(e.jQuery=W),Y},isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){if(e===!0?--Y.readyWait:Y.isReady)return;if(!R.body)return setTimeout(Y.ready,1);Y.isReady=!0;if(e!==!0&&--Y.readyWait>0)return;q.resolveWith(R,[Y]),Y.fn.trigger&&Y(R).trigger("ready").off("ready")},isFunction:function(e){return Y.type(e)==="function"},isArray:Array.isArray||function(e){return Y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):pt[K.call(e)]||"object"},isPlainObject:function(e){if(!e||Y.type(e)!=="object"||e.nodeType||Y.isWindow(e))return!1;try{if(e.constructor&&!Q.call(e,"constructor")&&!Q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||Q.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||R,(r=it.exec(e))?[t.createElement(r[1])]:(r=Y.buildFragment([e],t,n?null:[]),Y.merge([],(r.cacheable?Y.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=Y.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(st.test(t.replace(ut,"@").replace(at,"]").replace(ot,"")))return(new Function("return "+t))();Y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&Y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ft,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||Y.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:G&&!G.call("﻿ ")?function(e){return e==null?"":G.call(e)}:function(e){return e==null?"":(e+"").replace(nt,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=Y.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||Y.isWindow(e)?V.call(r,e):Y.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(J)return J.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof Y||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||Y.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),Y.isFunction(e)?(i=$.call(arguments,2),s=function(){return e.apply(n,i.concat($.call(arguments)))},s.guid=e.guid=e.guid||Y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)Y.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&Y.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(Y(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),Y.ready.promise=function(t){if(!q){q=Y.Deferred();if(R.readyState==="complete")setTimeout(Y.ready,1);else if(R.addEventListener)R.addEventListener("DOMContentLoaded",ht,!1),e.addEventListener("load",Y.ready,!1);else{R.attachEvent("onreadystatechange",ht),e.attachEvent("onload",Y.ready);var n=!1;try{n=e.frameElement==null&&R.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!Y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Y.ready()}}()}}return q.promise(t)},Y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),I=Y(R);var dt={};Y.Callbacks=function(e){e=typeof e=="string"?dt[e]||n(e):Y.extend({},e);var r,i,s,o,u,a,f=[],l=!e.once&&[],c=function(t){r=e.memory&&t,i=!0,a=o||0,o=0,u=f.length,s=!0;for(;f&&a<u;a++)if(f[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}s=!1,f&&(l?l.length&&c(l.shift()):r?f=[]:h.disable())},h={add:function(){if(f){var t=f.length;(function n(t){Y.each(t,function(t,r){var i=Y.type(r);i==="function"&&(!e.unique||!h.has(r))?f.push(r):r&&r.length&&i!=="string"&&n(r)})})(arguments),s?u=f.length:r&&(o=t,c(r))}return this},remove:function(){return f&&Y.each(arguments,function(e,t){var n;while((n=Y.inArray(t,f,n))>-1)f.splice(n,1),s&&(n<=u&&u--,n<=a&&a--)}),this},has:function(e){return Y.inArray(e,f)>-1},empty:function(){return f=[],this},disable:function(){return f=l=r=t,this},disabled:function(){return!f},lock:function(){return l=t,r||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],f&&(!i||l)&&(s?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},Y.extend({Deferred:function(e){var t=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Y.Deferred(function(n){Y.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](Y.isFunction(o)?function(){var e=o.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?Y.extend(e,r):r}},i={};return r.pipe=r.then,Y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=$.call(arguments),r=n.length,i=r!==1||e&&Y.isFunction(e.promise)?r:0,s=i===1?e:Y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?$.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&Y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),Y.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h=R.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};i=R.createElement("select"),s=i.appendChild(R.createElement("option")),o=h.getElementsByTagName("input")[0],t={leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:h.className!=="t",enctype:!!R.createElement("form").enctype,html5Clone:R.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:R.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}!h.addEventListener&&h.attachEvent&&h.fireEvent&&(h.attachEvent("onclick",c=function(){t.noCloneEvent=!1}),h.cloneNode(!0).fireEvent("onclick"),h.detachEvent("onclick",c)),o=R.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),o.setAttribute("name","t"),h.appendChild(o),u=R.createDocumentFragment(),u.appendChild(h.lastChild),t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,u.removeChild(o),u.appendChild(h);if(h.attachEvent)for(f in{submit:!0,change:!0,focusin:!0})a="on"+f,l=a in h,l||(h.setAttribute(a,"return;"),l=typeof h[a]=="function"),t[f+"Bubbles"]=l;return Y(function(){var n,r,i,s,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",u=R.getElementsByTagName("body")[0];if(!u)return;n=R.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",u.insertBefore(n,u.firstChild),r=R.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=r.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",l=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=l&&i[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",s=R.createElement("div"),s.style.cssText=r.style.cssText=o,s.style.marginRight=s.style.width="0",r.style.width="1px",r.appendChild(s),t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),u.removeChild(n),n=r=i=s=null}),u.removeChild(h),n=r=i=s=o=u=h=null,t}();var vt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,mt=/([A-Z])/g;Y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?Y.cache[e[Y.expando]]:e[Y.expando],!!e&&!i(e)},data:function(e,n,r,i){if(!Y.acceptData(e))return;var s,o,u=Y.expando,a=typeof n=="string",f=e.nodeType,l=f?Y.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=Y.deletedIds.pop()||Y.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=Y.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=Y.extend(l[c],n):l[c].data=Y.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[Y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[Y.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!Y.acceptData(e))return;var r,s,o,u=e.nodeType,a=u?Y.cache:e,f=u?e[Y.expando]:Y.expando;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){Y.isArray(t)||(t in r?t=[t]:(t=Y.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(s=0,o=t.length;s<o;s++)delete r[t[s]];if(!(n?i:Y.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!i(a[f]))return}u?Y.cleanData([e],!0):Y.support.deleteExpando||a!=a.window?delete a[f]:a[f]=null},_data:function(e,t,n){return Y.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&Y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),Y.fn.extend({data:function(e,n){var i,s,o,u,a,f=this[0],l=0,c=null;if(e===t){if(this.length){c=Y.data(f);if(f.nodeType===1&&!Y._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")||(u=Y.camelCase(u.substring(5)),r(f,u,c[u]));Y._data(f,"parsedAttrs",!0)}}return c}return typeof e=="object"?this.each(function(){Y.data(this,e)}):(i=e.split(".",2),i[1]=i[1]?"."+i[1]:"",s=i[1]+"!",Y.access(this,function(n){if(n===t)return c=this.triggerHandler("getData"+s,[i[0]]),c===t&&f&&(c=Y.data(f,e),c=r(f,e,c)),c===t&&i[1]?this.data(i[0]):c;i[1]=n,this.each(function(){var t=Y(this);t.triggerHandler("setData"+s,i),Y.data(this,e,n),t.triggerHandler("changeData"+s,i)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){Y.removeData(this,e)})}}),Y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y._data(e,t),n&&(!r||Y.isArray(n)?r=Y._data(e,t,Y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Y.queue(e,t),r=n.length,i=n.shift(),s=Y._queueHooks(e,t),o=function(){Y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y._data(e,n)||Y._data(e,n,{empty:Y.Callbacks("once memory").add(function(){Y.removeData(e,t+"queue",!0),Y.removeData(e,n,!0)})})}}),Y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?Y.queue(this[0],e):n===t?this:this.each(function(){var t=Y.queue(this,e,n);Y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&Y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},delay:function(e,t){return e=Y.fx?Y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=Y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=Y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var gt,yt,bt,wt=/[\t\r\n]/g,Et=/\r/g,St=/^(?:button|input)$/i,xt=/^(?:button|input|object|select|textarea)$/i,Tt=/^a(?:rea|)$/i,Nt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ct=Y.support.getSetAttribute;Y.fn.extend({attr:function(e,t){return Y.access(this,Y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})},prop:function(e,t){return Y.access(this,Y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=Y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(Y.isFunction(e))return this.each(function(t){Y(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(tt);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=Y.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(Y.isFunction(e))return this.each(function(t){Y(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(tt);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(wt," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?Y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return Y.isFunction(e)?this.each(function(n){Y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=Y(this),u=t,a=e.split(tt);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&Y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":Y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=Y.valHooks[s.type]||Y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(Et,""):r==null?"":r);return}return i=Y.isFunction(e),this.each(function(r){var s,o=Y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":Y.isArray(s)&&(s=Y.map(s,function(e){return e==null?"":e+""})),n=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),Y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(Y.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!Y.nodeName(i.parentNode,"optgroup"))){t=Y(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?Y(u[s]).val():o},set:function(e,t){var n=Y.makeArray(t);return Y(e).find("option").each(function(){this.selected=Y.inArray(Y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&Y.isFunction(Y.fn[n]))return Y(e)[n](r);if(typeof e.getAttribute=="undefined")return Y.prop(e,n,r);u=a!==1||!Y.isXMLDoc(e),u&&(n=n.toLowerCase(),o=Y.attrHooks[n]||(Nt.test(n)?yt:gt));if(r!==t){if(r===null){Y.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(tt);for(;o<r.length;o++)i=r[o],i&&(n=Y.propFix[i]||i,s=Nt.test(i),s||Y.attr(e,i,""),e.removeAttribute(Ct?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(St.test(e.nodeName)&&e.parentNode)Y.error("type property can't be changed");else if(!Y.support.radioValue&&t==="radio"&&Y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return gt&&Y.nodeName(e,"button")?gt.get(e,t):t in e?e.value:null},set:function(e,t,n){if(gt&&Y.nodeName(e,"button"))return gt.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!Y.isXMLDoc(e),o&&(n=Y.propFix[n]||n,s=Y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):xt.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var r,i=Y.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?Y.removeAttr(e,n):(r=Y.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},Ct||(bt={name:!0,id:!0,coords:!0},gt=Y.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(bt[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=R.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},Y.each(["width","height"],function(e,t){Y.attrHooks[t]=Y.extend(Y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),Y.attrHooks.contenteditable={get:gt.get,set:function(e,t,n){t===""&&(t="false"),gt.set(e,t,n)}}),Y.support.hrefNormalized||Y.each(["href","src","width","height"],function(e,n){Y.attrHooks[n]=Y.extend(Y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),Y.support.style||(Y.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e
.style.cssText=t+""}}),Y.support.optSelected||(Y.propHooks.selected=Y.extend(Y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),Y.support.enctype||(Y.propFix.enctype="encoding"),Y.support.checkOn||Y.each(["radio","checkbox"],function(){Y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]=Y.extend(Y.valHooks[this],{set:function(e,t){if(Y.isArray(t))return e.checked=Y.inArray(Y(e).val(),t)>=0}})});var kt=/^(?:textarea|input|select)$/i,Lt=/^([^\.]*|)(?:\.(.+)|)$/,At=/(?:^|\s)hover(\.\S+|)\b/,Ot=/^key/,Mt=/^(?:mouse|contextmenu)|click/,_t=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){return Y.event.special.hover?e:e.replace(At,"mouseenter$1 mouseleave$1")};Y.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=Y._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=Y.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof Y=="undefined"||!!e&&Y.event.triggered===e.type?t:Y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=Y.trim(Dt(n)).split(" ");for(f=0;f<n.length;f++){l=Lt.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),m=Y.event.special[c]||{},c=(s?m.delegateType:m.bindType)||c,m=Y.event.special[c]||{},p=Y.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&Y.expr.match.needsContext.test(s),namespace:h.join(".")},d),v=a[c];if(!v){v=a[c]=[],v.delegateCount=0;if(!m.setup||m.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?v.splice(v.delegateCount++,0,p):v.push(p),Y.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=Y.hasData(e)&&Y._data(e);if(!m||!(h=m.events))return;t=Y.trim(Dt(t||"")).split(" ");for(s=0;s<t.length;s++){o=Lt.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)Y.event.remove(e,u+t[s],n,r,!0);continue}p=Y.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)v=d[c],(i||a===v.origType)&&(!n||n.guid===v.guid)&&(!f||f.test(v.namespace))&&(!r||r===v.selector||r==="**"&&v.selector)&&(d.splice(c--,1),v.selector&&d.delegateCount--,p.remove&&p.remove.call(e,v));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,m.handle)===!1)&&Y.removeEvent(e,u,m.handle),delete h[u])}Y.isEmptyObject(h)&&(delete m.handle,Y.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o,u,a,f,l,c,h,p,d,v,m=n.type||n,g=[];if(_t.test(m+Y.event.triggered))return;m.indexOf("!")>=0&&(m=m.slice(0,-1),u=!0),m.indexOf(".")>=0&&(g=m.split("."),m=g.shift(),g.sort());if((!i||Y.event.customEvent[m])&&!Y.event.global[m])return;n=typeof n=="object"?n[Y.expando]?n:new Y.Event(m,n):new Y.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=u,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"";if(!i){o=Y.cache;for(a in o)o[a].events&&o[a].events[m]&&Y.event.trigger(n,r,o[a].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?Y.makeArray(r):[],r.unshift(n),h=Y.event.special[m]||{};if(h.trigger&&h.trigger.apply(i,r)===!1)return;d=[[i,h.bindType||m]];if(!s&&!h.noBubble&&!Y.isWindow(i)){v=h.delegateType||m,f=_t.test(v+m)?i:i.parentNode;for(l=i;f;f=f.parentNode)d.push([f,v]),l=f;l===(i.ownerDocument||R)&&d.push([l.defaultView||l.parentWindow||e,v])}for(a=0;a<d.length&&!n.isPropagationStopped();a++)f=d[a][0],n.type=d[a][1],p=(Y._data(f,"events")||{})[n.type]&&Y._data(f,"handle"),p&&p.apply(f,r),p=c&&f[c],p&&Y.acceptData(f)&&p.apply&&p.apply(f,r)===!1&&n.preventDefault();return n.type=m,!s&&!n.isDefaultPrevented()&&(!h._default||h._default.apply(i.ownerDocument,r)===!1)&&(m!=="click"||!Y.nodeName(i,"a"))&&Y.acceptData(i)&&c&&i[m]&&(m!=="focus"&&m!=="blur"||n.target.offsetWidth!==0)&&!Y.isWindow(i)&&(l=i[c],l&&(i[c]=null),Y.event.triggered=m,i[m](),Y.event.triggered=t,l&&(i[c]=l)),n.result}return},dispatch:function(n){n=Y.event.fix(n||e.event);var r,i,s,o,u,a,f,l,c,h,p=(Y._data(this,"events")||{})[n.type]||[],d=p.delegateCount,v=$.call(arguments),m=!n.exclusive&&!n.namespace,g=Y.event.special[n.type]||{},y=[];v[0]=n,n.delegateTarget=this;if(g.preDispatch&&g.preDispatch.call(this,n)===!1)return;if(d&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<d;r++)l=p[r],c=l.selector,u[c]===t&&(u[c]=l.needsContext?Y(c,this).index(s)>=0:Y.find(c,this,null,[s]).length),u[c]&&f.push(l);f.length&&y.push({elem:s,matches:f})}p.length>d&&y.push({elem:this,matches:p.slice(d)});for(r=0;r<y.length&&!n.isPropagationStopped();r++){a=y[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){l=a.matches[i];if(m||!n.namespace&&!l.namespace||n.namespace_re&&n.namespace_re.test(l.namespace))n.data=l.data,n.handleObj=l,o=((Y.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,v),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return g.postDispatch&&g.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||R,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,n,r=e,i=Y.event.fixHooks[e.type]||{},s=i.props?this.props.concat(i.props):this.props;e=Y.Event(r);for(t=s.length;t;)n=s[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||R),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){Y.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=Y.extend(new Y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Y.event.trigger(i,null,t):Y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Y.event.handle=Y.event.dispatch,Y.removeEvent=R.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},Y.Event=function(e,t){if(!(this instanceof Y.Event))return new Y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:s):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),this[Y.expando]=!0},Y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},Y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!Y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),Y.support.submitBubbles||(Y.event.special.submit={setup:function(){if(Y.nodeName(this,"form"))return!1;Y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=Y.nodeName(n,"input")||Y.nodeName(n,"button")?n.form:t;r&&!Y._data(r,"_submit_attached")&&(Y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),Y._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Y.nodeName(this,"form"))return!1;Y.event.remove(this,"._submit")}}),Y.support.changeBubbles||(Y.event.special.change={setup:function(){if(kt.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")Y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,e,!0)});return!1}Y.event.add(this,"beforeactivate._change",function(e){var t=e.target;kt.test(t.nodeName)&&!Y._data(t,"_change_attached")&&(Y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&Y.event.simulate("change",this.parentNode,e,!0)}),Y._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Y.event.remove(this,"._change"),!kt.test(this.nodeName)}}),Y.support.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){Y.event.simulate(t,e.target,Y.event.fix(e),!0)};Y.event.special[t]={setup:function(){n++===0&&R.addEventListener(e,r,!0)},teardown:function(){--n===0&&R.removeEventListener(e,r,!0)}}}),Y.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=s;else if(!i)return this;return o===1&&(u=i,i=function(e){return Y().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,Y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=s),this.each(function(){Y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return Y(this.context).on(e,this.selector,t,n),this},die:function(e,t){return Y(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return Y.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||Y.guid++,r=0,i=function(n){var i=(Y._data(this,"lastToggle"+e.guid)||0)%r;return Y._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Y.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Ot.test(t)&&(Y.event.fixHooks[t]=Y.event.keyHooks),Mt.test(t)&&(Y.event.fixHooks[t]=Y.event.mouseHooks)}),function(e,t){function n(e,t,n,r){n=n||[],t=t||M;var i,s,o,u,a=t.nodeType;if(!e||typeof e!="string")return n;if(a!==1&&a!==9)return[];o=E(t);if(!o&&!r)if(i=nt.exec(e))if(u=i[1]){if(a===9){s=t.getElementById(u);if(!s||!s.parentNode)return n;if(s.id===u)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(u))&&S(t,s)&&s.id===u)return n.push(s),n}else{if(i[2])return B.apply(n,j.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&dt&&t.getElementsByClassName)return B.apply(n,j.call(t.getElementsByClassName(u),0)),n}return v(e.replace(G,"$1"),t,n,r,o)}function r(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function s(e){return I(function(t){return t=+t,I(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function o(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function u(e,t){var r,i,s,o,u,a,f,l=U[A][e];if(l)return t?0:l.slice(0);u=e,a=[],f=b.preFilter;while(u){if(!r||(i=Z.exec(u)))i&&(u=u.slice(i[0].length)),a.push(s=[]);r=!1;if(i=et.exec(u))s.push(r=new O(i.shift())),u=u.slice(r.length),r.type=i[0].replace(G," ");for(o in b.filter)(i=ft[o].exec(u))&&(!f[o]||(i=f[o](i,M,!0)))&&(s.push(r=new O(i.shift())),u=u.slice(r.length),r.type=o,r.matches=i);if(!r)break}return t?u.length:u?n.error(e):U(e,a).slice(0)}function a(e,t,n){var r=t.dir,i=n&&t.dir==="parentNode",s=P++;return t.first?function(t,n,s){while(t=t[r])if(i||t.nodeType===1)return e(t,n,s)}:function(t,n,o){if(!o){var u,a=D+" "+s+" ",f=a+g;while(t=t[r])if(i||t.nodeType===1){if((u=t[A])===f)return t.sizset;if(typeof u=="string"&&u.indexOf(a)===0){if(t.sizset)return t}else{t[A]=f;if(e(t,n,o))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[r])if(i||t.nodeType===1)if(e(t,n,o))return t}}function f(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function l(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function c(e,t,n,r,i,s){return r&&!r[A]&&(r=c(r)),i&&!i[A]&&(i=c(i,s)),I(function(s,o,u,a){if(s&&i)return;var f,c,h,p=[],v=[],m=o.length,g=s||d(t||"*",u.nodeType?[u]:u,[],s),y=e&&(s||!t)?l(g,p,e,u,a):g,b=n?i||(s?e:m||r)?[]:o:y;n&&n(y,b,u,a);if(r){h=l(b,v),r(h,[],u,a),f=h.length;while(f--)if(c=h[f])b[v[f]]=!(y[v[f]]=c)}if(s){f=e&&b.length;while(f--)if(c=b[f])s[p[f]]=!(o[p[f]]=c)}else b=l(b===o?b.splice(m,b.length):b),i?i(null,o,b,a):B.apply(o,b)})}function h(e){var t,n,r,i=e.length,s=b.relative[e[0].type],o=s||b.relative[" "],u=s?1:0,l=a(function(e){return e===t},o,!0),p=a(function(e){return F.call(t,e)>-1},o,!0),d=[function(e,n,r){return!s&&(r||n!==C)||((t=n).nodeType?l(e,n,r):p(e,n,r))}];for(;u<i;u++)if(n=b.relative[e[u].type])d=[a(f(d),n)];else{n=b.filter[e[u].type].apply(null,e[u].matches);if(n[A]){r=++u;for(;r<i;r++)if(b.relative[e[r].type])break;return c(u>1&&f(d),u>1&&e.slice(0,u-1).join("").replace(G,"$1"),n,u<r&&h(e.slice(u,r)),r<i&&h(e=e.slice(r)),r<i&&e.join(""))}d.push(n)}return f(d)}function p(e,t){var r=t.length>0,i=e.length>0,s=function(o,u,a,f,c){var h,p,d,v=[],m=0,y="0",w=o&&[],E=c!=null,S=C,x=o||i&&b.find.TAG("*",c&&u.parentNode||u),T=D+=S==null?1:Math.E;E&&(C=u!==M&&u,g=s.el);for(;(h=x[y])!=null;y++){if(i&&h){for(p=0;d=e[p];p++)if(d(h,u,a)){f.push(h);break}E&&(D=T,g=++s.el)}r&&((h=!d&&h)&&m--,o&&w.push(h))}m+=y;if(r&&y!==m){for(p=0;d=t[p];p++)d(w,v,u,a);if(o){if(m>0)while(y--)!w[y]&&!v[y]&&(v[y]=H.call(f));v=l(v)}B.apply(f,v),E&&!o&&v.length>0&&m+t.length>1&&n.uniqueSort(f)}return E&&(D=T,C=S),w};return s.el=0,r?I(s):s}function d(e,t,r,i){var s=0,o=t.length;for(;s<o;s++)n(e,t[s],r,i);return r}function v(e,t,n,r,i){var s,o,a,f,l,c=u(e),h=c.length;if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!i&&b.relative[o[1].type]){t=b.find.ID(a.matches[0].replace(at,""),t,i)[0];if(!t)return n;e=e.slice(o.shift().length)}for(s=ft.POS.test(e)?-1:o.length-1;s>=0;s--){a=o[s];if(b.relative[f=a.type])break;if(l=b.find[f])if(r=l(a.matches[0].replace(at,""),it.test(o[0].type)&&t.parentNode||t,i)){o.splice(s,1),e=r.length&&o.join("");if(!e)return B.apply(n,j.call(r,0)),n;break}}}return x(e,c)(r,t,i,n,it.test(e)),n}function m(){}var g,y,b,w,E,S,x,T,N,C,k=!0,L="undefined",A=("sizcache"+Math.random()).replace(".",""),O=String,M=e.document,_=M.documentElement,D=0,P=0,H=[].pop,B=[].push,j=[].slice,F=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},I=function(e,t){return e[A]=t==null||t,e},q=function(){var e={},t=[];return I(function(n,r){return t.push(n)>b.cacheLength&&delete e[t.shift()],e[n]=r},e)},R=q(),U=q(),z=q(),W="[\\x20\\t\\r\\n\\f]",X="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",V=X.replace("w","w#"),$="([*^$|!~]?=)",J="\\["+W+"*("+X+")"+W+"*(?:"+$+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+W+"*\\]",K=":("+X+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+J+")|[^:]|\\\\.)*|.*))\\)|)",Q=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",G=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Z=new RegExp("^"+W+"*,"+W+"*"),et=new RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),tt=new RegExp(K),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rt=/^:not/,it=/[\x20\t\r\n\f]*[+~]/,st=/:not\($/,ot=/h\d/i,ut=/input|select|textarea|button/i,at=/\\(?!\\)/g,ft={ID:new RegExp("^#("+X+")"),CLASS:new RegExp("^\\.("+X+")"),NAME:new RegExp("^\\[name=['\"]?("+X+")['\"]?\\]"),TAG:new RegExp("^("+X.replace("w","w*")+")"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+K),POS:new RegExp(Q,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:new RegExp("^"+W+"*[>+~]|"+Q,"i")},lt=function(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},ct=lt(function(e){return e.appendChild(M.createComment("")),!e.getElementsByTagName("*").length}),ht=lt(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"}),pt=lt(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),dt=lt(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),vt=lt(function(e){e.id=A+0,e.innerHTML="<a name='"+A+"'></a><div name='"+A+"'></div>",_.insertBefore(e,_.firstChild);var t=M.getElementsByName&&M.getElementsByName(A).length===2+M.getElementsByName(A+0).length;return y=!M.getElementById(A),_.removeChild(e),t});try{j.call(_.childNodes,0)[0].nodeType}catch(mt){j=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){return n(t,null,null,[e]).length>0},w=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=w(t);return n},E=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},S=n.contains=_.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:_.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},n.attr=function(e,t){var n,r=E(e);return r||(t=t.toLowerCase()),(n=b.attrHandle[t])?n(e):r||pt?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:I,match:ft,attrHandle:ht?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:y?function(e,t,n){if(typeof t.getElementById!==L&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==L&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==L&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:ct?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:vt&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},CLASS:dt&&function(e,t,n){if(typeof t.getElementsByClassName!==L&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,""),e[3]=(e[4]||e[5]||"").replace(at,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||n.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&n.error(e[0]),e},PSEUDO:function(e){var t,n;if(ft.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])tt.test(t)&&(n=u(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:y?function(e){return e=e.replace(at,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(at,""),function(t){var n=typeof t.getAttributeNode!==L&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(at,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=R[A][e];return t||(t=R(e,new RegExp("(^|"+W+")"+e+"("+W+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")}},ATTR:function(e,t,r){return function(i,s){var o=n.attr(i,e);return o==null?t==="!=":t?(o+="",t==="="?o===r:t==="!="?o!==r:t==="^="?r&&o.indexOf(r)===0:t==="*="?r&&o.indexOf(r)>-1:t==="$="?r&&o.substr(o.length-r.length)===r:t==="~="?(" "+o+" ").indexOf(r)>-1:t==="|="?o===r||o.substr(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var r,i=b.pseudos[e]||b.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return i[A]?i(t):i.length>1?(r=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?I(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=F.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,r)}):i}},pseudos:{not:I(function(e){var t=[],n=[],r=x(e.replace(G,"$1"));return r[A]?I(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:I(function(e){return function(t){return n(e,t).length>0}}),contains:I(function(e){return function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return ot.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:r("radio"),checkbox:r("checkbox"),file:r("file"),password:r("password"),image:r("image"),submit:i("submit"),reset:i("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return ut.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:s(function(e,t,n){return[0]}),last:s(function(e,t,n){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:s(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},T=_.compareDocumentPosition?function(e,t){return e===t?(N=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return N=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],u=e.parentNode,a=t.parentNode,f=u;if(u===a)return o(e,t);if(!u)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return o(i[l],s[l]);return l===n?o(e,s[l],-1):o(i[l],t,1)},[0,0].sort(T),k=!N,n.uniqueSort=function(e){var t,n=1;N=k,e.sort(T);if(N)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},x=n.compile=function(e,t){var n,r=[],i=[],s=z[A][e];if(!s){t||(t=u(e)),n=t.length;while(n--)s=h(t[n]),s[A]?r.push(s):i.push(s);s=z(e,p(i,r))}return s},M.querySelectorAll&&function(){var e,t=v,r=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,s=[":focus"],o=[":active",":focus"],a=_.matchesSelector||_.mozMatchesSelector||_.webkitMatchesSelector||_.oMatchesSelector||_.msMatchesSelector;lt(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||s.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||s.push(":checked")}),lt(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&s.push("[*^$]="+W+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled")}),s=new RegExp(s.join("|")),v=function(e,n,i,o,a){if(!o&&!a&&(!s||!s.test(e))){var f,l,c=!0,h=A,p=n,d=n.nodeType===9&&e;if(n.nodeType===1&&n.nodeName.toLowerCase()!=="object"){f=u(e),(c=n.getAttribute("id"))?h=c.replace(r,"\\$&"):n.setAttribute("id",h),h="[id='"+h+"'] ",l=f.length;while(l--)f[l]=h+f[l].join("");p=it.test(e)&&n.parentNode||n,d=f.join(",")}if(d)try{return B.apply(i,j.call(p.querySelectorAll(d),0)),i}catch(v){}finally{c||n.removeAttribute("id")}}return t(e,n,i,o,a)},a&&(lt(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle"),o.push("!=",K)}catch(n){}}),o=new RegExp(o.join("|")),n.matchesSelector=function(t,r){r=r.replace(i,"='$1']");if(!E(t)&&!o.test(r)&&(!s||!s.test(r)))try{var u=a.call(t,r);if(u||e||t.document&&t.document.nodeType!==11)return u}catch(f){}return n(r,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=m.prototype=b.pseudos,b.setFilters=new m,n.attr=Y.attr,Y.find=n,Y.expr=n.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=n.uniqueSort,Y.text=n.getText,Y.isXMLDoc=n.isXML,Y.contains=n.contains}(e);var Pt=/Until$/,Ht=/^(?:parents|prev(?:Until|All))/,Bt=/^.[^:#\[\.,]*$/,jt=Y.expr.match.needsContext,Ft={children:!0,contents:!0,next:!0,prev:!0};Y.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return Y(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(Y.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,Y.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=Y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(Y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(f(this,e,!1),"not",e)},filter:function(e){return this.pushStack(f(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?jt.test(e)?Y(e,this.context).index(this[0])>=0:Y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=jt.test(e)||typeof e!="string"?Y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:Y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?Y.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?Y.inArray(this[0],Y(e)):Y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?Y(e,t):Y.makeArray(e&&e.nodeType?[e]:e),r=Y.merge(this.get(),n);return this.pushStack(u(n[0])||u(r[0])?r:Y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),Y.fn.andSelf=Y.fn.addBack,Y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Y.dir(e,"parentNode",n)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Y.dir(e,"previousSibling",n)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return Y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Y.merge([],e.childNodes)}},function(e,t){Y.fn[e]=function(n,r){var i=Y.map(this,t,n);return Pt.test(e)||(r=n),r&&typeof r=="string"&&(i=Y.filter(r,i)),i=this.length>1&&!Ft[e]?Y.unique(i):i,this.length>1&&Ht.test(e)&&(i=i.reverse()),this.pushStack(i,e,$.call(arguments).join(","))}}),Y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?Y.find.matchesSelector(t[0],e)?[t[0]]:[]:Y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!Y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var It="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Rt=/^\s+/,Ut=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,zt=/<([\w:]+)/,Wt=/<tbody/i,Xt=/<|&#?\w+;/,Vt=/<(?:script|style|link)/i,$t=/<(?:script|object|embed|option|style)/i,Jt=new RegExp("<(?:"+It+")[\\s/>]","i"),Kt=/^(?:checkbox|radio)$/,Qt=/checked\s*(?:[^=]|=\s*.checked.)/i,Gt=/\/(java|ecma)script/i,Yt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=l(R),tn=en.appendChild(R.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Y.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Y.fn.extend({text:function(e){return Y.access(this,function(e){return e===t?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||R).createTextNode(e))},null,e,arguments.length
)},wrapAll:function(e){if(Y.isFunction(e))return this.each(function(t){Y(this).wrapAll(e.call(this,t))});if(this[0]){var t=Y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Y.isFunction(e)?this.each(function(t){Y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Y.isFunction(e);return this.each(function(n){Y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(e,this),"before",this.selector)}},after:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||Y.filter(e,[n]).length)!t&&n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),Y.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&Y.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return Y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(qt,""):t;if(typeof e=="string"&&!Vt.test(e)&&(Y.support.htmlSerialize||!Jt.test(e))&&(Y.support.leadingWhitespace||!Rt.test(e))&&!Zt[(zt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ut,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(Y.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return u(this[0])?this.length?this.pushStack(Y(Y.isFunction(e)?e():e),"replaceWith",e):this:Y.isFunction(e)?this.each(function(t){var n=Y(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=Y(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;Y(this).remove(),t?Y(t).before(e):Y(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],h=this.length;if(!Y.support.checkClone&&h>1&&typeof f=="string"&&Qt.test(f))return this.each(function(){Y(this).domManip(e,n,r)});if(Y.isFunction(f))return this.each(function(i){var s=Y(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=Y.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&Y.nodeName(s,"tr");for(u=i.cacheable||h-1;a<h;a++)r.call(n&&Y.nodeName(this[a],"table")?c(this[a],"tbody"):this[a],a===u?o:Y.clone(o,!0,!0))}o=s=null,l.length&&Y.each(l,function(e,t){t.src?Y.ajax?Y.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):Y.error("no ajax"):Y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Yt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Y.buildFragment=function(e,n,r){var i,s,o,u=e[0];return n=n||R,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof u=="string"&&u.length<512&&n===R&&u.charAt(0)==="<"&&!$t.test(u)&&(Y.support.checkClone||!Qt.test(u))&&(Y.support.html5Clone||!Jt.test(u))&&(s=!0,i=Y.fragments[u],o=i!==t),i||(i=n.createDocumentFragment(),Y.clean(e,n,i,r),s&&(Y.fragments[u]=o&&i)),{fragment:i,cacheable:s}},Y.fragments={},Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Y.fn[e]=function(n){var r,i=0,s=[],o=Y(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),Y(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),Y.extend({clone:function(e,t,n){var r,i,s,o;Y.support.html5Clone||Y.isXMLDoc(e)||!Jt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(o=tn.firstChild));if((!Y.support.noCloneEvent||!Y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!Y.isXMLDoc(e)){p(e,o),r=d(e),i=d(o);for(s=0;r[s];++s)i[s]&&p(r[s],i[s])}if(t){h(e,o);if(n){r=d(e),i=d(o);for(s=0;r[s];++s)h(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i,s,o,u,a,f,c,h,p,d,m,g,y=t===R&&en,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=R;for(i=0;(o=e[i])!=null;i++){typeof o=="number"&&(o+="");if(!o)continue;if(typeof o=="string")if(!Xt.test(o))o=t.createTextNode(o);else{y=y||l(t),c=t.createElement("div"),y.appendChild(c),o=o.replace(Ut,"<$1></$2>"),u=(zt.exec(o)||["",""])[1].toLowerCase(),a=Zt[u]||Zt._default,f=a[0],c.innerHTML=a[1]+o+a[2];while(f--)c=c.lastChild;if(!Y.support.tbody){h=Wt.test(o),p=u==="table"&&!h?c.firstChild&&c.firstChild.childNodes:a[1]==="<table>"&&!h?c.childNodes:[];for(s=p.length-1;s>=0;--s)Y.nodeName(p[s],"tbody")&&!p[s].childNodes.length&&p[s].parentNode.removeChild(p[s])}!Y.support.leadingWhitespace&&Rt.test(o)&&c.insertBefore(t.createTextNode(Rt.exec(o)[0]),c.firstChild),o=c.childNodes,c.parentNode.removeChild(c)}o.nodeType?b.push(o):Y.merge(b,o)}c&&(o=c=y=null);if(!Y.support.appendChecked)for(i=0;(o=b[i])!=null;i++)Y.nodeName(o,"input")?v(o):typeof o.getElementsByTagName!="undefined"&&Y.grep(o.getElementsByTagName("input"),v);if(n){m=function(e){if(!e.type||Gt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(i=0;(o=b[i])!=null;i++)if(!Y.nodeName(o,"script")||!m(o))n.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(g=Y.grep(Y.merge([],o.getElementsByTagName("script")),m),b.splice.apply(b,[i+1,0].concat(g)),i+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=Y.expando,a=Y.cache,f=Y.support.deleteExpando,l=Y.event.special;for(;(i=e[o])!=null;o++)if(t||Y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?Y.event.remove(i,s):Y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,Y.deletedIds.push(r))}}}}),function(){var e,t;Y.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=Y.uaMatch(z.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),Y.browser=t,Y.sub=function(){function e(t,n){return new e.fn.init(t,n)}Y.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function n(n,r){return r&&r instanceof Y&&!(r instanceof e)&&(r=e(r)),Y.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(R);return e}}();var nn,rn,sn,on=/alpha\([^)]*\)/i,un=/opacity=([^)]*)/,an=/^(top|right|bottom|left)$/,fn=/^(none|table(?!-c[ea]).+)/,ln=/^margin/,cn=new RegExp("^("+Z+")(.*)$","i"),hn=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),pn=new RegExp("^([-+])=("+Z+")","i"),dn={},vn={position:"absolute",visibility:"hidden",display:"block"},mn={letterSpacing:0,fontWeight:400},gn=["Top","Right","Bottom","Left"],yn=["Webkit","O","Moz","ms"],bn=Y.fn.toggle;Y.fn.extend({css:function(e,n){return Y.access(this,function(e,n,r){return r!==t?Y.style(e,n,r):Y.css(e,n)},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n=typeof e=="boolean";return Y.isFunction(e)&&Y.isFunction(t)?bn.apply(this,arguments):this.each(function(){(n?e:g(this))?Y(this).show():Y(this).hide()})}}),Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=Y.camelCase(n),f=e.style;n=Y.cssProps[a]||(Y.cssProps[a]=m(f,a)),u=Y.cssHooks[n]||Y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=pn.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(Y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!Y.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=Y.camelCase(n);return n=Y.cssProps[a]||(Y.cssProps[a]=m(e.style,a)),u=Y.cssHooks[n]||Y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=nn(e,n)),s==="normal"&&n in mn&&(s=mn[n]),r||i!==t?(o=parseFloat(s),r||Y.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?nn=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!Y.contains(t.ownerDocument,t)&&(r=Y.style(t,n)),hn.test(r)&&ln.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:R.documentElement.currentStyle&&(nn=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),hn.test(i)&&!an.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),Y.each(["height","width"],function(e,t){Y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&fn.test(nn(e,"display"))?Y.swap(e,vn,function(){return E(e,t,r)}):E(e,t,r)},set:function(e,n,r){return b(e,n,r?w(e,t,r,Y.support.boxSizing&&Y.css(e,"boxSizing")==="border-box"):0)}}}),Y.support.opacity||(Y.cssHooks.opacity={get:function(e,t){return un.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=Y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&Y.trim(s.replace(on,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=on.test(s)?s.replace(on,i):s+" "+i}}),Y(function(){Y.support.reliableMarginRight||(Y.cssHooks.marginRight={get:function(e,t){return Y.swap(e,{display:"inline-block"},function(){if(t)return nn(e,"marginRight")})}}),!Y.support.pixelPosition&&Y.fn.position&&Y.each(["top","left"],function(e,t){Y.cssHooks[t]={get:function(e,n){if(n){var r=nn(e,t);return hn.test(r)?Y(e).position()[t]+"px":r}}}})}),Y.expr&&Y.expr.filters&&(Y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!Y.support.reliableHiddenOffsets&&(e.style&&e.style.display||nn(e,"display"))==="none"},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)}),Y.each({margin:"",padding:"",border:"Width"},function(e,t){Y.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+gn[r]+t]=i[r]||i[r-2]||i[0];return s}},ln.test(e)||(Y.cssHooks[e+t].set=b)});var wn=/%20/g,En=/\[\]$/,Sn=/\r?\n/g,xn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tn=/^(?:select|textarea)/i;Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Tn.test(this.nodeName)||xn.test(this.type))}).map(function(e,t){var n=Y(this).val();return n==null?null:Y.isArray(n)?Y.map(n,function(e,n){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Y.param=function(e,n){var r,i=[],s=function(e,t){t=Y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=Y.ajaxSettings&&Y.ajaxSettings.traditional);if(Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){s(this.name,this.value)});else for(r in e)x(r,e[r],n,s);return i.join("&").replace(wn,"+")};var Nn,Cn,kn=/#.*$/,Ln=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,An=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,On=/^(?:GET|HEAD)$/,Mn=/^\/\//,_n=/\?/,Dn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Pn=/([?&])_=[^&]*/,Hn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bn=Y.fn.load,jn={},Fn={},In=["*/"]+["*"];try{Cn=U.href}catch(qn){Cn=R.createElement("a"),Cn.href="",Cn=Cn.href}Nn=Hn.exec(Cn.toLowerCase())||[],Y.fn.load=function(e,n,r){if(typeof e!="string"&&Bn)return Bn.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),Y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),Y.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?Y("<div>").append(e.replace(Dn,"")).find(i):e)}),this},Y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.each(["get","post"],function(e,n){Y[n]=function(e,r,i,s){return Y.isFunction(r)&&(s=s||i,i=r,r=t),Y.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),Y.extend({getScript:function(e,n){return Y.get(e,t,n,"script")},getJSON:function(e,t,n){return Y.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?C(e,Y.ajaxSettings):(t=e,e=Y.ajaxSettings),C(e,t),e},ajaxSettings:{url:Cn,isLocal:An.test(Nn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":In},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:T(jn),ajaxTransport:T(Fn),ajax:function(e,n){function r(e,n,r,o){var f,c,y,b,E,x=n;if(w===2)return;w=2,a&&clearTimeout(a),u=t,s=o||"",S.readyState=e>0?4:0,r&&(b=k(h,S,r));if(e>=200&&e<300||e===304)h.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(Y.lastModified[i]=E),E=S.getResponseHeader("Etag"),E&&(Y.etag[i]=E)),e===304?(x="notmodified",f=!0):(f=L(h,b),x=f.state,c=f.data,y=f.error,f=!y);else{y=x;if(!x||e)x="error",e<0&&(e=0)}S.status=e,S.statusText=(n||x)+"",f?v.resolveWith(p,[c,x,S]):v.rejectWith(p,[S,x,y]),S.statusCode(g),g=t,l&&d.trigger("ajax"+(f?"Success":"Error"),[S,h,f?c:y]),m.fireWith(p,[S,x]),l&&(d.trigger("ajaxComplete",[S,h]),--Y.active||Y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var i,s,o,u,a,f,l,c,h=Y.ajaxSetup({},n),p=h.context||h,d=p!==h&&(p.nodeType||p instanceof Y)?Y(p):Y.event,v=Y.Deferred(),m=Y.Callbacks("once memory"),g=h.statusCode||{},y={},b={},w=0,E="canceled",S={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return w===2?s:null},getResponseHeader:function(e){var n;if(w===2){if(!o){o={};while(n=Ln.exec(s))o[n[1].toLowerCase()]=n[2]}n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(h.mimeType=e),this},abort:function(e){return e=e||E,u&&u.abort(e),r(0,e),this}};v.promise(S),S.success=S.done,S.error=S.fail,S.complete=m.add,S.statusCode=function(e){if(e){var t;if(w<2)for(t in e)g[t]=[g[t],e[t]];else t=e[S.status],S.always(t)}return this},h.url=((e||h.url)+"").replace(kn,"").replace(Mn,Nn[1]+"//"),h.dataTypes=Y.trim(h.dataType||"*").toLowerCase().split(tt),h.crossDomain==null&&(f=Hn.exec(h.url.toLowerCase())||!1,h.crossDomain=f&&f.join(":")+(f[3]?"":f[1]==="http:"?80:443)!==Nn.join(":")+(Nn[3]?"":Nn[1]==="http:"?80:443)),h.data&&h.processData&&typeof h.data!="string"&&(h.data=Y.param(h.data,h.traditional)),N(jn,h,n,S);if(w===2)return S;l=h.global,h.type=h.type.toUpperCase(),h.hasContent=!On.test(h.type),l&&Y.active++===0&&Y.event.trigger("ajaxStart");if(!h.hasContent){h.data&&(h.url+=(_n.test(h.url)?"&":"?")+h.data,delete h.data),i=h.url;if(h.cache===!1){var x=Y.now(),T=h.url.replace(Pn,"$1_="+x);h.url=T+(T===h.url?(_n.test(h.url)?"&":"?")+"_="+x:"")}}(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(i=i||h.url,Y.lastModified[i]&&S.setRequestHeader("If-Modified-Since",Y.lastModified[i]),Y.etag[i]&&S.setRequestHeader("If-None-Match",Y.etag[i])),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(h.dataTypes[0]!=="*"?", "+In+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)S.setRequestHeader(c,h.headers[c]);if(!h.beforeSend||h.beforeSend.call(p,S,h)!==!1&&w!==2){E="abort";for(c in{success:1,error:1,complete:1})S[c](h[c]);u=N(Fn,h,n,S);if(!u)r(-1,"No Transport");else{S.readyState=1,l&&d.trigger("ajaxSend",[S,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},h.timeout));try{w=1,u.send(y,r)}catch(C){if(!(w<2))throw C;r(-1,C)}}return S}return S.abort()},active:0,lastModified:{},etag:{}});var Rn=[],Un=/\?/,zn=/(=)\?(?=&|$)|\?\?/,Wn=Y.now();Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||Y.expando+"_"+Wn++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&zn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&zn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=Y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(zn,"$1"+s):h?n.data=a.replace(zn,"$1"+s):l&&(n.url+=(Un.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||Y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Rn.push(s)),u&&Y.isFunction(o)&&o(u[0]),u=o=t}),"script"}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=R.head||R.getElementsByTagName("head")[0]||R.documentElement;return{send:function(i,s){n=R.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Xn,Vn=e.ActiveXObject?function(){for(var e in Xn)Xn[e](0,1)}:!1,$n=0;Y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||O()}:A,function(e){Y.extend(Y.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(Y.ajaxSettings.xhr()),Y.support.ajax&&Y.ajaxTransport(function(n){if(!n.crossDomain||Y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=Y.noop,Vn&&delete Xn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++$n,Vn&&(Xn||(Xn={},Y(e).unload(Vn)),Xn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Jn,Kn,Qn=/^(?:toggle|show|hide)$/,Gn=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Yn=/queueHooks$/,Zn=[H],er={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Gn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(Y.cssNumber[e]?"":"px");if(r!=="px"&&u){u=Y.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,Y.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};Y.Animation=Y.extend(D,{tweener:function(e,t){Y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],er[n]=er[n]||[],er[n].unshift(t)},prefilter:function(e,t){t?Zn.unshift(e):Zn.push(e)}}),Y.Tween=B,B.prototype={constructor:B,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(Y.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=Y.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[Y.cssProps[e.prop]]!=null||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.each(["toggle","show","hide"],function(e,t){var n=Y.fn[t];Y.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&Y.isFunction(r)&&Y.isFunction(i)?n.apply(this,arguments):this.animate(j(t,!0),r,i,s)}}),Y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Y.isEmptyObject(e),s=Y.speed(t,n,r),o=function(){var t=D(this,Y.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=Y.timers,o=Y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Yn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&Y.dequeue(this,e)})}}),Y.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Y.speed=function(e,t,n){var r=e&&typeof e=="object"?Y.extend({},e):{complete:n||!n&&t||Y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Y.isFunction(t)&&t};r.duration=Y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in Y.fx.speeds?Y.fx.speeds[r.duration]:Y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){Y.isFunction(r.old)&&r.old.call(this),r.queue&&Y.dequeue(this,r.queue)},r},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.timers=[],Y.fx=B.prototype.init,Y.fx.tick=function(){var e,t=Y.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||Y.fx.stop()},Y.fx.timer=function(e){e()&&Y.timers.push(e)&&!Kn&&(Kn=setInterval(Y.fx.tick,Y.fx.interval))},Y.fx.interval=13,Y.fx.stop=function(){clearInterval(Kn),Kn=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fx.step={},Y.expr&&Y.expr.filters&&(Y.expr.filters.animated=function(e){return Y.grep(Y.timers,function(t){return e===t.elem}).length});var tr=/^(?:body|html)$/i;Y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Y.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?Y.offset.bodyOffset(l):(n=c.documentElement,Y.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=F(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},Y.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return Y.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Y.css(e,"marginTop"))||0,n+=parseFloat(Y.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=Y.css(e,"position");r==="static"&&(e.style.position="relative");var i=Y(e),s=i.offset(),o=Y.css(e,"top"),u=Y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&Y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),Y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},Y.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=tr.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(Y.css(e,"marginTop"))||0,n.left-=parseFloat(Y.css(e,"marginLeft"))||0,r.top+=parseFloat(Y.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(Y.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||R.body;while(e&&!tr.test(e.nodeName)&&Y.css(e,"position")==="static")e=e.offsetParent;return e||R.body})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);Y.fn[e]=function(i){return Y.access(this,function(e,i,s){var o=F(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?Y(o).scrollLeft():s,r?s:Y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),Y.each({Height:"height",Width:"width"},function(e,n){Y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){Y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return Y.access(this,function(n,r,i){var s;return Y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?Y.css(n,r,i,u):Y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=Y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Y})})(window);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/jquery.easing.1.3.js */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2001 Robert Penner
 * All rights reserved.
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/jquery.sortable.js */

/*
 * HTML5 Sortable jQuery Plugin
 * http://farhadi.ir/projects/html5sortable
 * 
 * Copyright 2012, Ali Farhadi
 * Released under the MIT license.
 */(function(e){var t,n=e();e.fn.sortable=function(r){var i=String(r);return r=e.extend({connectWith:!1},r),this.each(function(){if(/^enable|disable|destroy$/.test(i)){var s=e(this).children(e(this).data("items")).attr("draggable",i=="enable");i=="destroy"&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}var o,u,s=e(this).children(r.items),a=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');s.find(r.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1}),e(this).data("items",r.items),n=n.add(a),r.connectWith&&e(r.connectWith).add(this).data("connectWith",r.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(n){if(r.handle&&!o)return!1;o=!1;var i=n.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),u=(t=e(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){if(!t)return;t.removeClass("sortable-dragging").show(),n.detach(),u!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,a]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return!s.is(t)&&r.connectWith!==e(t).parent().data("connectWith")?!0:i.type=="drop"?(i.stopPropagation(),n.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(r.forcePlaceholderSize&&a.height(t.outerHeight()),t.hide(),e(this)[a.index()<e(this).index()?"after":"before"](a),n.not(a).detach()):!n.is(this)&&!e(this).children(r.items).length&&(n.detach(),e(this).append(a)),!1)})})}})(jQuery);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/jquery-twodal-0.1.js */

/**
 * jquery-twodal plugin v0.1
 * Copyright (C) 2010-2012 BerlinOnline Stadtportal GmbH & Co. Kg.
 * Thorsten Schmitt-Rink - thorsten.schmitt-rink@berlinonline.de
 *
 * This plugin is a wrapper around twitter-bootstrap modal plugin.
 * It extends bootstrap's modal behaviour to support event registration
 * by using a data-attribute named "data-twodal-event" that can by applied to dialog (.btn)buttons.
 * You can than pass in callbacks for those events when initializing a twodal-dialog.
 * Example:
 * Html       - <div id="foodialog" class="modal">...<a data-twodal-event="registerclicked" class=".btn">register</a>..</div>
 * Javascript - var el = $('#foodialog').twodal({
 *     events: {
 *         registerclicked: function() {
               var promptVal = el.twodal('promptVal', '.foo-input')
 *             console.log("yay I can haz clicks!", promptVal);
 *         }
 *     },
 * });
 *
 * Besides the "events" option use in the above example,
 * jquery-twodal also supports all of the standard bootstrap modal options(show, keyboard, backdrop).
 */(function(e){var t="data-twodal-event",n=".btn",r={show:!0,backdrop:!0,keyboard:!0,events:{}},i={init:function(i){return i=e.merge(i||{},r),0<this.length&&(this.find(n).each(function(n,r){r=e(r);var s=r.attr(t);s&&r.length===1&&r.click(function(e){e.preventDefault();var t=i.events;"function"==typeof t[s]&&t[s]()})}),this.modal({show:i.show,backdrop:i.backdrop,keyboard:i.keyboard}),this.on("show",i.onshow||function(){}),this.on("shown",i.onshown||function(){}),this.on("hide",i.onhide||function(){}),this.on("hidden",i.onhidden||function(){})),this},promptVal:function(e){return 2===arguments.length?(this.find(e).val(arguments[1]),this):this.find(e).val()},show:function(){return this.modal("show"),this},hide:function(){return this.modal("hide"),this}};e.fn.twodal=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if("object"==typeof t||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.twodal")}})(jQuery),function(e){jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.createTextRange){var e=this.createTextRange();e.moveStart("character",this.value.length),e.collapse(),e.select()}else{this.focus();var t=this.value.length;this.setSelectionRange(t,t)}})}}(jQuery);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/bootstrap.js */

/* ===================================================
 * bootstrap-transition.js v2.1.1
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f=e.Event("slide",{relatedTarget:i[0]});this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u]();if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=!i.data("modal")&&e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})})}(window.jQuery),!function(e){"use strict";function r(){i(e(t)).removeClass("open")}function i(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||(s.toggleClass("open"),n.focus()),!1},keydown:function(t){var n,r,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;n=e(this),t.preventDefault(),t.stopPropagation();if(n.is(".disabled, :disabled"))return;o=i(n),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return n.click();r=e("[role=menu] li:not(.divider) a",o);if(!r.length)return;a=r.index(r.filter(":focus")),t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<r.length-1&&a++,~a||(a=0),r.eq(a).focus()}},e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",r),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var t=this,n=this.tip();return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.chrome||e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/bootstrap-typeahead.js */

/* =============================================================
* bootstrap-typeahead.js v2.0.0
* http://twitter.github.com/bootstrap/javascript.html#typeahead
* =============================================================
* Copyright 2012 Twitter, Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* ============================================================ */!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.onselect=this.options.onselect,this.strings=!0,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=JSON.parse(this.$menu.find(".active").attr("data-value")),t;return this.strings?t=e:t=e[this.options.property],this.$element.val(t),typeof this.onselect=="function"&&this.onselect(e),this.hide()},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){var t=this,n,r,i;this.query=this.$element.val(),typeof this.source=="function"?(i=this.source(this,this.query),i&&this.process(i)):this.process(this.source)},process:function(t){var n=this,r,i;return t.length&&typeof t[0]!="string"&&(this.strings=!1),this.query=this.$element.val(),this.query?(r=e.grep(t,function(e){n.strings||(e=e[n.options.property]);if(n.matcher(e))return e}),r=this.sorter(r),r.length?this.render(r.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i,s;while(i=e.shift())this.strings?s=i:s=i[this.options.property],s.toLowerCase().indexOf(this.query.toLowerCase())?~s.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){return e.replace(new RegExp("("+this.query+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",JSON.stringify(r)),n.strings||(r=r[n.options.property]),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keypress,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},keyup:function(e){e.stopPropagation(),e.preventDefault();switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(e){e.stopPropagation();if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}},blur:function(e){var t=this;e.stopPropagation(),e.preventDefault(),setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',onselect:null,property:"value"},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/bootstrap-datepicker.js */

/* =========================================================
 * bootstrap-datepicker.js 
 * http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */!function(e){var t=function(t,r){this.element=e(t),this.format=n.parseFormat(r.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=e(n.template).appendTo("body").on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:e.proxy(this.show,this),blur:e.proxy(this.hide,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this)),this.minViewMode=r.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode=="string")switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=r.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode=="string")switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=r.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=this.weekStart===0?6:this.weekStart-1,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};t.prototype={constructor:t,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isInput||e(document).on("mousedown",e.proxy(this.hide,this)),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.set(),this.element.trigger({type:"hide",date:this.date})},set:function(){var e=n.formatDate(this.date,this.format);this.isInput?this.element.prop("value",e):(this.component&&this.element.find("input").prop("value",e),this.element.data("date",e))},setValue:function(e){typeof e=="string"?this.date=n.parseDate(e,this.format):this.date=new Date(e),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){var e=this.component?this.component.offset():this.element.offset();this.picker.css({top:e.top+this.height,left:e.left})},update:function(e){this.date=n.parseDate(typeof e=="string"?e:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7)t+='<th class="dow">'+n.dates.daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+n.dates.monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=e.getFullYear(),r=e.getMonth(),i=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(n.dates.months[r]+" "+t);var s=new Date(t,r-1,28,0,0,0,0),o=n.getDaysInMonth(s.getFullYear(),s.getMonth());s.setDate(o),s.setDate(o-(s.getDay()-this.weekStart+7)%7);var u=new Date(s);u.setDate(u.getDate()+42),u=u.valueOf(),html=[];var a;while(s.valueOf()<u)s.getDay()===this.weekStart&&html.push("<tr>"),a="",s.getMonth()<r?a+=" old":s.getMonth()>r&&(a+=" new"),s.valueOf()===i&&(a+=" active"),html.push('<td class="day'+a+'">'+s.getDate()+"</td>"),s.getDay()===this.weekEnd&&html.push("</tr>"),s.setDate(s.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var f=this.date.getFullYear(),l=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");f===t&&l.eq(this.date.getMonth()).addClass("active"),html="",t=parseInt(t/10,10)*10;var c=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var h=-1;h<11;h++)html+='<span class="year'+(h===-1||h===10?" old":"")+(f===t?" active":"")+'">'+t+"</span>",t+=1;c.html(html)},click:function(t){t.stopPropagation(),t.preventDefault();var r=e(t.target).closest("span, td, th");if(r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+n.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+n.modes[this.viewMode].navFnc].call(this.viewDate)+n.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1)),this.fill(),this.set()}break;case"span":if(r.is(".month")){var i=r.parent().find("span").index(r);this.viewDate.setMonth(i)}else{var s=parseInt(r.text(),10)||0;this.viewDate.setFullYear(s)}this.viewMode!==0&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(r.is(".day")){var o=parseInt(r.text(),10)||1,i=this.viewDate.getMonth();r.is(".old")?i-=1:r.is(".new")&&(i+=1);var s=this.viewDate.getFullYear();this.date=new Date(s,i,o,0,0,0,0),this.viewDate=new Date(s,i,Math.min(28,o),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})}}},mousedown:function(e){e.stopPropagation(),e.preventDefault()},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+n.modes[this.viewMode].clsName).show()}},e.fn.datepicker=function(n,r){return this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof n=="object"&&n;s||i.data("datepicker",s=new t(this,e.extend({},e.fn.datepicker.defaults,o))),typeof n=="string"&&s[n](r)})},e.fn.datepicker.defaults={},e.fn.datepicker.Constructor=t;var n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseFormat:function(e){var t=e.match(/[.\/\-\s].*?/),n=e.split(/\W+/);if(!t||!n||n.length===0)throw new Error("Invalid date format.");return{separator:t,parts:n}},parseDate:function(e,t){var n=e.split(t.separator),e=new Date,r;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);if(n.length===t.parts.length)for(var i=0,s=t.parts.length;i<s;i++){r=parseInt(n[i],10)||1;switch(t.parts[i]){case"dd":case"d":e.setDate(r);break;case"mm":case"m":e.setMonth(r-1);break;case"yy":e.setFullYear(2e3+r);break;case"yyyy":e.setFullYear(r)}}return e},formatDate:function(e,t){var n={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m;var e=[];for(var r=0,i=t.parts.length;r<i;r++)e.push(n[t.parts[r]]);return e.join(t.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};n.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+n.headTemplate+n.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+n.headTemplate+n.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/kinetic-v4.0.5.min.js */

/**
 * KineticJS JavaScript Library v4.0.5
 * http://www.kineticjs.com/
 * Copyright 2012, Eric Rowell
 * Licensed under the MIT or GPL Version 2 licenses.
 * Date: Nov 04 2012
 *
 * Copyright (C) 2011 - 2012 by Eric Rowell
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Kinetic={};Kinetic.Filters={},Kinetic.Plugins={},Kinetic.Global={BUFFER_WHITELIST:["fill","stroke","textFill","textStroke"],BUFFER_BLACKLIST:["shadow"],stages:[],idCounter:0,tempNodes:{},shapes:{},warn:function(e){window.console&&console.warn&&console.warn("Kinetic warning: "+e)},extend:function(e,t){for(var n in t.prototype)n in e.prototype||(e.prototype[n]=t.prototype[n])},_pullNodes:function(e){var t=this.tempNodes;for(var n in t){var r=t[n];r.getStage()!==undefined&&r.getStage()._id===e._id&&(e._addId(r),e._addName(r),this._removeTempNode(r))}},_addTempNode:function(e){this.tempNodes[e._id]=e},_removeTempNode:function(e){delete this.tempNodes[e._id]}},Kinetic.Type={_isElement:function(e){return!!e&&e.nodeType==1},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor==Object},_isArray:function(e){return Object.prototype.toString.call(e)=="[object Array]"},_isNumber:function(e){return Object.prototype.toString.call(e)=="[object Number]"},_isString:function(e){return Object.prototype.toString.call(e)=="[object String]"},_hasMethods:function(e){var t=[];for(var n in e)this._isFunction(e[n])&&t.push(n);return t.length>0},_getXY:function(e){if(this._isNumber(e))return{x:e,y:e};if(this._isArray(e)){if(e.length===1){var t=e[0];if(this._isNumber(t))return{x:t,y:t};if(this._isArray(t))return{x:t[0],y:t[1]};if(this._isObject(t))return t}else if(e.length>=2)return{x:e[0],y:e[1]}}else if(this._isObject(e))return e;return{x:0,y:0}},_getSize:function(e){if(this._isNumber(e))return{width:e,height:e};if(this._isArray(e))if(e.length===1){var t=e[0];if(this._isNumber(t))return{width:t,height:t};if(this._isArray(t)){if(t.length>=4)return{width:t[2],height:t[3]};if(t.length>=2)return{width:t[0],height:t[1]}}else if(this._isObject(t))return t}else{if(e.length>=4)return{width:e[2],height:e[3]};if(e.length>=2)return{width:e[0],height:e[1]}}else if(this._isObject(e))return e;return{width:0,height:0}},_getPoints:function(e){if(e===undefined)return[];if(this._isObject(e[0]))return e;var t=[];for(var n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t},_getImage:function(e,t){if(!e)t(null);else if(this._isElement(e))t(e);else if(this._isString(e)){var n=new Image;n.onload=function(){t(n)},n.src=e}else if(e.data){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var i=r.getContext("2d");i.putImageData(e,0,0);var s=r.toDataURL(),n=new Image;n.onload=function(){t(n)},n.src=s}else t(null)},_rgbToHex:function(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb:function(e){var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},_getRandomColorKey:function(){var e=Math.round(Math.random()*255),t=Math.round(Math.random()*255),n=Math.round(Math.random()*255);return this._rgbToHex(e,t,n)},_merge:function(e,t){var n=this._clone(t);for(var r in e)this._isObject(e[r])?n[r]=this._merge(e[r],n[r]):n[r]=e[r];return n},_clone:function(e){var t={};for(var n in e)this._isObject(e[n])?t[n]=this._clone(e[n]):t[n]=e[n];return t}},Kinetic.Canvas=function(e,t){this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.element.width=e,this.element.height=t},Kinetic.Canvas.prototype={clear:function(){var e=this.getContext(),t=this.getElement();e.clearRect(0,0,t.width,t.height)},getElement:function(){return this.element},getContext:function(){return this.context},setWidth:function(e){this.element.width=e},setHeight:function(e){this.element.height=e},getWidth:function(){return this.element.width},getHeight:function(){return this.element.height},setSize:function(e,t){this.setWidth(e),this.setHeight(t)},toDataURL:function(e,t){try{return this.element.toDataURL(e,t)}catch(n){return this.element.toDataURL()}}},Kinetic.Tween=function(e,t,n,r,i,s){this._listeners=[],this.addListener(this),this.obj=e,this.propFunc=t,this.begin=r,this._pos=r,this.setDuration(s),this.isPlaying=!1,this._change=0,this.prevTime=0,this.prevPos=0,this.looping=!1,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.name="",this.func=n,this.setFinish(i)},Kinetic.Tween.prototype={setTime:function(e){this.prevTime=this._time,e>this.getDuration()?this.looping?(this.rewind(e-this._duration),this.update(),this.broadcastMessage("onLooped",{target:this,type:"onLooped"})):(this._time=this._duration,this.update(),this.stop(),this.broadcastMessage("onFinished",{target:this,type:"onFinished"})):e<0?(this.rewind(),this.update()):(this._time=e,this.update())},getTime:function(){return this._time},setDuration:function(e){this._duration=e===null||e<=0?1e5:e},getDuration:function(){return this._duration},setPosition:function(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e,this.broadcastMessage("onChanged",{target:this,type:"onChanged"})},getPosition:function(e){return e===undefined&&(e=this._time),this.func(e,this.begin,this._change,this._duration)},setFinish:function(e){this._change=e-this.begin},getFinish:function(){return this.begin+this._change},start:function(){this.rewind(),this.startEnterFrame(),this.broadcastMessage("onStarted",{target:this,type:"onStarted"})},rewind:function(e){this.stop(),this._time=e===undefined?0:e,this.fixTime(),this.update()},fforward:function(){this._time=this._duration,this.fixTime(),this.update()},update:function(){this.setPosition(this.getPosition(this._time))},startEnterFrame:function(){this.stopEnterFrame(),this.isPlaying=!0,this.onEnterFrame()},onEnterFrame:function(){this.isPlaying&&this.nextFrame()},nextFrame:function(){this.setTime((this.getTimer()-this._startTime)/1e3)},stop:function(){this.stopEnterFrame(),this.broadcastMessage("onStopped",{target:this,type:"onStopped"})},stopEnterFrame:function(){this.isPlaying=!1},continueTo:function(e,t){this.begin=this._pos,this.setFinish(e),this._duration!==undefined&&this.setDuration(t),this.start()},resume:function(){this.fixTime(),this.startEnterFrame(),this.broadcastMessage("onResumed",{target:this,type:"onResumed"})},yoyo:function(){this.continueTo(this.begin,this._time)},addListener:function(e){return this.removeListener(e),this._listeners.push(e)},removeListener:function(e){var t=this._listeners,n=t.length;while(n--)if(t[n]==e)return t.splice(n,1),!0;return!1},broadcastMessage:function(){var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e.shift(),r=this._listeners,i=r.length;for(var t=0;t<i;t++)r[t][n]&&r[t][n].apply(r[t],e)},fixTime:function(){this._startTime=this.getTimer()-this._time*1e3},getTimer:function(){return(new Date).getTime()-this._time}},Kinetic.Tweens={"back-ease-in":function(e,t,n,r,i,s){var o=1.70158;return n*(e/=r)*e*((o+1)*e-o)+t},"back-ease-out":function(e,t,n,r,i,s){var o=1.70158;return n*((e=e/r-1)*e*((o+1)*e+o)+1)+t},"back-ease-in-out":function(e,t,n,r,i,s){var o=1.70158;return(e/=r/2)<1?n/2*e*e*(((o*=1.525)+1)*e-o)+t:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+t},"elastic-ease-in":function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},"elastic-ease-out":function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},"elastic-ease-in-out":function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r/2)==2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},"bounce-ease-out":function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},"bounce-ease-in":function(e,t,n,r){return n-Kinetic.Tweens["bounce-ease-out"](r-e,0,n,r)+t},"bounce-ease-in-out":function(e,t,n,r){return e<r/2?Kinetic.Tweens["bounce-ease-in"](e*2,0,n,r)*.5+t:Kinetic.Tweens["bounce-ease-out"](e*2-r,0,n,r)*.5+n*.5+t},"ease-in":function(e,t,n,r){return n*(e/=r)*e+t},"ease-out":function(e,t,n,r){return-n*(e/=r)*(e-2)+t},"ease-in-out":function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},"strong-ease-in":function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},"strong-ease-out":function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},"strong-ease-in-out":function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},linear:function(e,t,n,r){return n*e/r+t}},Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]},Kinetic.Transform.prototype={translate:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t},scale:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,s=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},multiply:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o},invert:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o},getMatrix:function(){return this.m}},Kinetic.Collection=function(){var e=[].slice.call(arguments),t=e.length,n=0;this.length=t;for(;n<t;n++)this[n]=e[n];return this},Kinetic.Collection.prototype=new Array,Kinetic.Collection.prototype.apply=function(e){args=[].slice.call(arguments),args.shift();for(var t=0;t<this.length;t++)Kinetic.Type._isFunction(this[t][e])&&this[t][e].apply(this[t],args)},Kinetic.Collection.prototype.each=function(e){for(var t=0;t<this.length;t++)e.call(this[t],t,this[t])},Kinetic.Filters.Grayscale=function(e,t){var n=e.data;for(var r=0;r<n.length;r+=4){var i=.34*n[r]+.5*n[r+1]+.16*n[r+2];n[r]=i,n[r+1]=i,n[r+2]=i}},Kinetic.Filters.Brighten=function(e,t){var n=t.val||0,r=e.data;for(var i=0;i<r.length;i+=4)r[i]+=n,r[i+1]+=n,r[i+2]+=n},Kinetic.Filters.Invert=function(e,t){var n=e.data;for(var r=0;r<n.length;r+=4)n[r]=255-n[r],n[r+1]=255-n[r+1],n[r+2]=255-n[r+2]},Kinetic.Animation=function(e){e||(e={});for(var t in e)this[t]=e[t];this.id=Kinetic.Animation.animIdCounter++},Kinetic.Animation.prototype={start:function(){this.stop(),Kinetic.Animation._addAnimation(this),Kinetic.Animation._handleAnimation()},stop:function(){Kinetic.Animation._removeAnimation(this)}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation.frame={time:0,timeDiff:0,lastTime:(new Date).getTime(),frameRate:0},Kinetic.Animation.fixedRequestAnimFrame=function(e){window.setTimeout(e,1e3/60)},Kinetic.Animation._addAnimation=function(e){this.animations.push(e)},Kinetic.Animation._removeAnimation=function(e){var t=e.id,n=this.animations;for(var r=0;r<n.length;r++)if(n[r].id===t){this.animations.splice(r,1);break}},Kinetic.Animation._updateFrameObject=function(){var e=(new Date).getTime();this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},Kinetic.Animation._runFrames=function(){this._updateFrameObject();var e={};for(var t=0;t<this.animations.length;t++){var n=this.animations[t];n.node&&n.node._id!==undefined&&(e[n.node._id]=n.node),n.func&&n.func(this.frame)}for(var r in e)e[r].draw()},Kinetic.Animation._animationLoop=function(){if(this.animations.length>0){this._runFrames();var e=this;Kinetic.Animation.requestAnimFrame(function(){e._animationLoop()})}else this.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var e=this;this.animRunning||(this.animRunning=!0,e._animationLoop())},Kinetic.Animation.requestAnimFrame=function(e){var t=Kinetic.DD&&Kinetic.DD.moving?this.fixedRequestAnimFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Kinetic.Animation.fixedRequestAnimFrame;t(e)},Kinetic.Node=function(e){this._nodeInit(e)},Kinetic.Node.prototype={_nodeInit:function(e){this.defaultNodeAttrs={visible:!0,listening:!0,name:undefined,opacity:1,x:0,y:0,scale:{x:1,y:1},rotation:0,offset:{x:0,y:0},draggable:!1},this.setDefaultAttrs(this.defaultNodeAttrs),this.eventListeners={},this.setAttrs(e);var t=this;this.on("idChange.kinetic",function(e){var n=t.getStage();n&&(n._removeId(e.oldVal),n._addId(t))}),this.on("nameChange.kinetic",function(e){var n=t.getStage();n&&(n._removeName(e.oldVal,t._id),n._addName(t))})},on:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){var i=n[r],s=i,o=s.split("."),u=o[0],a=o.length>1?o[1]:"";this.eventListeners[u]||(this.eventListeners[u]=[]),this.eventListeners[u].push({name:a,handler:t})}},off:function(e){var t=e.split(" ");for(var n=0;n<t.length;n++){var r=t[n],i=r,s=i.split("."),o=s[0];if(s.length>1)if(o)this.eventListeners[o]&&this._off(o,s[1]);else for(var r in this.eventListeners)this._off(r,s[1]);else delete this.eventListeners[o]}},remove:function(){var e=this.getParent();if(e&&this.index!==undefined&&e.children[this.index]._id==this._id){var t=e.getStage();t&&(t._removeId(this.getId()),t._removeName(this.getName(),this._id)),Kinetic.Global._removeTempNode(this),e.children.splice(this.index,1),e._setChildrenIndices();while(this.children&&this.children.length>0)this.children[0].remove()}},getAttrs:function(){return this.attrs},setDefaultAttrs:function(e){this.attrs===undefined&&(this.attrs={});if(e)for(var t in e)this.attrs[t]===undefined&&(this.attrs[t]=e[t])},setAttrs:function(e){if(e)for(var t in e){var n="set"+t.charAt(0).toUpperCase()+t.slice(1);Kinetic.Type._isFunction(this[n])?this[n](e[t]):this.setAttr(t,e[t])}},getVisible:function(){return this.attrs.visible&&this.getParent()&&!this.getParent().getVisible()?!1:this.attrs.visible},getListening:function(){return this.attrs.listening&&this.getParent()&&!this.getParent().getListening()?!1:this.attrs.listening},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},getZIndex:function(){return this.index},getAbsoluteZIndex:function(){function e(n){var s=[];for(var o=0;o<n.length;o++){var u=n[o];i++,u.nodeType!=="Shape"&&(s=s.concat(u.getChildren())),u._id===r._id&&(o=n.length)}s.length>0&&s[0].getLevel()<=t&&e(s)}var t=this.getLevel(),n=this.getStage(),r=this,i=0;return r.nodeType!=="Stage"&&e(r.getStage().getChildren()),i},getLevel:function(){var e=0,t=this.parent;while(t)e++,t=t.parent;return e},setPosition:function(){var e=Kinetic.Type._getXY([].slice.call(arguments));this.setAttr("x",e.x),this.setAttr("y",e.y)},getPosition:function(){return{x:this.attrs.x,y:this.attrs.y}},getAbsolutePosition:function(){var e=this.getAbsoluteTransform(),t=this.getOffset();return e.translate(t.x,t.y),e.getTranslation()},setAbsolutePosition:function(){var e=Kinetic.Type._getXY([].slice.call(arguments)),t=this._clearTransform();this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y;var n=this.getAbsoluteTransform();n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this.setPosition(e.x,e.y),this._setTransform(t)},move:function(){var e=Kinetic.Type._getXY([].slice.call(arguments)),t=this.getX(),n=this.getY();e.x!==undefined&&(t+=e.x),e.y!==undefined&&(n+=e.y),this.setPosition(t,n)},getRotationDeg:function(){return this.getRotation()*180/Math.PI},setRotationDeg:function(e){this.setRotation(e*Math.PI/180)},rotate:function(e){this.setRotation(this.getRotation()+e)},rotateDeg:function(e){this.setRotation(this.getRotation()+e*Math.PI/180)},moveToTop:function(){var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){var e=this.index;if(e<this.parent.getChildren().length-1)return this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0},moveDown:function(){var e=this.index;if(e>0)return this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0},moveToBottom:function(){var e=this.index;if(e>0)return this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0},setZIndex:function(e){var t=this.index;this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices()},getAbsoluteOpacity:function(){var e=this.getOpacity();return this.getParent()&&(e*=this.getParent().getAbsoluteOpacity()),e},moveTo:function(e){var t=this.parent;t.children.splice(this.index,1),t._setChildrenIndices(),e.children.push(this),this.index=e.children.length-1,this.parent=e,e._setChildrenIndices()},toObject:function(){var e={},t=Kinetic.Type;e.attrs={};for(var n in this.attrs){var r=this.attrs[n];!t._isFunction(r)&&!t._isElement(r)&&(!t._isObject(r)||!t._hasMethods(r))&&(e.attrs[n]=r)}return e.nodeType=this.nodeType,e.shapeType=this.shapeType,e},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){return this.getParent().getLayer()},getStage:function(){return this.getParent()?this.getParent().getStage():undefined},simulate:function(e,t){this._handleEvent(e,t||{})},fire:function(e,t){this._executeHandlers(e,t||{})},getAbsoluteTransform:function(){var e=new Kinetic.Transform,t=[],n=this.parent;t.unshift(this);while(n)t.unshift(n),n=n.parent;for(var r=0;r<t.length;r++){var i=t[r],s=i.getTransform();e.multiply(s)}return e},getTransform:function(){var e=new Kinetic.Transform;return(this.attrs.x!==0||this.attrs.y!==0)&&e.translate(this.attrs.x,this.attrs.y),this.attrs.rotation!==0&&e.rotate(this.attrs.rotation),(this.attrs.scale.x!==1||this.attrs.scale.y!==1)&&e.scale(this.attrs.scale.x,this.attrs.scale.y),this.attrs.offset&&(this.attrs.offset.x!==0||this.attrs.offset.y!==0)&&e.translate(-1*this.attrs.offset.x,-1*this.attrs.offset.y),e},clone:function(e){var t=this.shapeType||this.nodeType,n=new Kinetic[t](this.attrs);for(var r in this.eventListeners){var i=this.eventListeners[r];for(var s=0;s<i.length;s++){var o=i[s];o.name.indexOf("kinetic")<0&&(n.eventListeners[r]||(n.eventListeners[r]=[]),n.eventListeners[r].push(o))}}return n.setAttrs(e),n},toDataURL:function(e){var t=e&&e.mimeType?e.mimeType:null,n=e&&e.quality?e.quality:null,r;return e&&e.width&&e.height?r=new Kinetic.Canvas(e.width,e.height):(r=this.getStage().bufferCanvas,r.clear()),this.draw(r),r.toDataURL(t,n)},toImage:function(e){Kinetic.Type._getImage(this.toDataURL(e),function(t){e.callback(t)})},setOffset:function(){var e=Kinetic.Type._getXY([].slice.call(arguments));e.x===undefined&&(e.x=this.getOffset().x),e.y===undefined&&(e.y=this.getOffset().y),this.setAttr("offset",e)},setScale:function(){var e=Kinetic.Type._getXY([].slice.call(arguments));e.x===undefined&&(e.x=this.getScale().x),e.y===undefined&&(e.y=this.getScale().y),this.setAttr("scale",e)},setSize:function(){var e=Kinetic.Type._getSize(Array.prototype.slice.call(arguments));this.setWidth(e.width),this.setHeight(e.height)},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},_get:function(e){return this.nodeType===e?[this]:[]},_off:function(e,t){for(var n=0;n<this.eventListeners[e].length;n++)if(this.eventListeners[e][n].name===t){this.eventListeners[e].splice(n,1);if(this.eventListeners[e].length===0){delete this.eventListeners[e];break}n--}},_clearTransform:function(){var e={x:this.attrs.x,y:this.attrs.y,rotation:this.attrs.rotation,scale:{x:this.attrs.scale.x,y:this.attrs.scale.y},offset:{x:this.attrs.offset.x,y:this.attrs.offset.y}};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scale={x:1,y:1},this.attrs.offset={x:0,y:0},e},_setTransform:function(e){for(var t in e)this.attrs[t]=e[t]},_fireBeforeChangeEvent:function(e,t,n){this._handleEvent("before"+e.toUpperCase()+"Change",{oldVal:t,newVal:n})},_fireChangeEvent:function(e,t,n){this._handleEvent(e+"Change",{oldVal:t,newVal:n})},setAttr:function(e,t){if(t!==undefined){var n=this.attrs[e];this._fireBeforeChangeEvent(e,n,t),this.attrs[e]=t,this._fireChangeEvent(e,n,t)}},_handleEvent:function(e,t,n){t&&this.nodeType==="Shape"&&(t.shape=this);var r=this.getStage(),i=this.eventListeners,s=!0;e==="mouseenter"&&n&&this._id===n._id?s=!1:e==="mouseleave"&&n&&this._id===n._id&&(s=!1),s&&(i[e]&&this.fire(e,t),t&&!t.cancelBubble&&this.parent&&(n&&n.parent?this._handleEvent.call(this.parent,e,t,n.parent):this._handleEvent.call(this.parent,e,t)))},_executeHandlers:function(e,t){var n=this.eventListeners[e];for(var r=0;r<n.length;r++)n[r].handler.apply(this,[t])},_shouldDraw:function(e){return this.isVisible()&&(!e||e.name!=="buffer"||this.getListening())}},Kinetic.Node.addSetters=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this._addSetter(e,r)}},Kinetic.Node.addGetters=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];this._addGetter(e,r)}},Kinetic.Node.addGettersSetters=function(e,t){this.addSetters(e,t),this.addGetters(e,t)},Kinetic.Node._addSetter=function(e,t){var n=this,r="set"+t.charAt(0).toUpperCase()+t.slice(1);e.prototype[r]=function(e){this.setAttr(t,e)}},Kinetic.Node._addGetter=function(e,t){var n=this,r="get"+t.charAt(0).toUpperCase()+t.slice(1);e.prototype[r]=function(e){return this.attrs[t]}},Kinetic.Node.create=function(e,t){return this._createNode(JSON.parse(e),t)},Kinetic.Node._createNode=function(e,t){var n;e.nodeType==="Shape"?e.shapeType===undefined?n="Shape":n=e.shapeType:n=e.nodeType,t&&(e.attrs.container=t);var r=new Kinetic[n](e.attrs);if(e.children)for(var i=0;i<e.children.length;i++)r.add(this._createNode(e.children[i]));return r},Kinetic.Node.addGettersSetters(Kinetic.Node,["x","y","rotation","opacity","name","id"]),Kinetic.Node.addGetters(Kinetic.Node,["scale","offset"]),Kinetic.Node.addSetters(Kinetic.Node,["width","height","listening","visible"]),Kinetic.Node.prototype.isListening=Kinetic.Node.prototype.getListening,Kinetic.Node.prototype.isVisible=Kinetic.Node.prototype.getVisible,function(){var e=["on","off"];for(var t=0;t<e.length;t++)(function(t){var n=e[t];Kinetic.Collection.prototype[n]=function(){var e=[].slice.call(arguments);e.unshift(n),this.apply.apply(this,e)}})(t)}(),Kinetic.DD={anim:new Kinetic.Animation,moving:!1,offset:{x:0,y:0}},Kinetic.DD._startDrag=function(e){var t=Kinetic.DD,n=t.node;if(n){var r=n.getStage().getUserPosition(),i=n.attrs.dragBoundFunc,s={x:r.x-t.offset.x,y:r.y-t.offset.y};i!==undefined&&(s=i.call(n,s,e)),n.setAbsolutePosition(s),t.moving||(t.moving=!0,t.node._handleEvent("dragstart",e)),t.node._handleEvent("dragmove",e)}},Kinetic.DD._endDrag=function(e){var t=Kinetic.DD,n=t.node;n&&(n.nodeType==="Stage"?n.draw():n.getLayer().draw(),t.moving&&(t.moving=!1,n._handleEvent("dragend",e))),t.node=null,t.anim.stop()},Kinetic.Node.prototype.setDraggable=function(e){this.setAttr("draggable",e),this._dragChange()},Kinetic.Node.prototype.getDraggable=function(){return this.attrs.draggable},Kinetic.Node.prototype.isDragging=function(){var e=Kinetic.DD;return e.node&&e.node._id===this._id&&e.moving},Kinetic.Node.prototype._listenDrag=function(){this._dragCleanup();var e=this;this.on("mousedown.kinetic touchstart.kinetic",function(t){e._initDrag()})},Kinetic.Node.prototype._initDrag=function(){var e=Kinetic.DD,t=this.getStage(),n=t.getUserPosition();if(n){var r=this.getTransform().getTranslation(),i=this.getAbsoluteTransform().getTranslation(),s=this.getAbsolutePosition();e.node=this,e.offset.x=n.x-s.x,e.offset.y=n.y-s.y,this.nodeType==="Stage"?e.anim.node=this:e.anim.node=this.getLayer(),e.anim.start()}},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=Kinetic.DD;e&&t.node&&t.node._id===this._id&&t._endDrag()}},Kinetic.Node.prototype._dragCleanup=function(){this.off("mousedown.kinetic"),this.off("touchstart.kinetic")},Kinetic.Node.prototype.isDraggable=Kinetic.Node.prototype.getDraggable,Kinetic.Node.addGettersSetters(Kinetic.Node,["dragBoundFunc"]),Kinetic.Transition=function(e,t){function n(e,t,i,s){for(var o in e)o!=="duration"&&o!=="easing"&&o!=="callback"&&(Kinetic.Type._isObject(e[o])?(i[o]={},n(e[o],t[o],i[o],s)):r._add(r._getTween(t,o,e[o],i,s)))}this.node=e,this.config=t,this.tweens=[];var r=this,i={};n(t,e.attrs,i,i);var s=0;for(var o=0;o<this.tweens.length;o++){var u=this.tweens[o];u.onFinished=function(){s++,s>=r.tweens.length&&r.onFinished()}}},Kinetic.Transition.prototype={start:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].start()},stop:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].stop()},resume:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].resume()},_onEnterFrame:function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].onEnterFrame()},_add:function(e){this.tweens.push(e)},_getTween:function(e,t,n,r,i){var s=this.config,o=this.node,u=s.easing;u===undefined&&(u="linear");var a=new Kinetic.Tween(o,function(e){r[t]=e,o.setAttrs(i)},Kinetic.Tweens[u],e[t],n,s.duration);return a}},Kinetic.Node.prototype.transitionTo=function(e){this.transAnim||(this.transAnim=new Kinetic.Animation);var t=this.nodeType==="Stage"?this:this.getLayer(),n=this,r=new Kinetic.Transition(this,e);return this.transAnim.func=function(){r._onEnterFrame()},this.transAnim.node=t,r.onFinished=function(){n.transAnim.stop(),e.callback&&e.callback()},r.start(),this.transAnim.start(),r},Kinetic.Container=function(e){this._containerInit(e)},Kinetic.Container.prototype={_containerInit:function(e){this.children=[],Kinetic.Node.call(this,e)},getChildren:function(){return this.children},removeChildren:function(){while(this.children.length>0)this.children[0].remove()},add:function(e){e._id=Kinetic.Global.idCounter++,e.index=this.children.length,e.parent=this,this.children.push(e);var t=e.getStage();if(!t)Kinetic.Global._addTempNode(e);else{t._addId(e),t._addName(e);var n=Kinetic.Global;n._pullNodes(t)}return this},get:function(e){var t=new Kinetic.Collection;if(e.charAt(0)==="#"){var n=this._getNodeById(e.slice(1));n&&t.push(n)}else if(e.charAt(0)==="."){var r=this._getNodesByName(e.slice(1));Kinetic.Collection.apply(t,r)}else{var i=[],s=this.getChildren();for(var o=0;o<s.length;o++)i=i.concat(s[o]._get(e));Kinetic.Collection.apply(t,i)}return t},_getNodeById:function(e){var t=this.getStage();return t.ids[e]!==undefined&&this.isAncestorOf(t.ids[e])?t.ids[e]:null},_getNodesByName:function(e){var t=this.getStage().names[e]||[];return this._getDescendants(t)},_get:function(e){var t=Kinetic.Node.prototype._get.call(this,e),n=this.getChildren();for(var r=0;r<n.length;r++)t=t.concat(n[r]._get(e));return t},toObject:function(){var e=Kinetic.Node.prototype.toObject.call(this);e.children=[];var t=this.getChildren();for(var n=0;n<t.length;n++){var r=t[n];e.children.push(r.toObject())}return e},_getDescendants:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];this.isAncestorOf(r)&&t.push(r)}return t},isAncestorOf:function(e){var t=e.getParent();while(t){if(t._id===this._id)return!0;t=t.getParent()}return!1},clone:function(e){var t=Kinetic.Node.prototype.clone.call(this,e);for(var n in this.children)t.add(this.children[n].clone());return t},getIntersections:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=[],n=this.get("Shape");for(var r=0;r<n.length;r++){var i=n[r];i.isVisible()&&i.intersects(e)&&t.push(i)}return t},_setChildrenIndices:function(){for(var e=0;e<this.children.length;e++)this.children[e].index=e},draw:function(e){if(Kinetic.Node.prototype._shouldDraw.call(this,e)){var t=this.children,n=t.length;for(var r=0;r<n;r++)t[r].draw(e)}}},Kinetic.Global.extend(Kinetic.Container,Kinetic.Node),Kinetic.Stage=function(e){this._initStage(e)},Kinetic.Stage.prototype={_initStage:function(e){this.setDefaultAttrs({width:400,height:200}),Kinetic.Container.call(this,e),this._setStageDefaultProperties(),this._id=Kinetic.Global.idCounter++,this._buildDOM(),this._bindContentEvents();var t=Kinetic.Global;t.stages.push(this),this._addId(this),this._addName(this)},setContainer:function(e){typeof e=="string"&&(e=document.getElementById(e)),this.setAttr("container",e)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this._resizeDOM()},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this._resizeDOM()},clear:function(){var e=this.children;for(var t=0;t<e.length;t++)e[t].clear()},reset:function(){this.removeChildren(),this._setStageDefaultProperties(),this.setAttrs(this.defaultNodeAttrs)},getMousePosition:function(e){return this.mousePos},getTouchPosition:function(e){return this.touchPos},getUserPosition:function(e){return this.getTouchPosition()||this.getMousePosition()},getStage:function(){return this},getDOM:function(){return this.content},toDataURL:function(e){function t(i){var s=a[i],l=s.toDataURL(),p=new Image;p.onload=function(){u.drawImage(p,0,0),i<a.length-1?t(i+1):e.callback(o.toDataURL(n,r))},p.src=l}var n=e&&e.mimeType?e.mimeType:null,r=e&&e.quality?e.quality:null,i=e&&e.width?e.width:this.attrs.width,s=e&&e.height?e.height:this.attrs.height,o=new Kinetic.Canvas(i,s),u=o.getContext(),a=this.children;t(0)},toImage:function(e){this.toDataURL({callback:function(t){Kinetic.Type._getImage(t,function(t){e.callback(t)})}})},getIntersection:function(e){var t,n=this.getChildren();for(var r=n.length-1;r>=0;r--){var i=n[r];if(i.isVisible()&&i.isListening()){var s=i.bufferCanvas.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data;if(s[3]===255){var o=Kinetic.Type._rgbToHex(s[0],s[1],s[2]);return t=Kinetic.Global.shapes[o],{shape:t,pixel:s}}if(s[0]>0||s[1]>0||s[2]>0||s[3]>0)return{pixel:s}}}return null},_getNodeById:function(e){return this.ids[e]||null},_getNodesByName:function(e){return this.names[e]||[]},_resizeDOM:function(){if(this.content){var e=this.attrs.width,t=this.attrs.height;this.content.style.width=e+"px",this.content.style.height=t+"px",this.bufferCanvas.setSize(e,t);var n=this.children;for(var r=0;r<n.length;r++){var i=n[r];i.getCanvas().setSize(e,t),i.bufferCanvas.setSize(e,t),i.draw()}}},add:function(e){return Kinetic.Container.prototype.add.call(this,e),e.canvas.setSize(this.attrs.width,this.attrs.height),e.bufferCanvas.setSize(this.attrs.width,this.attrs.height),e.draw(),this.content.appendChild(e.canvas.element),this},_setUserPosition:function(e){e||(e=window.event),this._setMousePosition(e),this._setTouchPosition(e)},_bindContentEvents:function(){var e=Kinetic.Global,t=this,n=["mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend"];for(var r=0;r<n.length;r++){var i=n[r];(function(){var e=i;t.content.addEventListener(e,function(n){t["_"+e](n)},!1)})()}},_mouseout:function(e){this._setUserPosition(e);var t=Kinetic.DD,n=this.targetShape;n&&(!t||!t.moving)&&(n._handleEvent("mouseout",e),n._handleEvent("mouseleave",e),this.targetShape=null),this.mousePos=undefined,t&&t._endDrag(e)},_mousemove:function(e){this._setUserPosition
(e);var t=Kinetic.DD,n=this.getIntersection(this.getUserPosition());if(n){var r=n.shape;r&&(!!t&&!!t.moving||n.pixel[3]!==255||!!this.targetShape&&this.targetShape._id===r._id?r._handleEvent("mousemove",e):(this.targetShape&&(this.targetShape._handleEvent("mouseout",e,r),this.targetShape._handleEvent("mouseleave",e,r)),r._handleEvent("mouseover",e,this.targetShape),r._handleEvent("mouseenter",e,this.targetShape),this.targetShape=r))}else this.targetShape&&(!t||!t.moving)&&(this.targetShape._handleEvent("mouseout",e),this.targetShape._handleEvent("mouseleave",e),this.targetShape=null);t&&t._startDrag(e)},_mousedown:function(e){this._setUserPosition(e);var t=this.getIntersection(this.getUserPosition());if(t&&t.shape){var n=t.shape;this.clickStart=!0,n._handleEvent("mousedown",e)}Kinetic.DD&&this.attrs.draggable&&this._initDrag()},_mouseup:function(e){this._setUserPosition(e);var t=Kinetic.DD,n=this.getIntersection(this.getUserPosition()),r=this;if(n&&n.shape){var i=n.shape;i._handleEvent("mouseup",e),this.clickStart&&(!t||!t.moving||!t.node)&&(i._handleEvent("click",e),this.inDoubleClickWindow&&i._handleEvent("dblclick",e),this.inDoubleClickWindow=!0,setTimeout(function(){r.inDoubleClickWindow=!1},this.dblClickWindow))}this.clickStart=!1,t&&t._endDrag(e)},_touchstart:function(e){this._setUserPosition(e),e.preventDefault();var t=this.getIntersection(this.getUserPosition());if(t&&t.shape){var n=t.shape;this.tapStart=!0,n._handleEvent("touchstart",e)}Kinetic.DD&&this.attrs.draggable&&this._initDrag()},_touchend:function(e){this._setUserPosition(e);var t=Kinetic.DD,n=this.getIntersection(this.getUserPosition()),r=this;if(n&&n.shape){var i=n.shape;i._handleEvent("touchend",e),this.tapStart&&(!t||!t.moving||!t.node)&&(i._handleEvent("tap",e),this.inDoubleClickWindow&&i._handleEvent("dbltap",e),this.inDoubleClickWindow=!0,setTimeout(function(){r.inDoubleClickWindow=!1},this.dblClickWindow))}this.tapStart=!1,t&&t._endDrag(e)},_touchmove:function(e){this._setUserPosition(e);var t=Kinetic.DD;e.preventDefault();var n=this.getIntersection(this.getUserPosition());if(n&&n.shape){var r=n.shape;r._handleEvent("touchmove",e)}t&&t._startDrag(e)},_setMousePosition:function(e){var t=e.clientX-this._getContentPosition().left,n=e.clientY-this._getContentPosition().top;this.mousePos={x:t,y:n}},_setTouchPosition:function(e){if(e.touches!==undefined&&e.touches.length===1){var t=e.touches[0],n=t.clientX-this._getContentPosition().left,r=t.clientY-this._getContentPosition().top;this.touchPos={x:n,y:r}}},_getContentPosition:function(){var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left}},_buildDOM:function(){this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.display="inline-block",this.content.className="kineticjs-content",this.attrs.container.appendChild(this.content),this.bufferCanvas=new Kinetic.Canvas({width:this.attrs.width,height:this.attrs.height}),this._resizeDOM()},_addId:function(e){e.attrs.id!==undefined&&(this.ids[e.attrs.id]=e)},_removeId:function(e){e!==undefined&&delete this.ids[e]},_addName:function(e){var t=e.attrs.name;t!==undefined&&(this.names[t]===undefined&&(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(e!==undefined){var n=this.names[e];if(n!==undefined){for(var r=0;r<n.length;r++){var i=n[r];i._id===t&&n.splice(r,1)}n.length===0&&delete this.names[e]}}},_onContent:function(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++){var i=n[r];this.content.addEventListener(i,t,!1)}},_setStageDefaultProperties:function(){this.nodeType="Stage",this.dblClickWindow=400,this.targetShape=null,this.mousePos=undefined,this.clickStart=!1,this.touchPos=undefined,this.tapStart=!1,this.ids={},this.names={}}},Kinetic.Global.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Node.addGetters(Kinetic.Stage,["container"]),Kinetic.Layer=function(e){this._initLayer(e)},Kinetic.Layer.prototype={_initLayer:function(e){this.setDefaultAttrs({clearBeforeDraw:!0}),this.nodeType="Layer",this.beforeDrawFunc=undefined,this.afterDrawFunc=undefined,this.canvas=new Kinetic.Canvas,this.canvas.getElement().style.position="absolute",this.bufferCanvas=new Kinetic.Canvas,this.bufferCanvas.name="buffer",Kinetic.Container.call(this,e)},draw:function(e){this.beforeDrawFunc!==undefined&&this.beforeDrawFunc.call(this);var t=[];e?t.push(e):(t.push(this.getCanvas()),t.push(this.bufferCanvas));var n=t.length;for(var r=0;r<n;r++){var e=t[r];Kinetic.Node.prototype._shouldDraw.call(this,e)&&(this.attrs.clearBeforeDraw&&e.clear(),Kinetic.Container.prototype.draw.call(this,e))}this.afterDrawFunc!==undefined&&this.afterDrawFunc.call(this)},drawBuffer:function(){this.draw(this.bufferCanvas)},drawScene:function(){this.draw(this.getCanvas())},beforeDraw:function(e){this.beforeDrawFunc=e},afterDraw:function(e){this.afterDrawFunc=e},getCanvas:function(){return this.canvas},getContext:function(){return this.canvas.context},clear:function(){this.getCanvas().clear()},setVisible:function(e){Kinetic.Node.prototype.setVisible.call(this,e),e?(this.canvas.element.style.display="block",this.bufferCanvas.element.style.display="block"):(this.canvas.element.style.display="none",this.bufferCanvas.element.style.display="none")},setZIndex:function(e){Kinetic.Node.prototype.setZIndex.call(this,e);var t=this.getStage();t&&(t.content.removeChild(this.canvas.element),e<t.getChildren().length-1?t.content.insertBefore(this.canvas.element,t.getChildren()[e+1].canvas.element):t.content.appendChild(this.canvas.element))},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var e=this.getStage();e&&(e.content.removeChild(this.canvas.element),e.content.appendChild(this.canvas.element))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var e=this.getStage();e&&(e.content.removeChild(this.canvas.element),this.index<e.getChildren().length-1?e.content.insertBefore(this.canvas.element,e.getChildren()[this.index+1].canvas.element):e.content.appendChild(this.canvas.element))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.canvas.element),e.content.insertBefore(this.canvas.element,t[this.index+1].canvas.element)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.canvas.element),e.content.insertBefore(this.canvas.element,t[1].canvas.element)}}},getLayer:function(){return this},toDataURL:function(e){var t,n=e&&e.mimeType?e.mimeType:null,r=e&&e.quality?e.quality:null;if(!this.isVisible()){var i=this.getStage();t=new Kinetic.Canvas(i.getWidth(),i.getHeight())}else e&&e.width&&e.height?(t=new Kinetic.Canvas(e.width,e.height),this.draw(t)):t=this.getCanvas();return t.toDataURL(n,r)},remove:function(){Kinetic.Node.prototype.remove.call(this);try{this.getStage().content.removeChild(this.canvas.element)}catch(e){Kinetic.Global.warn("unable to remove layer scene canvas element from the document")}}},Kinetic.Global.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Node.addGettersSetters(Kinetic.Layer,["clearBeforeDraw"]),Kinetic.Group=function(e){this._initGroup(e)},Kinetic.Group.prototype={_initGroup:function(e){this.nodeType="Group",Kinetic.Container.call(this,e)}},Kinetic.Global.extend(Kinetic.Group,Kinetic.Container),Kinetic.Shape=function(e){this._initShape(e)},Kinetic.Shape.prototype={_initShape:function(e){this.nodeType="Shape",this.appliedShadow=!1;var t=Kinetic.Global.shapes,n;for(;;){n=Kinetic.Type._getRandomColorKey();if(n&&!(n in t))break}this.colorKey=n,t[n]=this,Kinetic.Node.call(this,e)},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},stroke:function(e){var t=this.getStrokeWidth(),n=this.getStroke();if(n||t){var r=Kinetic.Global,i=!1;e.save(),this.attrs.shadow&&!this.appliedShadow&&(i=this._applyShadow(e)),e.lineWidth=t||2,e.strokeStyle=n||"black",e.stroke(e),e.restore(),i&&this.stroke(e)}},_getFillType:function(e){return e?Kinetic.Type._isString(e)?"COLOR":e.image?"PATTERN":e.start&&e.end&&!e.start.radius&&!e.end.radius?"LINEAR_GRADIENT":e.start&&e.end&&Kinetic.Type._isNumber(e.start.radius)&&Kinetic.Type._isNumber(e.end.radius)?"RADIAL_GRADIENT":"UNKNOWN":undefined},fill:function(e){var t=!1,n=this.getFill(),r=this._getFillType(n);if(n){e.save(),this.attrs.shadow&&!this.appliedShadow&&(t=this._applyShadow(e));var i=n.start,s=n.end;switch(r){case"COLOR":e.fillStyle=n,e.fill(e);break;case"PATTERN":var o=n.repeat?n.repeat:"repeat";n.scale&&e.scale(n.scale.x,n.scale.y),n.offset&&e.translate(n.offset.x,n.offset.y),e.fillStyle=e.createPattern(n.image,o),e.fill(e);break;case"LINEAR_GRADIENT":var u=e.createLinearGradient(i.x,i.y,s.x,s.y),a=n.colorStops;for(var f=0;f<a.length;f+=2)u.addColorStop(a[f],a[f+1]);e.fillStyle=u,e.fill(e);break;case"RADIAL_GRADIENT":var u=e.createRadialGradient(i.x,i.y,i.radius,s.x,s.y,s.radius),a=n.colorStops;for(var f=0;f<a.length;f+=2)u.addColorStop(a[f],a[f+1]);e.fillStyle=u,e.fill(e);break;default:e.fillStyle="black",e.fill(e)}e.restore()}t&&this.fill(e)},fillText:function(e,t){var n=!1;this.attrs.textFill&&(e.save(),this.attrs.shadow&&!this.appliedShadow&&(n=this._applyShadow(e)),e.fillStyle=this.attrs.textFill,e.fillText(t,0,0),e.restore()),n&&this.fillText(e,t,0,0)},strokeText:function(e,t){var n=!1;if(this.attrs.textStroke||this.attrs.textStrokeWidth){e.save(),this.attrs.shadow&&!this.appliedShadow&&(n=this._applyShadow(e));var r=this.attrs.textStroke?this.attrs.textStroke:"black",i=this.attrs.textStrokeWidth?this.attrs.textStrokeWidth:2;e.lineWidth=i,e.strokeStyle=r,e.strokeText(t,0,0),e.restore()}n&&this.strokeText(e,t,0,0)},drawImage:function(){var e=!1,t=arguments[0];t.save();var n=Array.prototype.slice.call(arguments);if(n.length===6||n.length===10)this.attrs.shadow&&!this.appliedShadow&&(e=this._applyShadow(t)),n.length===6?t.drawImage(n[1],n[2],n[3],n[4],n[5]):t.drawImage(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);t.restore(),e&&this.drawImage.apply(this,n)},applyOpacity:function(e){var t=this.getAbsoluteOpacity();t!==1&&(e.globalAlpha=t)},applyLineJoin:function(e){this.attrs.lineJoin&&(e.lineJoin=this.attrs.lineJoin)},applyLineCap:function(e){this.attrs.lineCap&&(e.lineCap=this.attrs.lineCap)},setShadow:function(e){e.offset!==undefined&&(e.offset=Kinetic.Type._getXY(e.offset)),this.setAttr("shadow",Kinetic.Type._merge(e,this.getShadow()))},setFill:function(e){var t=this.getFill(),n=this._getFillType(e),r=this._getFillType(t),i=n==="COLOR"||r==="COLOR",s=n===r||n==="UNKNOWN";e.offset!==undefined&&(e.offset=Kinetic.Type._getXY(e.offset)),!i&&s&&(e=Kinetic.Type._merge(e,t)),this.setAttr("fill",e)},setSize:function(){var e=Kinetic.Type._getSize(Array.prototype.slice.call(arguments));this.setWidth(e.width),this.setHeight(e.height)},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},_get:function(e){return this.nodeType===e||this.shapeType===e?[this]:[]},_applyShadow:function(e){var t=this.attrs.shadow;if(t){var n=this.getAbsoluteOpacity(),r=t.color?t.color:"black",i=t.blur?t.blur:5,s=t.offset?t.offset:{x:0,y:0};return t.opacity&&(e.globalAlpha=t.opacity*n),e.shadowColor=r,e.shadowBlur=i,e.shadowOffsetX=s.x,e.shadowOffsetY=s.y,this.appliedShadow=!0,!0}return!1},intersects:function(){var e=Kinetic.Type._getXY(Array.prototype.slice.call(arguments)),t=this.getStage(),n=t.bufferCanvas;n.clear(),this.draw(n);var r=n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data;return r[3]>0},remove:function(){Kinetic.Node.prototype.remove.call(this),delete Kinetic.Global.shapes[this.colorKey]},draw:function(e){if(this.attrs.drawFunc&&Kinetic.Node.prototype._shouldDraw.call(this,e)){var t=this.getStage(),n=e.getContext(),r=[],i=this.parent;r.unshift(this);while(i)r.unshift(i),i=i.parent;n.save();for(var s=0;s<r.length;s++){var o=r[s],u=o.getTransform(),a=u.getMatrix();n.transform(a[0],a[1],a[2],a[3],a[4],a[5])}this.applyOpacity(n),this.applyLineJoin(n),this.applyLineCap(n),this.appliedShadow=!1;var f=Kinetic.Global.BUFFER_WHITELIST,l=Kinetic.Global.BUFFER_BLACKLIST,c={};if(e.name==="buffer"){for(var s=0;s<f.length;s++){var h=f[s];c[h]=this.attrs[h];if(this.attrs[h]||h==="fill"&&!this.attrs.stroke&&!("image"in this.attrs))this.attrs[h]="#"+this.colorKey}for(var s=0;s<l.length;s++){var h=l[s];c[h]=this.attrs[h],this.attrs[h]=""}"image"in this.attrs&&(c.image=this.attrs.image,this.imageBuffer?this.attrs.image=this.imageBuffer:(this.attrs.image=null,this.attrs.fill="#"+this.colorKey)),n.globalAlpha=1}this.attrs.drawFunc.call(this,e.getContext());if(e.name==="buffer"){var p=f.concat(l);for(var s=0;s<p.length;s++){var h=p[s];this.attrs[h]=c[h]}this.attrs.image=c.image}n.restore()}}},Kinetic.Global.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Node.addGettersSetters(Kinetic.Shape,["stroke","lineJoin","strokeWidth","drawFunc","cornerRadius"]),Kinetic.Node.addGetters(Kinetic.Shape,["shadow","fill"]),Kinetic.Rect=function(e){this._initRect(e)},Kinetic.Rect.prototype={_initRect:function(e){this.setDefaultAttrs({width:0,height:0,cornerRadius:0}),this.shapeType="Rect",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){e.beginPath(),this.attrs.cornerRadius===0?e.rect(0,0,this.attrs.width,this.attrs.height):(e.moveTo(this.attrs.cornerRadius,0),e.lineTo(this.attrs.width-this.attrs.cornerRadius,0),e.arc(this.attrs.width-this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI*3/2,0,!1),e.lineTo(this.attrs.width,this.attrs.height-this.attrs.cornerRadius),e.arc(this.attrs.width-this.attrs.cornerRadius,this.attrs.height-this.attrs.cornerRadius,this.attrs.cornerRadius,0,Math.PI/2,!1),e.lineTo(this.attrs.cornerRadius,this.attrs.height),e.arc(this.attrs.cornerRadius,this.attrs.height-this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI/2,Math.PI,!1),e.lineTo(0,this.attrs.cornerRadius),e.arc(this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI,Math.PI*3/2,!1)),e.closePath(),this.fill(e),this.stroke(e)}},Kinetic.Global.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Circle=function(e){this._initCircle(e)},Kinetic.Circle.prototype={_initCircle:function(e){this.setDefaultAttrs({radius:0}),this.shapeType="Circle",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,Math.PI*2,!0),e.closePath(),this.fill(e),this.stroke(e)},getWidth:function(){return this.getRadius()*2},getHeight:function(){return this.getRadius()*2},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius(e/2)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius(e/2)}},Kinetic.Global.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.Circle,["radius"]),Kinetic.Ellipse=function(e){this._initEllipse(e)},Kinetic.Ellipse.prototype={_initEllipse:function(e){this.setDefaultAttrs({radius:{x:0,y:0}}),this.shapeType="Ellipse",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){var t=this.getRadius();e.beginPath(),e.save(),t.x!==t.y&&e.scale(1,t.y/t.x),e.arc(0,0,t.x,0,Math.PI*2,!0),e.restore(),e.closePath(),this.fill(e),this.stroke(e)},setRadius:function(){var e=Kinetic.Type._getXY([].slice.call(arguments));this.setAttr("radius",Kinetic.Type._merge(e,this.getRadius()))},getWidth:function(){return this.getRadius().x*2},getHeight:function(){return this.getRadius().y*2},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius({x:e/2})},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius({y:e/2})}},Kinetic.Global.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Node.addGetters(Kinetic.Ellipse,["radius"]),Kinetic.Image=function(e){this._initImage(e)},Kinetic.Image.prototype={_initImage:function(e){this.shapeType="Image",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e);var t=this;this.on("imageChange",function(e){t._syncSize()}),this._syncSize()},drawFunc:function(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),this.fill(e),this.stroke(e);if(this.attrs.image)if(this.attrs.crop&&this.attrs.crop.width&&this.attrs.crop.height){var r=this.attrs.crop.x?this.attrs.crop.x:0,i=this.attrs.crop.y?this.attrs.crop.y:0,s=this.attrs.crop.width,o=this.attrs.crop.height;this.drawImage(e,this.attrs.image,r,i,s,o,0,0,t,n)}else this.drawImage(e,this.attrs.image,0,0,t,n)},applyFilter:function(e){var t=new Kinetic.Canvas(this.attrs.image.width,this.attrs.image.height),n=t.getContext();n.drawImage(this.attrs.image,0,0);try{var r=n.getImageData(0,0,t.getWidth(),t.getHeight());e.filter(r,e.config);var i=this;Kinetic.Type._getImage(r,function(t){i.setImage(t),e.callback&&e.callback()})}catch(s){Kinetic.Global.warn("Unable to apply filter. "+s.message)}},setCrop:function(){var e=[].slice.call(arguments),t=Kinetic.Type._getXY(e),n=Kinetic.Type._getSize(e),r=Kinetic.Type._merge(t,n);this.setAttr("crop",Kinetic.Type._merge(r,this.getCrop()))},createImageBuffer:function(e){var t=new Kinetic.Canvas(this.attrs.width,this.attrs.height),n=t.getContext();n.drawImage(this.attrs.image,0,0);try{var r=n.getImageData(0,0,t.getWidth(),t.getHeight()),i=r.data,s=Kinetic.Type._hexToRgb(this.colorKey);for(var o=0,u=i.length;o<u;o+=4)i[o]=s.r,i[o+1]=s.g,i[o+2]=s.b;var a=this;Kinetic.Type._getImage(r,function(t){a.imageBuffer=t,e&&e()})}catch(f){Kinetic.Global.warn("Unable to create image buffer.")}},clearImageBuffer:function(){delete this.imageBuffer},_syncSize:function(){this.attrs.image&&(this.attrs.width||this.setWidth(this.attrs.image.width),this.attrs.height||this.setHeight(this.attrs.image.height))}},Kinetic.Global.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.Image,["image"]),Kinetic.Node.addGetters(Kinetic.Image,["crop"]),Kinetic.Polygon=function(e){this._initPolygon(e)},Kinetic.Polygon.prototype={_initPolygon:function(e){this.setDefaultAttrs({points:[]}),this.shapeType="Polygon",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){e.beginPath(),e.moveTo(this.attrs.points[0].x,this.attrs.points[0].y);for(var t=1;t<this.attrs.points.length;t++)e.lineTo(this.attrs.points[t].x,this.attrs.points[t].y);e.closePath(),this.fill(e),this.stroke(e)},setPoints:function(e){this.setAttr("points",Kinetic.Type._getPoints(e))}},Kinetic.Global.extend(Kinetic.Polygon,Kinetic.Shape),Kinetic.Node.addGetters(Kinetic.Polygon,["points"]),Kinetic.Text=function(e){this._initText(e)},Kinetic.Text.prototype={_initText:function(e){this.setDefaultAttrs({fontFamily:"Calibri",text:"",fontSize:12,align:"left",verticalAlign:"top",fontStyle:"normal",padding:0,width:"auto",height:"auto",detectionType:"path",cornerRadius:0,lineHeight:1.2}),this.dummyCanvas=document.createElement("canvas"),this.shapeType="Text",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e);var t=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height"],n=this;for(var r=0;r<t.length;r++){var i=t[r];this.on(i+"Change.kinetic",n._setTextData)}n._setTextData()},drawFunc:function(e){e.beginPath();var t=this.getWidth(),n=this.getHeight();this.attrs.cornerRadius===0?e.rect(0,0,t,n):(e.moveTo(this.attrs.cornerRadius,0),e.lineTo(t-this.attrs.cornerRadius,0),e.arc(t-this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI*3/2,0,!1),e.lineTo(t,n-this.attrs.cornerRadius),e.arc(t-this.attrs.cornerRadius,n-this.attrs.cornerRadius,this.attrs.cornerRadius,0,Math.PI/2,!1),e.lineTo(this.attrs.cornerRadius,n),e.arc(this.attrs.cornerRadius,n-this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI/2,Math.PI,!1),e.lineTo(0,this.attrs.cornerRadius),e.arc(this.attrs.cornerRadius,this.attrs.cornerRadius,this.attrs.cornerRadius,Math.PI,Math.PI*3/2,!1)),e.closePath(),this.fill(e),this.stroke(e);var r=this.attrs.padding,i=this.attrs.lineHeight*this.getTextHeight(),s=this.textArr;e.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily,e.textBaseline="middle",e.textAlign="left",e.save(),e.translate(r,0),e.translate(0,r+this.getTextHeight()/2);var o=this.appliedShadow;for(var u=0;u<s.length;u++){var a=s[u];this.appliedShadow=o,e.save(),this.attrs.align==="right"?e.translate(this.getWidth()-this._getTextSize(a).width-r*2,0):this.attrs.align==="center"&&e.translate((this.getWidth()-this._getTextSize(a).width-r*2)/2,0),this.fillText(e,a),this.strokeText(e,a),e.restore(),e.translate(0,i)}e.restore()},setText:function(e){var t=Kinetic.Type._isString(e)?e:e.toString();this.setAttr("text",t)},getWidth:function(){return this.attrs.width==="auto"?this.getTextWidth()+this.attrs.padding*2:this.attrs.width},getHeight:function(){return this.attrs.height==="auto"?this.getTextHeight()*this.textArr.length*this.attrs.lineHeight+this.attrs.padding*2:this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily;var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this.attrs.text.split(""),t=[],n=0,r=!0;this.textWidth=0,this.textHeight=this._getTextSize(this.attrs.text).height;var i=this.attrs.lineHeight*this.textHeight;while(e.length>0&&r&&(this.attrs.height==="auto"||i*(n+1)<this.attrs.height-this.attrs.padding*2)){var s=0,o=undefined;r=!1;while(s<e.length){if(e.indexOf("\n")===s){e.splice(s,1),o=e.splice(0,s).join("");break}var u=e.slice(0,s);if(this.attrs.width!=="auto"&&this._getTextSize(u.join("")).width>this.attrs.width-this.attrs.padding*2){if(s==0)break;var a=u.lastIndexOf(" "),f=u.lastIndexOf("-"),l=Math.max(a,f);if(l>=0){o=e.splice(0,1+l).join("");break}o=e.splice(0,s).join("");break}s++,s===e.length&&(o=e.splice(0,s).join(""))}this.textWidth=Math.max(this.textWidth,this._getTextSize(o).width),o!==undefined&&(t.push(o),r=!0),n++}this.textArr=t}},Kinetic.Global.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.Text,["fontFamily","fontSize","fontStyle","textFill","textStroke","textStrokeWidth","padding","align","lineHeight"]),Kinetic.Node.addGetters(Kinetic.Text,["text"]),Kinetic.Line=function(e){this._initLine(e)},Kinetic.Line.prototype={_initLine:function(e){this.setDefaultAttrs({points:[],lineCap:"butt",dashArray:[],detectionType:"pixel"}),this.shapeType="Line",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){var t={};e.beginPath(),e.moveTo(this.attrs.points[0].x,this.attrs.points[0].y);for(var n=1;n<this.attrs.points.length;n++){var r=this.attrs.points[n].x,i=this.attrs.points[n].y;if(this.attrs.dashArray.length>0){var s=this.attrs.points[n-1].x,o=this.attrs.points[n-1].y;this._dashedLine(e,s,o,r,i,this.attrs.dashArray)}else e.lineTo(r,i)}this.stroke(e)},setPoints:function(e){this.setAttr("points",Kinetic.Type._getPoints(e))},_dashedLine:function(e,t,n,r,i,s){var o=s.length,u=r-t,a=i-n,f=u>a,l=f?a/u:u/a;l>9999?l=9999:l<-9999&&(l=-9999);var c=Math.sqrt(u*u+a*a),h=0,p=!0;while(c>=.1&&h<1e4){var d=s[h++%o];d===0&&(d=.001),d>c&&(d=c);var v=Math.sqrt(d*d/(1+l*l));f?(t+=u<0&&a<0?v*-1:v,n+=u<0&&a<0?l*v*-1:l*v):(t+=u<0&&a<0?l*v*-1:l*v,n+=u<0&&a<0?v*-1:v),e[p?"lineTo":"moveTo"](t,n),c-=d,p=!p}e.moveTo(r,i)}},Kinetic.Global.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.Line,["dashArray"]),Kinetic.Node.addGetters(Kinetic.Line,["points"]),Kinetic.Sprite=function(e){this._initSprite(e)},Kinetic.Sprite.prototype={_initSprite:function(e){this.setDefaultAttrs({index:0,frameRate:17}),this.shapeType="Sprite",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e),this.anim=new Kinetic.Animation;var t=this;this.on("animationChange.kinetic",function(){t.setIndex(0)})},drawFunc:function(e){var t=this.attrs.animation,n=this.attrs.index,r=this.attrs.animations[t][n];e.beginPath(),e.rect(0,0,r.width,r.height),e.closePath(),this.fill(e),this.stroke(e),this.attrs.image&&(e.beginPath(),e.rect(0,0,r.width,r.height),e.closePath(),this.drawImage(e,this.attrs.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height))},start:function(){var e=this,t=this.getLayer();this.anim.node=t,this.interval=setInterval(function(){var t=e.attrs.index;e._updateIndex(),e.afterFrameFunc&&t===e.afterFrameIndex&&(e.afterFrameFunc(),delete e.afterFrameFunc,delete e.afterFrameIndex)},1e3/this.attrs.frameRate),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},afterFrame:function(e,t){this.afterFrameIndex=e,this.afterFrameFunc=t},_updateIndex:function(){var e=this.attrs.index,t=this.attrs.animation;e<this.attrs.animations[t].length-1?this.attrs.index++:this.attrs.index=0}},Kinetic.Global.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.Sprite,["animation","animations","index"]),Kinetic.Star=function(e){this._initStar(e)},Kinetic.Star.prototype={_initStar:function(e){this.setDefaultAttrs({numPoints:0,innerRadius:0,outerRadius:0}),this.shapeType="Star",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){e.beginPath(),e.moveTo(0,0-this.attrs.outerRadius);for(var t=1;t<this.attrs.numPoints*2;t++){var n=t%2===0?this.attrs.outerRadius:this.attrs.innerRadius,r=n*Math.sin(t*Math.PI/this.attrs.numPoints),i=-1*n*Math.cos(t*Math.PI/this.attrs.numPoints);e.lineTo(r,i)}e.closePath(),this.fill(e),this.stroke(e)}},Kinetic.Global.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.Star,["numPoints","innerRadius","outerRadius"]),Kinetic.RegularPolygon=function(e){this._initRegularPolygon(e)},Kinetic.RegularPolygon.prototype={_initRegularPolygon:function(e){this.setDefaultAttrs({radius:0,sides:0}),this.shapeType="RegularPolygon",e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e)},drawFunc:function(e){e.beginPath(),e.moveTo(0,0-this.attrs.radius);for(var t=1;t<this.attrs.sides;t++){var n=this.attrs.radius*Math.sin(t*2*Math.PI/this.attrs.sides),r=-1*this.attrs.radius*Math.cos(t*2*Math.PI/this.attrs.sides);e.lineTo(n,r)}e.closePath(),this.fill(e),this.stroke(e)}},Kinetic.Global.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.RegularPolygon,["radius","sides"]),Kinetic.Path=function(e){this._initPath(e)},Kinetic.Path.prototype={_initPath:function(e){this.shapeType="Path",this.dataArray=[];var t=this;e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e),this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange",function(){t.dataArray=Kinetic.Path.parsePathData(t.attrs.data)})},drawFunc:function(e){var t=this.dataArray;e.beginPath();for(var n=0;n<t.length;n++){var r=t[n].command,i=t[n].points;switch(r){case"L":e.lineTo(i[0],i[1]);break;case"M":e.moveTo(i[0],i[1]);break;case"C":e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":e.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var s=i[0],o=i[1],u=i[2],a=i[3],f=i[4],l=i[5],c=i[6],h=i[7],p=u>a?u:a,d=u>a?1:u/a,v=u>a?a/u:1;e.translate(s,o),e.rotate(c),e.scale(d,v),e.arc(0,0,p,f,f+l,1-h),e.scale(1/d,1/v),e.rotate(-c),e.translate(-s,-o);break;case"z":e.closePath()}}this.fill(e),this.stroke(e)}},Kinetic.Global.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},Kinetic.Path.getPointOnLine=function(e,t,n,r,i,s,o){s===undefined&&(s=t),o===undefined&&(o=n);var u=(i-n)/(r-t+1e-8),a=Math.sqrt(e*e/(1+u*u));r<t&&(a*=-1);var f=u*a,l;if((o-n)/(s-t+1e-8)===u)l={x:s+a,y:o+f};else{var c,h,p=this.getLineLength(t,n,r,i);if(p<1e-8)return undefined;var d=(s-t)*(r-t)+(o-n)*(i-n);d/=p*p,c=t+d*(r-t),h=n+d*(i-n);var v=this.getLineLength(s,o,c,h),m=Math.sqrt(e*e-v*v);a=Math.sqrt(m*m/(1+u*u)),r<t&&(a*=-1),f=u*a,l={x:c+a,y:h+f}}return l},Kinetic.Path.getPointOnCubicBezier=function(e,t,n,r,i,s,o,u,a){function f(e){return e*e*e}function l(e){return 3*e*e*(1-e)}function c(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}var p=u*f(e)+s*l(e)+r*c(e)+t*h(e),d=a*f(e)+o*l(e)+i*c(e)+n*h(e);return{x:p,y:d}},Kinetic.Path.getPointOnQuadraticBezier=function(e,t,n,r,i,s,o){function u(e){return e*e}function a(e){return 2*e*(1-e)}function f(e){return(1-e)*(1-e)}var l=s*u(e)+r*a(e)+t*f(e),c=o*u(e)+i*a(e)+n*f(e);return{x:l,y:c}},Kinetic.Path.getPointOnEllipticalArc=function(e,t,n,r,i,s){var o=Math.cos(s),u=Math.sin(s),a={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:e+(a.x*o-a.y*u),y:t+(a.x*u+a.y*o)}},Kinetic.Path.parsePathData=function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var i=t.split("|"),s=[],o=0,u=0;for(var r=1;r<i.length;r++){var a=i[r],f=a.charAt(0);a=a.slice(1),a=a.replace(new RegExp(",-","g"),"-"),a=a.replace(new RegExp("-","g"),",-"),a=a.replace(new RegExp("e,-","g"),"e-");var l=a.split(",");l.length>0&&l[0]===""&&l.shift();for(var c=0;c<l.length;c++)l[c]=parseFloat(l[c]);while(l.length>0){if(isNaN(l[0]))break;var h=null,p=[],d=o,v=u;switch(f){case"l":o+=l.shift(),u+=l.shift(),h="L",p.push(o,u);break;case"L":o=l.shift(),u=l.shift(),p.push(o,u);break;case"m":o+=l.shift(),u+=l.shift(),h="M",p.push(o,u),f="l";break;case"M":o=l.shift(),u=l.shift(),h="M",p.push(o,u),f="L";break;case"h":o+=l.shift(),h="L",p.push(o,u);break;case"H":o=l.shift(),h="L",p.push(o,u);break;case"v":u+=l.shift(),h="L",p.push(o,u);break;case"V":u=l.shift(),h="L",p.push(o,u);break;case"C":p.push(l.shift(),l.shift(),l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"c":p.push(o+l.shift(),u+l.shift(),o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"S":var m=o,g=u,y=s[s.length-1];y.command==="C"&&(m=o+(o-y.points[2]),g=u+(u-y.points[3])),p.push(m,g,l.shift(),l.shift()),o=l.shift(),u=l.shift(),h="C",p.push(o,u);break;case"s":var m=o,g=u,y=s[s.length-1];y.command==="C"&&(m=o+(o-y.points[2]),g=u+(u-y.points[3])),p.push(m,g,o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"Q":p.push(l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"q":p.push(o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="Q",p.push(o,u);break;case"T":var m=o,g=u,y=s[s.length-1];y.command==="Q"&&(m=o+(o-y.points[0]),g=u+(u-y.points[1])),o=l.shift(),u=l.shift(),h="Q",p.push(m,g,o,u);break;case"t":var m=o,g=u,y=s[s.length-1];y.command==="Q"&&(m=o+(o-y.points[0]),g=u+(u-y.points[1])),o+=l.shift(),u+=l.shift(),h="Q",p.push(m,g,o,u);break;case"A":var b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u;o=l.shift(),u=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E);break;case"a":var b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u;o+=l.shift(),u+=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E)}s.push({command:h||f,points:p,start:{x:d,y:v},pathLength:this.calcLength(d,v,h||f,p)})}(f==="z"||f==="Z")&&s.push({command:"z",points:[],start:undefined,pathLength:0})}return s},Kinetic.Path.calcLength=function(e,n,r,i){var s,o,u,a=Kinetic.Path;switch(r){case"L":return a.getLineLength(e,n,i[0],i[1]);case"C":s=0,o=a.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]);for(t=.01;t<=1;t+=.01)u=a.getPointOnCubicBezier(t,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return s;case"Q":s=0,o=a.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]);for(t=.01;t<=1;t+=.01)u=a.getPointOnQuadraticBezier(t,e,n,i[0],i[1],i[2],i[3]),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return s;case"A":s=0;var f=i[4],l=i[5],c=i[4]+l,h=Math.PI/180;Math.abs(f-c)<h&&(h=Math.abs(f-c)),o=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],f,0);if(l<0)for(t=f-h;t>c;t-=h)u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],t,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;else for(t=f+h;t<c;t+=h)u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],t,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),o=u;return u=a.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),s+=a.getLineLength(o.x,o.y,u.x,u.y),s}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(e,t,n,r,i,s,o,u,a){var f=a*(Math.PI/180),l=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,c=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,h=l*l/(o*o)+c*c/(u*u);h>1&&(o*=Math.sqrt(h),u*=Math.sqrt(h));var p=Math.sqrt((o*o*u*u-o*o*c*c-u*u*l*l)/(o*o*c*c+u*u*l*l));i==s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*c/u,v=p*-u*l/o,m=(e+n)/2+Math.cos(f)*d-Math.sin(f)*v,g=(t+r)/2+Math.sin(f)*d+Math.cos(f)*v,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},E=w([1,0],[(l-d)/o,(c-v)/u]),S=[(l-d)/o,(c-v)/u],x=[(-1*l-d)/o,(-1*c-
v)/u],T=w(S,x);return b(S,x)<=-1&&(T=Math.PI),b(S,x)>=1&&(T=0),s===0&&T>0&&(T-=2*Math.PI),s==1&&T<0&&(T+=2*Math.PI),[m,g,o,u,E,T,f,s]},Kinetic.Node.addGettersSetters(Kinetic.Path,["data"]),Kinetic.TextPath=function(e){this._initTextPath(e)},Kinetic.TextPath.prototype={_initTextPath:function(e){this.setDefaultAttrs({fontFamily:"Calibri",fontSize:12,fontStyle:"normal",detectionType:"path",text:""}),this.dummyCanvas=document.createElement("canvas"),this.shapeType="TextPath",this.dataArray=[];var t=this;e.drawFunc=this.drawFunc,Kinetic.Shape.call(this,e),this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange",function(){t.dataArray=Kinetic.Path.parsePathData(this.attrs.data)});var n=["text","textStroke","textStrokeWidth"];for(var r=0;r<n.length;r++){var i=n[r];this.on(i+"Change",t._setTextData)}t._setTextData()},drawFunc:function(e){var t=this.charArr;e.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily,e.textBaseline="middle",e.textAlign="left",e.save();var n=this.glyphInfo,r=this.appliedShadow;for(var i=0;i<n.length;i++){this.appliedShadow=r,e.save();var s=n[i].p0,o=n[i].p1,u=parseFloat(this.attrs.fontSize);e.translate(s.x,s.y),e.rotate(n[i].rotation),this.fillText(e,n[i].text),this.strokeText(e,n[i].text),e.restore()}e.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(e){Kinetic.Text.prototype.setText.call(this,e)},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this.attrs.fontStyle+" "+this.attrs.fontSize+"pt "+this.attrs.fontFamily;var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];var n=this.attrs.text.split(""),r,i,s,o=-1,u=0,a=function(){u=0;var t=e.dataArray;for(var n=o+1;n<t.length;n++){if(t[n].pathLength>0)return o=n,t[n];t[n].command=="M"&&(r={x:t[n].points[0],y:t[n].points[1]})}return{}},f=function(t,n){var o=e._getTextSize(t).width,f=0,l=0,c=!1;i=undefined;while(Math.abs(o-f)/o>.01&&l<25){l++;var h=f;while(s===undefined)s=a(),s&&h+s.pathLength<o&&(h+=s.pathLength,s=undefined);if(s==={}||r===undefined)return undefined;var p=!1;switch(s.command){case"L":Kinetic.Path.getLineLength(r.x,r.y,s.points[0],s.points[1])>o?i=Kinetic.Path.getPointOnLine(o,r.x,r.y,s.points[0],s.points[1],r.x,r.y):s=undefined;break;case"A":var d=s.points[4],v=s.points[5],m=s.points[4]+v;u===0?u=d+1e-8:o>f?u+=Math.PI/180*v/Math.abs(v):u-=Math.PI/360*v/Math.abs(v),Math.abs(u)>Math.abs(m)&&(u=m,p=!0),i=Kinetic.Path.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],u,s.points[6]);break;case"C":u===0?o>s.pathLength?u=1e-8:u=o/s.pathLength:o>f?u+=(o-f)/s.pathLength:u-=(f-o)/s.pathLength,u>1&&(u=1,p=!0),i=Kinetic.Path.getPointOnCubicBezier(u,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case"Q":u===0?u=o/s.pathLength:o>f?u+=(o-f)/s.pathLength:u-=(f-o)/s.pathLength,u>1&&(u=1,p=!0),i=Kinetic.Path.getPointOnQuadraticBezier(u,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3])}i!==undefined&&(f=Kinetic.Path.getLineLength(r.x,r.y,i.x,i.y)),p&&(p=!1,s=undefined)}};for(var l=0;l<n.length;l++){f(n[l]);if(r===undefined||i===undefined)break;var c=Kinetic.Path.getLineLength(r.x,r.y,i.x,i.y),h=0,p=Kinetic.Path.getPointOnLine(h+c/2,r.x,r.y,i.x,i.y),d=Math.atan2(i.y-r.y,i.x-r.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:n[l],rotation:d,p0:r,p1:i}),r=i}}},Kinetic.Global.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Node.addGettersSetters(Kinetic.TextPath,["fontFamily","fontSize","fontStyle","textFill","textStroke","textStrokeWidth"]),Kinetic.Node.addGetters(Kinetic.TextPath,["text"]);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/underscore-min.js */

//     Underscore.js 1.4.2
//     http://underscorejs.org
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.
(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=r.unshift,l=i.toString,c=i.hasOwnProperty,h=r.forEach,p=r.map,d=r.reduce,v=r.reduceRight,m=r.filter,g=r.every,y=r.some,b=r.indexOf,w=r.lastIndexOf,E=Array.isArray,S=Object.keys,x=s.bind,T=function(e){if(e instanceof T)return e;if(!(this instanceof T))return new T(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=T),exports._=T):e._=T,T.VERSION="1.4.2";var N=T.each=T.forEach=function(e,t,r){if(e==null)return;if(h&&e.forEach===h)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(T.has(e,o)&&t.call(r,e[o],o,e)===n)return};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),arguments.length>2?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=T.keys(e);s=o.length}N(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.find=T.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return e==null?r:(N(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,r){t||(t=T.identity);var i=!0;return e==null?i:g&&e.every===g?e.every(t,r):(N(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=T.some=T.any=function(e,t,r){t||(t=T.identity);var i=!1;return e==null?i:y&&e.some===y?e.some(t,r):(N(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};T.contains=T.include=function(e,t){var n=!1;return e==null?n:b&&e.indexOf===b?e.indexOf(t)!=-1:(n=C(e,function(e){return e===t}),n)},T.invoke=function(e,t){var n=u.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,t){return T.isEmpty(t)?[]:T.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-Infinity;var r={computed:-Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return Infinity;var r={computed:Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t,n=0,r=[];return N(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return T.isFunction(e)?e:function(t){return t[e]}};T.sortBy=function(e,t,n){var r=k(t);return T.pluck(T.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t);return N(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};T.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)})},T.countBy=function(e,t,n){return L(e,t,n,function(e,t,n){T.has(e,t)||(e[t]=0),e[t]++})},T.sortedIndex=function(e,t,n,r){n=n==null?T.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},T.toArray=function(e){return e?e.length===+e.length?u.call(e):T.values(e):[]},T.size=function(e){return e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return t!=null&&!n?u.call(e,0,t):e[0]},T.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},T.rest=T.tail=T.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})};var A=function(e,t,n){return N(e,function(e){T.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};T.flatten=function(e,t){return A(e,t,[])},T.without=function(e){return T.difference(e,u.call(arguments,1))},T.uniq=T.unique=function(e,t,n,r){var i=n?T.map(e,n,r):e,s=[],o=[];return N(i,function(n,r){if(t?!r||o[o.length-1]!==n:!T.contains(o,n))o.push(n),s.push(e[r])}),s},T.union=function(){return T.uniq(a.apply(r,arguments))},T.intersection=function(e){var t=u.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=a.apply(r,u.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){var e=u.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.object=function(e,t){var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=T.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};T.bind=function(e,t){var n,r;if(e.bind===x&&x)return x.apply(e,u.call(arguments,1));if(!T.isFunction(e))throw new TypeError;return r=u.call(arguments,2),n=function(){if(this instanceof n){O.prototype=e.prototype;var i=new O,s=e.apply(i,r.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,r.concat(u.call(arguments)))}},T.bindAll=function(e){var t=u.call(arguments,1);return t.length==0&&(t=T.functions(e)),N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(u.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,s,o,u,a=T.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&(u=e.apply(n,r)),a()};return i||(i=setTimeout(f,t)),s?o=!0:(s=!0,u=e.apply(n,r)),a(),u}},T.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},T.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push(e[n]);return t},T.pairs=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push([n,e[n]]);return t},T.invert=function(e){var t={};for(var n in e)T.has(e,n)&&(t[e[n]]=n);return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(u.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return N(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)T.contains(n,i)||(t[i]=e[i]);return t},T.defaults=function(e){return N(u.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,f=t.constructor;if(a!==f&&!(T.isFunction(a)&&a instanceof a&&T.isFunction(f)&&f instanceof f))return!1;for(var c in e)if(T.has(e,c)){o++;if(!(u=T.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(T.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};T.isEqual=function(e,t){return M(e,t,[],[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType===1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},N(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),typeof /./!="function"&&(T.isFunction=function(e){return typeof e=="function"}),T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},T.random=function(e,t){return t==null&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=T.invert(_.escape);var D={escape:new RegExp("["+T.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(_.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),T.result=function(e,t){if(e==null)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(T,e))}})};var P=0;T.uniqueId=function(e){var t=P++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){n=T.defaults({},n,T.templateSettings);var r=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),s+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?"'+\n((__t=("+r+"))==null?'':__t)+\n'":o?"';\n"+o+"\n__p+='":"",i=u+t.length}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,T);var a=function(e){return o.call(this,e,T)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},T.chain=function(e){return T(e).chain()};var F=function(e){return this._chain?T(e).chain():e};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),N(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/knockout-2.2.0.js */

// Knockout JavaScript library v2.2.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function(){function e(e){throw e}function i(e){return function(){return e}}function l(l){function c(e,t,r,i,s){var o=[],e=B.j(function(){var e=t(r,s)||[];0<o.length&&(B.a.Xa(h(o),e),i&&B.r.K(i,n,[r,e,s])),o.splice(0,o.length),B.a.P(o,e)},n,{W:e,Ja:function(){return 0==o.length||!B.a.X(o[0])}});return{M:o,j:e.oa()?e:f}}function h(e){for(;e.length&&!B.a.X(e[0]);)e.splice(0,1);if(1<e.length){for(var t=e[0],n=e[e.length-1],r=[t];t!==n;){t=t.nextSibling;if(!t)return;r.push(t)}Array.prototype.splice.apply(e,[0,e.length].concat(r))}return e}function p(e,t,n,r,i){var s=Math.min,o=Math.max,u=[],a,f=e.length,l,c=t.length,h=c-f||1,p=f+c+1,d,v,m;for(a=0;a<=f;a++){v=d,u.push(d=[]),m=s(c,a+h);for(l=o(0,a-1);l<=m;l++)d[l]=l?a?e[a-1]===t[l-1]?v[l-1]:s(v[l]||p,d[l-1]||p)+1:l+1:a+1}s=[],o=[],h=[],a=f;for(l=c;a||l;)c=u[a][l]-1,l&&c===u[a][l-1]?o.push(s[s.length]={status:n,value:t[--l],index:l}):a&&c===u[a-1][l]?h.push(s[s.length]={status:r,value:e[--a],index:a}):(s.push({status:"retained",value:t[--l]}),--a);if(o.length&&h.length)for(var e=10*f,g,t=n=0;(i||t<e)&&(g=o[n]);n++){for(r=0;u=h[r];r++)if(g.value===u.value){g.moved=u.index,u.moved=g.index,h.splice(r,1),t=r=0;break}t+=r}return s.reverse()}function d(i,s,o,u,a){var a=a||{},f=i&&v(i),f=f&&f.ownerDocument,l=a.templateEngine||Z;B.ya.ub(o,l,f),o=l.renderTemplate(o,u,a,f),("number"!=typeof o.length||0<o.length&&"number"!=typeof o[0].nodeType)&&e(Error("Template engine must return an array of DOM nodes")),f=r;switch(s){case"replaceChildren":B.e.N(i,o),f=t;break;case"replaceNode":B.a.Xa(i,o),f=t;break;case"ignoreTargetNode":break;default:e(Error("Unknown renderMode: "+s))}return f&&(m(o,u),a.afterRender&&B.r.K(a.afterRender,n,[o,u.$data])),o}function v(e){return e.nodeType?e:0<e.length?e[0]:n}function m(e,t){if(e.length){var n=e[0],r=e[e.length-1];g(n,r,function(e){B.Ca(t,e)}),g(n,r,function(e){B.s.hb(e,[t])})}}function g(e,t,n){for(var r,t=B.e.nextSibling(t);e&&(r=e)!==t;)e=B.e.nextSibling(r),(1===r.nodeType||8===r.nodeType)&&n(r)}function y(t,n,r){for(var t=B.g.aa(t),i=B.g.Q,s=0;s<t.length;s++){var o=t[s].key;if(i.hasOwnProperty(o)){var u=i[o];"function"==typeof u?(o=u(t[s].value))&&e(Error(o)):u||e(Error("This template engine does not support the '"+o+"' binding within its templates"))}}return t="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+B.g.ba(t)+" } })()})",r.createJavaScriptEvaluatorBlock(t)+n}function b(t,r,i,s){function o(e){return function(){return l[e]}}function u(){return l}var a=0,l,c;return B.j(function(){var n=i&&i instanceof B.z?i:new B.z(B.a.d(i)),h=n.$data;s&&B.cb(t,n);if(l=("function"==typeof r?r(n,t):r)||B.J.instance.getBindings(t,n)){if(0===a){a=1;for(var p in l){var d=B.c[p];d&&8===t.nodeType&&!B.e.I[p]&&e(Error("The binding '"+p+"' cannot be used with virtual elements")),d&&"function"==typeof d.init&&(d=(0,d.init)(t,o(p),u,h,n))&&d.controlsDescendantBindings&&(c!==f&&e(Error("Multiple bindings ("+c+" and "+p+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.")),c=p)}a=2}if(2===a)for(p in l)(d=B.c[p])&&"function"==typeof d.update&&(0,d.update)(t,o(p),u,h,n)}},n,{W:t}),{Mb:c===f}}function S(e,r,i){var s=t,o=1===r.nodeType;o&&B.e.Sa(r);if(o&&i||B.J.instance.nodeHasBindings(r))s=b(r,n,e,i).Mb;s&&T(e,r,!o)}function T(e,t,n){for(var r=B.e.firstChild(t);t=r;)r=B.e.nextSibling(t),S(e,t,n)}function N(e,t){var r=C(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:n}function C(t,r){for(var i=t,s=1,o=[];i=i.nextSibling;){if(k(i)&&(s--,0===s))return o;o.push(i),L(i)&&s++}return r||e(Error("Cannot find closing comment tag to match: "+t.nodeValue)),n}function k(e){return 8==e.nodeType&&(X?e.text:e.nodeValue).match($)}function L(e){return 8==e.nodeType&&(X?e.text:e.nodeValue).match(V)}function A(e,t){for(var r=n;e!=r;)r=e,e=e.replace(U,function(e,n){return t[n]});return e}function O(){var e=[],t=[];this.save=function(n,r){var i=B.a.i(e,n);0<=i?t[i]=r:(e.push(n),t.push(r))},this.get=function(n){return n=B.a.i(e,n),0<=n?t[n]:f}}function M(e,t,r){function i(n){var i=t(e[n]);switch(typeof i){case"boolean":case"number":case"string":case"function":s[n]=i;break;case"object":case"undefined":var o=r.get(i);s[n]=o!==f?o:M(i,t,r)}}r=r||new O,e=t(e);if("object"!=typeof e||e===n||e===f||e instanceof Date)return e;var s=e instanceof Array?[]:{};r.save(e,s);var o=e;if(o instanceof Array){for(var u=0;u<o.length;u++)i(u);"function"==typeof o.toJSON&&i("toJSON")}else for(u in o)i(u);return s}function _(e,t){if(e)if(8==e.nodeType){var r=B.s.Ta(e.nodeValue);r!=n&&t.push({rb:e,Eb:r})}else if(1==e.nodeType)for(var r=0,i=e.childNodes,s=i.length;r<s;r++)_(i[r],t)}function D(e,n,i,s){B.c[e]={init:function(e){return B.a.f.set(e,Q,{}),{controlsDescendantBindings:t}},update:function(e,r,o,u,a){var o=B.a.f.get(e,Q),r=B.a.d(r()),u=!i!=!r,f=!o.Ya;if(f||n||u!==o.pb)f&&(o.Ya=B.a.Ha(B.e.childNodes(e),t)),u?(f||B.e.N(e,B.a.Ha(o.Ya)),B.Da(s?s(a,r):a,e)):B.e.Y(e),o.pb=u}},B.g.Q[e]=r,B.e.I[e]=t}function P(e,t,r){r&&t!==B.k.q(e)&&B.k.T(e,t),t!==B.k.q(e)&&B.r.K(B.a.Aa,n,[e,"change"])}var B="undefined"!=typeof l?l:{};B.b=function(e,t){for(var n=e.split("."),r=B,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},B.p=function(e,t,n){e[t]=n},B.version="2.2.0",B.b("version",B.version),B.a=new function(){function i(e,t){if("input"!==B.a.u(e)||!e.type||"click"!=t.toLowerCase())return r;var n=e.type;return"checkbox"==n||"radio"==n}var l=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,c={},h={};c[/Firefox\/2/i.test(u.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],c.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");for(var p in c){var d=c[p];if(d.length)for(var v=0,m=d.length;v<m;v++)h[d[v]]=p}var g={propertychange:t},y,c=3;p=o.createElement("div");for(d=p.getElementsByTagName("i");p.innerHTML="<!--[if gt IE "+ ++c+"]><i></i><![endif]-->",d[0];);return y=4<c?c:f,{Ma:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],o:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n])},i:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},kb:function(e,t,r){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i]))return e[i];return n},ga:function(e,t){var n=B.a.i(e,t);0<=n&&e.splice(n,1)},Fa:function(e){for(var e=e||[],t=[],n=0,r=e.length;n<r;n++)0>B.a.i(t,e[n])&&t.push(e[n]);return t},V:function(e,t){for(var e=e||[],n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r]));return n},fa:function(e,t){for(var e=e||[],n=[],r=0,i=e.length;r<i;r++)t(e[r])&&n.push(e[r]);return n},P:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},ka:function(e){for(;e.firstChild;)B.removeNode(e.firstChild)},Gb:function(e){for(var e=B.a.L(e),t=o.createElement("div"),n=0,r=e.length;n<r;n++)t.appendChild(B.A(e[n]));return t},Ha:function(e,n){for(var r=0,i=e.length,s=[];r<i;r++){var o=e[r].cloneNode(t);s.push(n?B.A(o):o)}return s},N:function(e,t){B.a.ka(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Xa:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,s=0,o=t.length;s<o;s++)i.insertBefore(t[s],r);s=0;for(o=n.length;s<o;s++)B.removeNode(n[s])}},ab:function(e,t){7>y?e.setAttribute("selected",t):e.selected=t},D:function(e){return(e||"").replace(l,"")},Qb:function(e,t){for(var n=[],r=(e||"").split(t),i=0,s=r.length;i<s;i++){var o=B.a.D(r[i]);""!==o&&n.push(o)}return n},Nb:function(e,t){return e=e||"",t.length>e.length?r:e.substring(0,t.length)===t},sb:function(e,i){if(i.compareDocumentPosition)return 16==(i.compareDocumentPosition(e)&16);for(;e!=n;){if(e==i)return t;e=e.parentNode}return r},X:function(e){return B.a.sb(e,e.ownerDocument)},u:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},n:function(n,s,o){var u=y&&g[s];if(!u&&"undefined"!=typeof a){if(i(n,s))var f=o,o=function(e,n){var r=this.checked;n&&(this.checked=n.mb!==t),f.call(this,e),this.checked=r};a(n).bind(s,o)}else!u&&"function"==typeof n.addEventListener?n.addEventListener(s,o,r):"undefined"!=typeof n.attachEvent?n.attachEvent("on"+s,function(e){o.call(n,e)}):e(Error("Browser doesn't support addEventListener or attachEvent"))},Aa:function(n,u){(!n||!n.nodeType)&&e(Error("element must be a DOM node when calling triggerEvent"));if("undefined"!=typeof a){var f=[];i(n,u)&&f.push({mb:n.checked}),a(n).trigger(u,f)}else"function"==typeof o.createEvent?"function"==typeof n.dispatchEvent?(f=o.createEvent(h[u]||"HTMLEvents"),f.initEvent(u,t,t,s,0,0,0,0,0,r,r,r,r,0,n),n.dispatchEvent(f)):e(Error("The supplied element doesn't support dispatchEvent")):"undefined"!=typeof n.fireEvent?(i(n,u)&&(n.checked=n.checked!==t),n.fireEvent("on"+u)):e(Error("Browser doesn't support triggering events"))},d:function(e){return B.$(e)?e():e},ta:function(e){return B.$(e)?e.t():e},da:function(e,t,n){if(t){var r=/[\w-]+/g,i=e.className.match(r)||[];B.a.o(t.match(r),function(e){var t=B.a.i(i,e);0<=t?n||i.splice(t,1):n&&i.push(e)}),e.className=i.join(" ")}},bb:function(e,t){var r=B.a.d(t);if(r===n||r===f)r="";if(3===e.nodeType)e.data=r;else{var i=B.e.firstChild(e);!i||3!=i.nodeType||B.e.nextSibling(i)?B.e.N(e,[o.createTextNode(r)]):i.data=r,B.a.vb(e)}},$a:function(e,t){e.name=t;if(7>=y)try{e.mergeAttributes(o.createElement("<input name='"+e.name+"'/>"),r)}catch(n){}},vb:function(e){9<=y&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},tb:function(e){if(9<=y){var t=e.style.width;e.style.width=0,e.style.width=t}},Kb:function(e,t){for(var e=B.a.d(e),t=B.a.d(t),n=[],r=e;r<=t;r++)n.push(r);return n},L:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},Ob:6===y,Pb:7===y,Z:y,Na:function(e,t){for(var n=B.a.L(e.getElementsByTagName("input")).concat(B.a.L(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],s=n.length-1;0<=s;s--)r(n[s])&&i.push(n[s]);return i},Hb:function(e){return"string"==typeof e&&(e=B.a.D(e))?s.JSON&&s.JSON.parse?s.JSON.parse(e):(new Function("return "+e))():n},wa:function(t,n,r){return("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)&&e(Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js")),JSON.stringify(B.a.d(t),n,r)},Ib:function(e,t,n){var n=n||{},r=n.params||{},i=n.includeFields||this.Ma,s=e;if("object"==typeof e&&"form"===B.a.u(e))for(var s=e.action,u=i.length-1;0<=u;u--)for(var a=B.a.Na(e,i[u]),f=a.length-1;0<=f;f--)r[a[f].name]=a[f].value;var t=B.a.d(t),l=o.createElement("form");l.style.display="none",l.action=s,l.method="post";for(var c in t)e=o.createElement("input"),e.name=c,e.value=B.a.wa(B.a.d(t[c])),l.appendChild(e);for(c in r)e=o.createElement("input"),e.name=c,e.value=r[c],l.appendChild(e);o.body.appendChild(l),n.submitter?n.submitter(l):l.submit(),setTimeout(function(){l.parentNode.removeChild(l)},0)}}},B.b("utils",B.a),B.b("utils.arrayForEach",B.a.o),B.b("utils.arrayFirst",B.a.kb),B.b("utils.arrayFilter",B.a.fa),B.b("utils.arrayGetDistinctValues",B.a.Fa),B.b("utils.arrayIndexOf",B.a.i),B.b("utils.arrayMap",B.a.V),B.b("utils.arrayPushAll",B.a.P),B.b("utils.arrayRemoveItem",B.a.ga),B.b("utils.extend",B.a.extend),B.b("utils.fieldsIncludedWithJsonPost",B.a.Ma),B.b("utils.getFormFields",B.a.Na),B.b("utils.peekObservable",B.a.ta),B.b("utils.postJson",B.a.Ib),B.b("utils.parseJson",B.a.Hb),B.b("utils.registerEventHandler",B.a.n),B.b("utils.stringifyJson",B.a.wa),B.b("utils.range",B.a.Kb),B.b("utils.toggleDomNodeCssClass",B.a.da),B.b("utils.triggerEvent",B.a.Aa),B.b("utils.unwrapObservable",B.a.d),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),B.a.f=new function(){var e=0,i="__ko__"+(new Date).getTime(),s={};return{get:function(e,t){var n=B.a.f.getAll(e,r);return n===f?f:n[t]},set:function(e,n,i){i===f&&B.a.f.getAll(e,r)===f||(B.a.f.getAll(e,t)[n]=i)},getAll:function(t,n){var r=t[i];if(!r||"null"===r||!s[r]){if(!n)return f;r=t[i]="ko"+e++,s[r]={}}return s[r]},clear:function(e){var o=e[i];return o?(delete s[o],e[i]=n,t):r}}},B.b("utils.domData",B.a.f),B.b("utils.domData.clear",B.a.f.clear),B.a.F=new function(){function n(e,t){var n=B.a.f.get(e,s);return n===f&&t&&(n=[],B.a.f.set(e,s,n)),n}function i(e){var t=n(e,r);if(t)for(var t=t.slice(0),s=0;s<t.length;s++)t[s](e);B.a.f.clear(e),"function"==typeof a&&"function"==typeof a.cleanData&&a.cleanData([e]);if(u[e.nodeType])for(t=e.firstChild;e=t;)t=e.nextSibling,8===e.nodeType&&i(e)}var s="__ko_domNodeDisposal__"+(new Date).getTime(),o={1:t,8:t,9:t},u={1:t,9:t};return{Ba:function(r,i){"function"!=typeof i&&e(Error("Callback must be a function")),n(r,t).push(i)},Wa:function(e,t){var i=n(e,r);i&&(B.a.ga(i,t),0==i.length&&B.a.f.set(e,s,f))},A:function(e){if(o[e.nodeType]&&(i(e),u[e.nodeType])){var t=[];B.a.P(t,e.getElementsByTagName("*"));for(var n=0,r=t.length;n<r;n++)i(t[n])}return e},removeNode:function(e){B.A(e),e.parentNode&&e.parentNode.removeChild(e)}}},B.A=B.a.F.A,B.removeNode=B.a.F.removeNode,B.b("cleanNode",B.A),B.b("removeNode",B.removeNode),B.b("utils.domNodeDisposal",B.a.F),B.b("utils.domNodeDisposal.addDisposeCallback",B.a.F.Ba),B.b("utils.domNodeDisposal.removeDisposeCallback",B.a.F.Wa),B.a.sa=function(e){var t;if("undefined"!=typeof a){if((t=a.clean([e]))&&t[0]){for(e=t[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var n=B.a.D(e).toLowerCase();t=o.createElement("div"),n=n.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!n.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!n.indexOf("<td")||!n.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+n[1]+e+n[2]+"</div>";for("function"==typeof s.innerShiv?t.appendChild(s.innerShiv(e)):t.innerHTML=e;n[0]--;)t=t.lastChild;t=B.a.L(t.lastChild.childNodes)}return t},B.a.ca=function(e,t){B.a.ka(e),t=B.a.d(t);if(t!==n&&t!==f)if("string"!=typeof t&&(t=t.toString()),"undefined"!=typeof a)a(e).html(t);else for(var r=B.a.sa(t),i=0;i<r.length;i++)e.appendChild(r[i])},B.b("utils.parseHtmlFragment",B.a.sa),B.b("utils.setHtml",B.a.ca);var j={};B.s={qa:function(t){"function"!=typeof t&&e(Error("You can only pass a function to ko.memoization.memoize()"));var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return j[n]=t,"<!--[ko_memo:"+n+"]-->"},gb:function(r,i){var s=j[r];s===f&&e(Error("Couldn't find any memo with ID "+r+". Perhaps it's already been unmemoized."));try{return s.apply(n,i||[]),t}finally{delete j[r]}},hb:function(e,t){var n=[];_(e,n);for(var r=0,i=n.length;r<i;r++){var s=n[r].rb,o=[s];t&&B.a.P(o,t),B.s.gb(n[r].Eb,o),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},Ta:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:n}},B.b("memoization",B.s),B.b("memoization.memoize",B.s.qa),B.b("memoization.unmemoize",B.s.gb),B.b("memoization.parseMemoText",B.s.Ta),B.b("memoization.unmemoizeDomNodeAndDescendants",B.s.hb),B.La={throttle:function(e,t){e.throttleEvaluation=t;var r=n;return B.j({read:e,write:function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}})},notify:function(e,t){return e.equalityComparer="always"==t?i(r):B.m.fn.equalityComparer,e}},B.b("extenders",B.La),B.eb=function(e,t,n){this.target=e,this.ha=t,this.qb=n,B.p(this,"dispose",this.B)},B.eb.prototype.B=function(){this.Bb=t,this.qb()},B.S=function(){this.w={},B.a.extend(this,B.S.fn),B.p(this,"subscribe",this.xa),B.p(this,"extend",this.extend),B.p(this,"getSubscriptionsCount",this.xb)},B.S.fn={xa:function(e,t,n){var n=n||"change",e=t?e.bind(t):e,r=new B.eb(this,e,function(){B.a.ga(this.w[n],r)}.bind(this));return this.w[n]||(this.w[n]=[]),this.w[n].push(r),r},notifySubscribers:function(e,n){n=n||"change",this.w[n]&&B.r.K(function(){B.a.o(this.w[n].slice(0),function(n){n&&n.Bb!==t&&n.ha(e)})},this)},xb:function(){var e=0,t;for(t in this.w)this.w.hasOwnProperty(t)&&(e+=this.w[t].length);return e},extend:function(e){var t=this;if(e)for(var n in e){var r=B.La[n];"function"==typeof r&&(t=r(t,e[n]))}return t}},B.Pa=function(e){return"function"==typeof e.xa&&"function"==typeof e.notifySubscribers},B.b("subscribable",B.S),B.b("isSubscribable",B.Pa);var F=[];B.r={lb:function(e){F.push({ha:e,Ka:[]})},end:function(){F.pop()},Va:function(t){B.Pa(t)||e(Error("Only subscribable things can act as dependencies"));if(0<F.length){var n=F[F.length-1];n&&!(0<=B.a.i(n.Ka,t))&&(n.Ka.push(t),n.ha(t))}},K:function(e,t,r){try{return F.push(n),e.apply(t,r||[])}finally{F.pop()}}};var I={"undefined":t,"boolean":t,number:t,string:t};B.m=function(e){function t(){if(0<arguments.length){if(!t.equalityComparer||!t.equalityComparer(n,arguments[0]))t.H(),n=arguments[0],t.G();return this}return B.r.Va(t),n}var n=e;return B.S.call(t),t.t=function(){return n},t.G=function(){t.notifySubscribers(n)},t.H=function(){t.notifySubscribers(n,"beforeChange")},B.a.extend(t,B.m.fn),B.p(t,"peek",t.t),B.p(t,"valueHasMutated",t.G),B.p(t,"valueWillMutate",t.H),t},B.m.fn={equalityComparer:function(e,t){return e===n||typeof e in I?e===t:r}};var R=B.m.Jb="__ko_proto__";B.m.fn[R]=B.m,B.la=function(e,i){return e===n||e===f||e[R]===f?r:e[R]===i?t:B.la(e[R],i)},B.$=function(e){return B.la(e,B.m)},B.Qa=function(e){return"function"==typeof e&&e[R]===B.m||"function"==typeof e&&e[R]===B.j&&e.yb?t:r},B.b("observable",B.m),B.b("isObservable",B.$),B.b("isWriteableObservable",B.Qa),B.R=function(t){0==arguments.length&&(t=[]),t!==n&&t!==f&&!("length"in t)&&e(Error("The argument passed when initializing an observable array must be an array, or null, or undefined."));var r=B.m(t);return B.a.extend(r,B.R.fn),r},B.R.fn={remove:function(e){for(var t=this.t(),n=[],r="function"==typeof e?e:function(t){return t===e},i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.H(),n.push(s),t.splice(i,1),i--)}return n.length&&this.G(),n},removeAll:function(e){if(e===f){var t=this.t(),n=t.slice(0);return this.H(),t.splice(0,t.length),this.G(),n}return e?this.remove(function(t){return 0<=B.a.i(e,t)}):[]},destroy:function(e){var n=this.t(),r="function"==typeof e?e:function(t){return t===e};this.H();for(var i=n.length-1;0<=i;i--)r(n[i])&&(n[i]._destroy=t);this.G()},destroyAll:function(e){return e===f?this.destroy(i(t)):e?this.destroy(function(t){return 0<=B.a.i(e,t)}):[]},indexOf:function(e){var t=this();return B.a.i(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.H(),this.t()[n]=t,this.G())}},B.a.o("pop push reverse shift sort splice unshift".split(" "),function(e){B.R.fn[e]=function(){var t=this.t();return this.H(),t=t[e].apply(t,arguments),this.G(),t}}),B.a.o(["slice"],function(e){B.R.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),B.b("observableArray",B.R),B.j=function(s,o,u){function a(){B.a.o(S,function(e){e.B()}),S=[]}function l(){var e=h.throttleEvaluation;e&&0<=e?(clearTimeout(x),x=setTimeout(c,e)):c()}function c(){if(!m)if(v&&w())E();else{m=t;try{var e=B.a.V(S,function(e){return e.target});B.r.lb(function(t){var n;0<=(n=B.a.i(e,t))?e[n]=f:S.push(t.xa(l))});for(var n=g.call(o),i=e.length-1;0<=i;i--)e[i]&&S.splice(i,1)[0].B();v=t,h.notifySubscribers(d,"beforeChange"),d=n}finally{B.r.end()}h.notifySubscribers(d),m=r,S.length||E()}}function h(){return 0<arguments.length?("function"==typeof y?y.apply(o,arguments):e(Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.")),this):(v||c(),B.r.Va(h),d)}function p(){return!v||0<S.length}var d,v=r,m=r,g=s;g&&"object"==typeof g?(u=g,g=u.read):(u=u||{},g||(g=u.read)),"function"!=typeof g&&e(Error("Pass a function that returns the value of the ko.computed"));var y=u.write,b=u.disposeWhenNodeIsRemoved||u.W||n,w=u.disposeWhen||u.Ja||i(r),E=a,S=[],x=n;o||(o=u.owner),h.t=function(){return v||c(),d},h.wb=function(){return S.length},h.yb="function"==typeof u.write,h.B=function(){E()},h.oa=p,B.S.call(h),B.a.extend(h,B.j.fn),B.p(h,"peek",h.t),B.p(h,"dispose",h.B),B.p(h,"isActive",h.oa),B.p(h,"getDependenciesCount",h.wb),u.deferEvaluation!==t&&c();if(b&&p()){E=function(){B.a.F.Wa(b,arguments.callee),a()},B.a.F.Ba(b,E);var T=w,w=function(){return!B.a.X(b)||T()}}return h},B.Ab=function(e){return B.la(e,B.j)},l=B.m.Jb,B.j[l]=B.m,B.j.fn={},B.j.fn[l]=B.j,B.b("dependentObservable",B.j),B.b("computed",B.j),B.b("isComputed",B.Ab),B.fb=function(t){return 0==arguments.length&&e(Error("When calling ko.toJS, pass the object you want to convert.")),M(t,function(e){for(var t=0;B.$(e)&&10>t;t++)e=e();return e})},B.toJSON=function(e,t,n){return e=B.fb(e),B.a.wa(e,t,n)},B.b("toJS",B.fb),B.b("toJSON",B.toJSON),B.k={q:function(e){switch(B.a.u(e)){case"option":return e.__ko__hasDomDataOptionValue__===t?B.a.f.get(e,B.c.options.ra):7>=B.a.Z?e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?B.k.q(e.options[e.selectedIndex]):f;default:return e.value}},T:function(e,r){switch(B.a.u(e)){case"option":switch(typeof r){case"string":B.a.f.set(e,B.c.options.ra,f),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=r;break;default:B.a.f.set(e,B.c.options.ra,r),e.__ko__hasDomDataOptionValue__=t,e.value="number"==typeof r?r:""}break;case"select":for(var i=e.options.length-1;0<=i;i--)if(B.k.q(e.options[i])==r){e.selectedIndex=i;break}break;default:if(r===n||r===f)r="";e.value=r}}},B.b("selectExtensions",B.k),B.b("selectExtensions.readValue",B.k.q),B.b("selectExtensions.writeValue",B.k.T);var U=/\@ko_token_(\d+)\@/g,z=["true","false"],W=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;B.g={Q:[],aa:function(e){var t=B.a.D(e);if(3>t.length)return[];"{"===t.charAt(0)&&(t=t.substring(1,t.length-1));for(var e=[],r=n,i,s=0;s<t.length;s++){var o=t.charAt(s);if(r===n)switch(o){case'"':case"'":case"/":r=s,i=o}else if(o==i&&"\\"!==t.charAt(s-1)){o=t.substring(r,s+1),e.push(o);var u="@ko_token_"+(e.length-1)+"@",t=t.substring(0,r)+u+t.substring(s+1),s=s-(o.length-u.length),r=n}}i=r=n;for(var a=0,f=n,s=0;s<t.length;s++){o=t.charAt(s);if(r===n)switch(o){case"{":r=s,f=o,i="}";break;case"(":r=s,f=o,i=")";break;case"[":r=s,f=o,i="]"}o===f?a++:o===i&&(a--,0===a&&(o=t.substring(r,s+1),e.push(o),u="@ko_token_"+(e.length-1)+"@",t=t.substring(0,r)+u+t.substring(s+1),s-=o.length-u.length,r=n))}i=[],t=t.split(","),r=0;for(s=t.length;r<s;r++)a=t[r],f=a.indexOf(":"),0<f&&f<a.length-1?(o=a.substring(f+1),i.push({key:A(a.substring(0,f),e),value:A(o,e)})):i.push({unknown:A(a,e)});return i},ba:function(e){for(var t="string"==typeof e?B.g.aa(e):e,i=[],e=[],s,o=0;s=t[o];o++)if(0<i.length&&i.push(","),s.key){var u;e:{u=s.key;var a=B.a.D(u);switch(a.length&&a.charAt(0)){case"'":case'"':break e;default:u="'"+a+"'"}}s=s.value,i.push(u),i.push(":"),i.push(s),s=B.a.D(s),0<=B.a.i(z,B.a.D(s).toLowerCase())?s=r:(a=s.match(W),s=a===n?r:a[1]?"Object("+a[1]+")"+a[2]:s),s&&(0<e.length&&e.push(", "),e.push(u+" : function(__ko_value) { "+s+" = __ko_value; }"))}else s.unknown&&i.push(s.unknown);return t=i.join(""),0<e.length&&(t=t+", '_ko_property_writers' : { "+e.join("")+" } "),t},Db:function(e,n){for(var i=0;i<e.length;i++)if(B.a.D(e[i].key)==n)return t;return r},ea:function(e,t,n,r,i){!e||!B.Qa(e)?(e=t()._ko_property_writers)&&e[n]&&e[n](r):(!i||e.t()!==r)&&e(r)}},B.b("expressionRewriting",B.g),B.b("expressionRewriting.bindingRewriteValidators",B.g.Q),B.b("expressionRewriting.parseObjectLiteral",B.g.aa),B.b("expressionRewriting.preProcessBindings",B.g.ba),B.b("jsonExpressionRewriting",B.g),B.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",B.g.ba);var X="<!--test-->"===o.createComment("test").text,V=X?/^<\!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\>$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,$=X?/^<\!--\s*\/ko\s*--\>$/:/^\s*\/ko\s*$/,J={ul:t,ol:t};B.e={I:{},childNodes:function(e){return L(e)?C(e):e.childNodes},Y:function(e){if(L(e))for(var e=B.e.childNodes(e),t=0,n=e.length;t<n;t++)B.removeNode(e[t]);else B.a.ka(e)},N:function(e,t){if(L(e)){B.e.Y(e);for(var n=e.nextSibling,r=0,i=t.length;r<i;r++)n.parentNode.insertBefore(t[r],n)}else B.a.N(e,t)},Ua:function(e,t){L(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},Oa:function(e,t,n){n?L(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):B.e.Ua(e,t)},firstChild:function(e){return L(e)?!e.nextSibling||k(e.nextSibling)?n:e.nextSibling:e.firstChild},nextSibling:function(e){return L(e)&&(e=N(e)),e.nextSibling&&k(e.nextSibling)?n:e.nextSibling},ib:function(e){return(e=L(e))?e[1]:n},Sa:function(e){if(J[B.a.u(e)]){var r=e.firstChild;if(r)do if(1===r.nodeType){var i;i=r.firstChild;var s=n;if(i)do if(s)s.push(i);else if(L(i)){var o=N(i,t);o?i=o:s=[i]}else k(i)&&(s=[i]);while(i=i.nextSibling);if(i=s){s=r.nextSibling;for(o=0;o<i.length;o++)s?e.insertBefore(i[o],s):e.appendChild(i[o])}}while(r=r.nextSibling)}}},B.b("virtualElements",B.e),B.b("virtualElements.allowedBindings",B.e.I),B.b("virtualElements.emptyNode",B.e.Y),B.b("virtualElements.insertAfter",B.e.Oa),B.b("virtualElements.prepend",B.e.Ua),B.b("virtualElements.setDomNodeChildren",B.e.N),B.J=function(){this.Ga={}},B.a.extend(B.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind")!=n;case 8:return B.e.ib(e)!=n;default:return r}},getBindings:function(e,t){var r=this.getBindingsString(e,t);return r?this.parseBindingsString(r,t,e):n},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return B.e.ib(e);default:return n}},parseBindingsString:function(t,n,r){try{var i;if(!(i=this.Ga[t])){var s=this.Ga,o="with($context){with($data||{}){return{"+B.g.ba(t)+"}}}";i=s[t]=new Function("$context","$element",o)}return i(n,r)}catch(u){e(Error("Unable to parse bindings.\nMessage: "+u+";\nBindings value: "+t))}}}),B.J.instance=new B.J,B.b("bindingProvider",B.J),B.c={},B.z=function(e,t,n){t?(B.a.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=e,this.ko=B),this.$data=e,n&&(this[n]=e)},B.z.prototype.createChildContext=function(e,t){return new B.z(e,this,t)},B.z.prototype.extend=function(e){var t=B.a.extend(new B.z,this);return B.a.extend(t,e)},B.cb=function(e,t){if(2!=arguments.length)return B.a.f.get(e,"__ko_bindingContext__");B.a.f.set(e,"__ko_bindingContext__",t)},B.Ea=function(e,n,r){return 1===e.nodeType&&B.e.Sa(e),b(e,n,r,t)},B.Da=function(e,n){(1===n.nodeType||8===n.nodeType)&&T(e,n,t)},B.Ca=function(n,r){r&&1!==r.nodeType&&8!==r.nodeType&&e(Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node")),r=r||s.document.body,S(n,r,t)},B.ja=function(e){switch(e.nodeType){case 1:case 8:var t=B.cb(e);if(t)return t;if(e.parentNode)return B.ja(e.parentNode)}return f},B.ob=function(e){return(e=B.ja(e))?e.$data:f},B.b("bindingHandlers",B.c),B.b("applyBindings",B.Ca),B.b("applyBindingsToDescendants",B.Da),B.b("applyBindingsToNode",B.Ea),B.b("contextFor",B.ja),B.b("dataFor",B.ob);var K={"class":"className","for":"htmlFor"};B.c.attr={update:function(e,t){var i=B.a.d(t())||{},s;for(s in i)if("string"==typeof s){var o=B.a.d(i[s]),u=o===r||o===n||o===f;u&&e.removeAttribute(s),8>=B.a.Z&&s in K?(s=K[s],u?e.removeAttribute(s):e[s]=o):u||e.setAttribute(s,o.toString()),"name"===s&&B.a.$a(e,u?"":o.toString())}}},B.c.checked={init:function(e,n,r){B.a.n(e,"click",function(){var i;if("checkbox"==e.type)i=e.checked;else{if("radio"!=e.type||!e.checked)return;i=e.value}var s=n(),o=B.a.d(s);"checkbox"==e.type&&o instanceof Array?(i=B.a.i(o,e.value),e.checked&&0>i?s.push(e.value):!e.checked&&0<=i&&s.splice(i,1)):B.g.ea(s,r,"checked",i,t)}),"radio"==e.type&&!e.name&&B.c.uniqueName.init(e,i(t))},update:function(e,t){var n=B.a.d(t());"checkbox"==e.type?e.checked=n instanceof Array?0<=B.a.i(n,e.value):n:"radio"==e.type&&(e.checked=e.value==n)}},B.c.css={update:function(e,n){var i=B.a.d(n());if("object"==typeof i)for(var s in i){var o=B.a.d(i[s]);B.a.da(e,s,o)}else i=String(i||""),B.a.da(e,e.__ko__cssValue,r),e.__ko__cssValue=i,B.a.da(e,i,t)}},B.c.enable={update:function(e,n){var r=B.a.d(n());r&&e.disabled?e.removeAttribute("disabled"):!r&&!e.disabled&&(e.disabled=t)}},B.c.disable={update:function(e,t){B.c.enable.update(e,function(){return!B.a.d(t())})}},B.c.event={init:function(e,n,i,s){var o=n()||{},u;for(u in o)(function(){var o=u;"string"==typeof o&&B.a.n(e,o,function(e){var u,a=n()[o];if(a){var f=i();try{var l=B.a.L(arguments);l.unshift(s),u=a.apply(s,l)}finally{u!==t&&(e.preventDefault?e.preventDefault():e.returnValue=r)}f[o+"Bubble"]===r&&(e.cancelBubble=t,e.stopPropagation&&e.stopPropagation())}})})()}},B.c.foreach={Ra:function(e){return function(){var t=e(),n=B.a.ta(t);return!n||"number"==typeof n.length?{foreach:t,templateEngine:B.C.na}:(B.a.d(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:B.C.na})}},init:function(e,t){return B.c.template.init(e,B.c.foreach.Ra(t))},update:function(e,t,n,r,i){return B.c.template.update(e,B.c.foreach.Ra(t),n,r,i)}},B.g.Q.foreach=r,B.e.I.foreach=t,B.c.hasfocus={init:function(e,i,s){function o(n){e.__ko_hasfocusUpdating=t;var o=e.ownerDocument;"activeElement"in o&&(n=o.activeElement===e),o=i(),B.g.ea(o,s,"hasfocus",n,t),e.__ko_hasfocusUpdating=r}var u=o.bind(n,t),a=o.bind(n,r);B.a.n(e,"focus",u),B.a.n(e,"focusin",u),B.a.n(e,"blur",a),B.a.n(e,"focusout",a)},update:function(e,t){var r=B.a.d(t());e.__ko_hasfocusUpdating||(r?e.focus():e.blur(),B.r.K(B.a.Aa,n,[e,r?"focusin":"focusout"]))}},B.c.html={init:function(){return{controlsDescendantBindings:t}},update:function(e,t){B.a.ca(e,t())}};var Q="__ko_withIfBindingData";D("if"),D("ifnot",r,t),D("with",t,r,function(e,t){return e.createChildContext(t)}),B.c.options={update:function(n,r,i){"select"!==B.a.u(n)&&e(Error("options binding applies only to SELECT elements"));for(var s=0==n.length,u=B.a.V(B.a.fa(n.childNodes,function(e){return e.tagName&&"option"===B.a.u(e)&&e.selected}),function(e){return B.k.q(e)||e.innerText||e.textContent}),a=n.scrollTop,l=B.a.d(r());0<n.length;)B.A(n.options[0]),n.remove(0);if(l){var i=i(),c=i.optionsIncludeDestroyed;"number"!=typeof l.length&&(l=[l]);if(i.optionsCaption){var h=o.createElement("option");B.a.ca(h,i.optionsCaption),B.k.T(h,f),n.appendChild(h)}for(var r=0,p=l.length;r<p;r++){var d=l[r];if(!d||!d._destroy||c){var h=o.createElement("option"),v=function(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n},m=v(d,i.optionsValue,d);B.k.T(h,B.a.d(m)),d=v(d,i.optionsText,m),B.a.bb(h,d),n.appendChild(h)}}l=n.getElementsByTagName("option"),r=c=0;for(p=l.length;r<p;r++)0<=B.a.i(u,B.k.q(l[r]))&&(B.a.ab(l[r],t),c++);n.scrollTop=a,s&&"value"in i&&P(n,B.a.ta(i.value),t),B.a.tb(n)}}},B.c.options.ra="__ko.optionValueDomData__",B.c.selectedOptions={init:function(e,t,n){B.a.n(e,"change",function(){var r=t(),i=[];B.a.o(e.getElementsByTagName("option"),function(e){e.selected&&i.push(B.k.q(e))}),B.g.ea(r,n,"value",i)})},update:function(t,n){"select"!=B.a.u(t)&&e(Error("values binding applies only to SELECT elements"));var r=B.a.d(n());r&&"number"==typeof r.length&&B.a.o(t.getElementsByTagName("option"),function(e){var t=0<=B.a.i(r,B.k.q(e));B.a.ab(e,t)})}},B.c.style={update:function(e,t){var n=B.a.d(t()||{}),r;for(r in n)if("string"==typeof r){var i=B.a.d(n[r]);e.style[r]=i||""}}},B.c.submit={init:function(n,i,s,o){"function"!=typeof i()&&e(Error("The value for a submit binding must be a function")),B.a.n(n,"submit",function(e){var s,u=i();try{s=u.call(o,n)}finally{s!==t&&(e.preventDefault?e.preventDefault():e.returnValue=r)}})}},B.c.text={update:function(e,t){B.a.bb(e,t())}},B.e.I.text=t,B.c.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++B.c.uniqueName.nb;B.a.$a(e,n)}}},B.c.uniqueName.nb=0,B.c.value={init:function(e,n,i){function s(){a=r;var t=n(),s=B.k.q(e);B.g.ea(t,i,"value",s)}var o=["change"],u=i().valueUpdate,a=r;u&&("string"==typeof u&&(u=[u]),B.a.P(o,u),o=B.a.Fa(o)),B.a.Z&&"input"==e.tagName.toLowerCase()&&"text"==e
.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete)&&-1==B.a.i(o,"propertychange")&&(B.a.n(e,"propertychange",function(){a=t}),B.a.n(e,"blur",function(){a&&s()})),B.a.o(o,function(t){var n=s;B.a.Nb(t,"after")&&(n=function(){setTimeout(s,0)},t=t.substring(5)),B.a.n(e,t,n)})},update:function(e,n){var i="select"===B.a.u(e),s=B.a.d(n()),o=B.k.q(e),u=s!=o;0===s&&0!==o&&"0"!==o&&(u=t),u&&(o=function(){B.k.T(e,s)},o(),i&&setTimeout(o,0)),i&&0<e.length&&P(e,s,r)}},B.c.visible={update:function(e,t){var n=B.a.d(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},B.c.click={init:function(e,t,n,r){return B.c.event.init.call(this,e,function(){var e={};return e.click=t(),e},n,r)}},B.v=function(){},B.v.prototype.renderTemplateSource=function(){e(Error("Override renderTemplateSource"))},B.v.prototype.createJavaScriptEvaluatorBlock=function(){e(Error("Override createJavaScriptEvaluatorBlock"))},B.v.prototype.makeTemplateSource=function(t,n){if("string"==typeof t){var n=n||o,r=n.getElementById(t);return r||e(Error("Cannot find template with ID "+t)),new B.l.h(r)}if(1==t.nodeType||8==t.nodeType)return new B.l.O(t);e(Error("Unknown template type: "+t))},B.v.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n)},B.v.prototype.isTemplateRewritten=function(e,n){return this.allowTemplateRewriting===r?t:this.makeTemplateSource(e,n).data("isRewritten")},B.v.prototype.rewriteTemplate=function(e,n,r){e=this.makeTemplateSource(e,r),n=n(e.text()),e.text(n),e.data("isRewritten",t)},B.b("templateEngine",B.v);var G=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,Y=/<\!--\s*ko\b\s*([\s\S]*?)\s*--\>/g;B.ya={ub:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return B.ya.Fb(e,t)},n)},Fb:function(e,t){return e.replace(G,function(e,n,r,i,s,o,u){return y(u,n,t)}).replace(Y,function(e,n){return y(n,"<!-- ko -->",t)})},jb:function(e){return B.s.qa(function(t,n){t.nextSibling&&B.Ea(t.nextSibling,e,n)})}},B.b("__tr_ambtns",B.ya.jb),B.l={},B.l.h=function(e){this.h=e},B.l.h.prototype.text=function(){var e=B.a.u(this.h),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.h[e];var t=arguments[0];"innerHTML"===e?B.a.ca(this.h,t):this.h[e]=t},B.l.h.prototype.data=function(e){if(1===arguments.length)return B.a.f.get(this.h,"templateSourceData_"+e);B.a.f.set(this.h,"templateSourceData_"+e,arguments[1])},B.l.O=function(e){this.h=e},B.l.O.prototype=new B.l.h,B.l.O.prototype.text=function(){if(0==arguments.length){var e=B.a.f.get(this.h,"__ko_anon_template__")||{};return e.za===f&&e.ia&&(e.za=e.ia.innerHTML),e.za}B.a.f.set(this.h,"__ko_anon_template__",{za:arguments[0]})},B.l.h.prototype.nodes=function(){if(0==arguments.length)return(B.a.f.get(this.h,"__ko_anon_template__")||{}).ia;B.a.f.set(this.h,"__ko_anon_template__",{ia:arguments[0]})},B.b("templateSources",B.l),B.b("templateSources.domElement",B.l.h),B.b("templateSources.anonymousTemplate",B.l.O);var Z;B.va=function(t){t!=f&&!(t instanceof B.v)&&e(Error("templateEngine must inherit from ko.templateEngine")),Z=t},B.ua=function(t,r,i,s,o){i=i||{},(i.templateEngine||Z)==f&&e(Error("Set a template engine before calling renderTemplate")),o=o||"replaceChildren";if(s){var u=v(s);return B.j(function(){var e=r&&r instanceof B.z?r:new B.z(B.a.d(r)),n="function"==typeof t?t(e.$data,e):t,e=d(s,o,n,e,i);"replaceNode"==o&&(s=e,u=v(s))},n,{Ja:function(){return!u||!B.a.X(u)},W:u&&"replaceNode"==o?u.parentNode:u})}return B.s.qa(function(e){B.ua(t,r,i,e,"replaceNode")})},B.Lb=function(e,t,r,i,s){function o(e,t){m(t,a),r.afterRender&&r.afterRender(t,e)}function u(t,i){a=s.createChildContext(B.a.d(t),r.as),a.$index=i;var o="function"==typeof e?e(t,a):e;return d(n,"ignoreTargetNode",o,a,r)}var a;return B.j(function(){var e=B.a.d(t)||[];"undefined"==typeof e.length&&(e=[e]),e=B.a.fa(e,function(e){return r.includeDestroyed||e===f||e===n||!B.a.d(e._destroy)}),B.r.K(B.a.Za,n,[i,e,u,r,o])},n,{W:i})},B.c.template={init:function(e,n){var r=B.a.d(n());return"string"!=typeof r&&!r.name&&(1==e.nodeType||8==e.nodeType)&&(r=1==e.nodeType?e.childNodes:B.e.childNodes(e),r=B.a.Gb(r),(new B.l.O(e)).nodes(r)),{controlsDescendantBindings:t}},update:function(e,r,i,s,o){var r=B.a.d(r()),i={},s=t,u,a=n;"string"!=typeof r&&(i=r,r=i.name,"if"in i&&(s=B.a.d(i["if"])),s&&"ifnot"in i&&(s=!B.a.d(i.ifnot)),u=B.a.d(i.data)),"foreach"in i?a=B.Lb(r||e,s&&i.foreach||[],i,e,o):s?(o="data"in i?o.createChildContext(u,i.as):o,a=B.ua(r||e,o,i,e)):B.e.Y(e),o=a,(u=B.a.f.get(e,"__ko__templateComputedDomDataKey__"))&&"function"==typeof u.B&&u.B(),B.a.f.set(e,"__ko__templateComputedDomDataKey__",o&&o.oa()?o:f)}},B.g.Q.template=function(e){return e=B.g.aa(e),1==e.length&&e[0].unknown||B.g.Db(e,"name")?n:"This template engine does not support anonymous templates nested within its templates"},B.e.I.template=t,B.b("setTemplateEngine",B.va),B.b("renderTemplate",B.ua),B.a.Ia=function(e,t,n){return e=e||[],t=t||[],e.length<=t.length?p(e,t,"added","deleted",n):p(t,e,"deleted","added",n)},B.b("utils.compareArrays",B.a.Ia),B.a.Za=function(e,n,r,i,s){function o(e,t){E=l[t],g!==t&&(w[e]=E),E.ma(g++),h(E.M),v.push(E),b.push(E)}function u(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&B.a.o(t[n].M,function(r){e(r,n,t[n].U)})}for(var n=n||[],i=i||{},a=B.a.f.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===f,l=B.a.f.get(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],p=B.a.V(l,function(e){return e.U}),d=B.a.Ia(p,n),v=[],m=0,g=0,y=[],b=[],n=[],w=[],p=[],E,S=0,x,T;x=d[S];S++)switch(T=x.moved,x.status){case"deleted":T===f&&(E=l[m],E.j&&E.j.B(),y.push.apply(y,h(E.M)),i.beforeRemove&&(n[S]=E,b.push(E))),m++;break;case"retained":o(S,m++);break;case"added":T!==f?o(S,T):(E={U:x.value,ma:B.m(g++)},v.push(E),b.push(E),a||(p[S]=E))}u(i.beforeMove,w),B.a.o(y,i.beforeRemove?B.A:B.removeNode);for(var S=0,a=B.e.firstChild(e),N;E=b[S];S++){E.M||B.a.extend(E,c(e,r,E.U,s,E.ma));for(m=0;d=E.M[m];a=d.nextSibling,N=d,m++)d!==a&&B.e.Oa(e,d,N);!E.zb&&s&&(s(E.U,E.M,E.ma),E.zb=t)}u(i.beforeRemove,n),u(i.afterMove,w),u(i.afterAdd,p),B.a.f.set(e,"setDomNodeChildrenFromArrayMapping_lastMappingResult",v)},B.b("utils.setDomNodeChildrenFromArrayMapping",B.a.Za),B.C=function(){this.allowTemplateRewriting=r},B.C.prototype=new B.v,B.C.prototype.renderTemplateSource=function(e){var r=9>B.a.Z||!e.nodes?n:e.nodes();return r?B.a.L(r.cloneNode(t).childNodes):(e=e.text(),B.a.sa(e))},B.C.na=new B.C,B.va(B.C.na),B.b("nativeTemplateEngine",B.C),B.pa=function(){var t=this.Cb=function(){if("undefined"==typeof a||!a.tmpl)return 0;try{if(0<=a.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(r,i,s){s=s||{},2>t&&e(Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later."));var u=r.data("precompiled");return u||(u=r.text()||"",u=a.template(n,"{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}"),r.data("precompiled",u)),r=[i.$data],i=a.extend({koBindingContext:i},s.templateOptions),i=a.tmpl(u,r,i),i.appendTo(o.createElement("div")),a.fragments={},i},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){o.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<t&&(a.tmpl.tag.ko_code={open:"__.push($1 || '');"},a.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},B.pa.prototype=new B.v,l=new B.pa,0<l.Cb&&B.va(l),B.b("jqueryTmplTemplateEngine",B.pa)}var t=!0,n=null,r=!1,s=window,o=document,u=navigator,a=window.jQuery,f=void 0;"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?l(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],l):l(s.ko={}),t})();

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/knockout-custom.js */

// ############################################
// #     knockoutjs observable extensions     #
// ############################################
ko.observableArray.fn.indexed=function(){return this.subscribe(function(e){if(e){var t;for(var n=0,r=e.length;n<r;n++)t=e[n],ko.isObservable(t.$index)||(t.$index=ko.observable()),t.$index(n)}}),this.valueHasMutated(),this};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/ichie.min.js */

(function(e,t,n){var r=e.Kinetic,i=function(){this.options=null,this.clipboard=null,this.main_display=null,this.preview_display=null,this.working_canvas=null,this.command_queue=null};i.prototype={init:function(e){this.options=t.extend({},i.DEFAULT_OPTIONS,e||{});var n=this;this.options.preview_display&&(this.preview_display=new m),this.main_display=new v,this.preview_display&&this.preview_display.init({container:this.options.preview_container,onViewportChanged:n.main_display.onViewportChanged.bind(n.main_display)}),this.main_display.init({container:this.options.main_container,width:this.options.width,height:this.options.height,onViewportChanged:this.preview_display?this.preview_display.onViewPortChanged.bind(this.preview_display):function(){},onSelectionChanged:this.options.onSelectionChanged}),this.working_canvas=document.createElement("canvas"),this.command_queue=new s,this.command_queue.init()},onImageProcessed:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=this.working_canvas.getContext("2d"),i=this.working_canvas.width!==t||this.working_canvas.height!==n;i&&(this.working_canvas.width=t,this.working_canvas.height=n),r.drawImage(e,0,0),this.preview_display&&this.preview_display.setImage(e,i),this.main_display.setImage(e,i)},launch:function(e,t){var n=this,r=new Image;r.onload=function(){n.onImageProcessed(r),t()},r.src=e},showSelection:function(){this.main_display.showSelection()},hideSelection:function(){this.main_display.hideSelection()},setSelection:function(e){this.main_display.setSelection(e)},setSelectMode:function(e){this.main_display.setSelectMode(e)},copySelection:function(){var e=this.main_display.getCurrentSelection();this.clipboard=this.working_canvas.getContext("2d").getImageData(e.left,e.top,e.right-e.left,e.bottom-e.top)},downloadAsImage:function(){var e=this.working_canvas.toDataURL("image/png");e=e.replace("image/png","image/octet-stream"),document.location.href=e},getStage:function(){return this.main_display.getStage()},getLayer:function(){return this.main_display.getLayer()},getImage:function(){return this.main_display.getImage()},pasteClipboard:function(){if(!this.clipboard)return;var e=new a,t=this.main_display.getCurrentSelection(),n=this;e.init(this.working_canvas,{data:this.clipboard,coords:{x:t.left,y:t.top},onexecuted:this.onImageProcessed.bind(this)}),this.command_queue.execute(e),this.clipboard=null},filter:function(e,t){var n=new o,r=this;n.init(this.working_canvas,{filter:e,bounds:this.main_display.getCurrentSelection(),onexecuted:this.onImageProcessed.bind(this)}),this.command_queue.execute(n)},crop:function(){var e=new u,t=this;e.init(this.working_canvas,{bounds:this.main_display.getCurrentSelection(),onexecuted:t.onImageProcessed.bind(this)}),this.command_queue.execute(e)},resize:function(e,t){var n=new f,r=this;n.init(this.working_canvas,{width:e,height:t,bounds:this.main_display.getCurrentSelection(),onexecuted:r.onImageProcessed.bind(this)}),this.command_queue.execute(n)},undo:function(){this.command_queue.undo()},redo:function(){this.command_queue.redo()}},i.DEFAULT_OPTIONS={width:500,height:300,onSelectionChanged:function(){}};var s=function(){this.commands=null,this.cursor=null};s.prototype={init:function(){this.commands=[],this.cursor=-1},execute:function(e){e.execute(),this.cursor!==this.commands.length&&(this.commands=[]),this.commands.push(e),this.cursor=this.commands.length},redo:function(){this.valid()&&(this.commands[this.cursor].execute(),this.cursor++)},undo:function(){this.mayUndo()&&(this.cursor--,this.commands[this.cursor].revert())},mayUndo:function(){return!!this.commands[this.cursor-1]},valid:function(){return!!this.commands[this.cursor]}};var o=function(){this.canvas=null,this.ctx=null,this.original_data=null};o.prototype={init:function(e,n){this.options=t.extend({},o.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){var e=this.options.bounds.left,t=this.options.bounds.top,n=this.options.bounds.right-this.options.bounds.left,r=this.options.bounds.bottom-this.options.bounds.top,i=this.ctx.getImageData(e,t,n,r);this.original_data=this.ctx.getImageData(e,t,n,r);var s=g[this.options.filter](i);this.ctx.putImageData(s,e,t),this.onExecuted(this.canvas)},revert:function(){this.ctx.putImageData(this.original_data,this.options.bounds.left,this.options.bounds.top),this.onExecuted(this.canvas)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},o.DEFAULT_OPTIONS={onexecuted:function(){}};var u=function(){this.canvas=null,this.ctx=null,this.original_data=null};u.prototype={init:function(e,n){this.options=t.extend({},u.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){this.original_data=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);var e=this.options.bounds.left,t=this.options.bounds.top,n=this.options.bounds.right-this.options.bounds.left,r=this.options.bounds.bottom-this.options.bounds.top,i=this.ctx.getImageData(e,t,n,r),s=document.createElement("canvas");s.width=n,s.height=r;var o=s.getContext("2d");o.putImageData(i,0,0),this.onExecuted(s)},revert:function(){var e=document.createElement("canvas");e.width=this.original_data.width,e.height=this.original_data.height;var t=e.getContext("2d");t.putImageData(this.original_data,0,0),this.onExecuted(e)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},u.DEFAULT_OPTIONS={onexecuted:function(){}};var a=function(){this.canvas=null,this.ctx=null,this.original_data=null};a.prototype={init:function(e,n){this.options=t.extend({},a.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){var e=this.ctx.createImageData(this.options.data.width,this.options.data.height);g.Copy(this.options.data,e),this.original_data=this.ctx.getImageData(this.options.coords.x,this.options.coords.y,this.options.data.width,this.options.data.height),this.ctx.putImageData(this.options.data,this.options.coords.x,this.options.coords.y),this.options.data=e,this.onExecuted(this.canvas)},revert:function(){this.ctx.putImageData(this.original_data,this.options.coords.x,this.options.coords.y),this.onExecuted(this.canvas)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},a.DEFAULT_OPTIONS={onexecuted:function(){}};var f=function(){this.canvas=null,this.ctx=null,this.original_data=null};f.prototype={init:function(e,n){this.options=t.extend({},f.DEFAULT_OPTIONS,n||{}),this.canvas=e,this.ctx=this.canvas.getContext("2d")},execute:function(){this.original_data=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);var e=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),t=g.ResizeNearestNeighbor(e,this.options.width,this.options.height),n=document.createElement("canvas");n.width=this.options.width,n.height=this.options.height;var r=n.getContext("2d");r.putImageData(t,0,0),this.onExecuted(n)},revert:function(){var e=document.createElement("canvas");e.width=this.original_data.width,e.height=this.original_data.height;var t=e.getContext("2d");t.putImageData(this.original_data,0,0),this.onExecuted(e)},onExecuted:function(e){var t=new Image,n=this;t.onload=function(){n.options.onexecuted(t)},t.src=e.toDataURL()}},f.DEFAULT_OPTIONS={onexecuted:function(){}};var l=function(){this.display=null,this.stage=null,this.options=null,this.ratio=null,this.shapes_group=null,this.layer=null,this.resize_handles=null,this.selection_rect=null,this.resizeInteraction=null,this.resize_overlay=null,this.drag_bounds=null};l.prototype={init:function(e,n){this.display=e,this.stage=n.stage,this.options=t.extend({},l.DEFAULT_OPTIONS,n||{}),this.selection_rect=this.createSelectionRect(),this.resize_handles=this.createResizeHandles(),this.shapes_group=this.createShapesGroup(),this.ratio=this.selection_rect.getWidth()/this.selection_rect.getHeight(),this.setDragBounds({top:0,right:this.stage.getWidth(),bottom:this.stage.getHeight(),left:0}),this.layer=new r.Layer({id:"selection-layer",visible:this.options.show||!1}),this.layer.add(this.shapes_group),this.resizeInteraction=new h,this.resizeInteraction.init(this),this.resize_overlay=new c,this.resize_overlay.init(this),this.stage.add(this.layer)},createSelectionRect:function(){return new r.Rect({id:"selection-rect",width:this.options.width,height:this.options.height,fill:"rgba(0, 0, 0, 0)",stroke:"white",strokeWidth:this.options.stroke,x:0,y:0})},createResizeHandles:function(){var e=this,t=[],r=this.calculateResizeHandleCoordMap();return n.each(l.HANDLES,function(n){t.push(e.createResizeHandle(n,r))}),t},createResizeHandle:function(e,t){return new r.Rect({width:this.options.size,height:this.options.size,fill:this.options.fill,stroke:this.options.stroke,strokeWidth:this.options.stroke_width-1,x:t[e.x],y:t[e.y]})},calculateResizeHandleCoordMap:function(){return{north:-1*(this.options.size/2),east:this.selection_rect.getWidth()-this.options.size/2,south:this.selection_rect.getHeight()-this.options.size/2,west:-1*(this.options.size/2),center:this.selection_rect.getWidth()/2-this.options.size/2,middle:this.selection_rect.getHeight()/2-this.options.size/2}},createShapesGroup:function(){var e=new r.Group({draggable:!0,x:this.stage.getWidth()/2-this.options.width/2,y:this.stage.getHeight()/2-this.options.height/2});return e.add(this.selection_rect),n.each(this.resize_handles,function(t){e.add(t)}),e},updateDragBounds:function(){if(!this.shapes_group)return;var e={top:this.drag_bounds.top,right:this.drag_bounds.right-this.selection_rect.getWidth(),bottom:this.drag_bounds.bottom-this.selection_rect.getHeight(),left:this.drag_bounds.left},t=this;this.shapes_group.setDragBoundFunc(function(e){var n=e.x;e.x<t.drag_bounds.left?n=t.drag_bounds.left:e.x+t.selection_rect.getWidth()>t.drag_bounds.right&&(n=t.drag_bounds.right-t.selection_rect.getWidth());var r=e.y;return e.y<t.drag_bounds.top?r=t.drag_bounds.top:e.y+t.selection_rect.getHeight()>t.drag_bounds.bottom&&(r=t.drag_bounds.bottom-t.selection_rect.getHeight()),{x:n,y:r}}),this.resize_overlay&&this.resize_overlay.update()},setDragBounds:function(e){this.drag_bounds=e,this.updateDragBounds()},correctResizeHandlePositions:function(){var e=this,t=0,r=this.calculateResizeHandleCoordMap();n.each(l.HANDLES,function(n){var i=e.resize_handles[t++];i.setX(r[n.x]),i.setY(r[n.y])})},getSelection:function(e){var t=this.selection_rect.getAbsolutePosition(),n,r;return typeof e=="object"?(n=t.x-e.x,r=t.y-e.y):(n=t.x,r=t.y),{top:r,right:n+this.selection_rect.getWidth(),bottom:r+this.selection_rect.getHeight(),left:n}},setSelection:function(e){this.selection_rect.setWidth(e.dim.width),this.selection_rect.setHeight(e.dim.height),this.shapes_group.setX(e.pos.x),this.shapes_group.setY(e.pos.y),this.correctResizeHandlePositions(),this.resize_overlay.update(),this.updateDragBounds(),this.layer.draw(),this.options.onSelectionChanged(this.getSelection(!0))},setResizeMode:function(e){this.resizeInteraction.setMode(e)},getHandles:function(e){return t.merge([],this.resize_handles)},getSelectionRect:function(){return this.selection_rect},getImageBoundry:function(){return this.drag_bounds},getLayer:function(){return this.layer},show:function(){this.layer.show(),this.resize_overlay.show(),this.layer.draw()},hide:function(){this.layer.hide(),this.resize_overlay.hide(),this.layer.draw()}},l.HANDLES=[{x:"west",y:"north"},{x:"center",y:"north"},{x:"east",y:"north"},{x:"east",y:"middle"},{x:"east",y:"south"},{x:"center",y:"south"},{x:"west",y:"south"},{x:"west",y:"middle"}],l.DEFAULT_OPTIONS={size:15,fill:"rgba(23, 23, 223, 1)",show:!1,stroke:"white",stroke_width:2,keep_ratio:!1,onSelectionChanged:function(){}};var c=function(){this.image_selection=null,this.layer=null,this.shapes=null};c.prototype={init:function(e){this.image_selection=e,this.layer=new r.Layer({opacity:.5,visible:!1});var t=this.image_selection.drag_bounds;this.shapes={north:new r.Rect({fill:"grey",x:t.left,y:t.top,width:t.right-t.left}),east:new r.Rect({fill:"grey"}),south:new r.Rect({fill:"grey",x:t.left,width:t.right-t.left}),west:new r.Rect({fill:"grey",x:t.left})},this.layer.add(this.shapes.north),this.layer.add(this.shapes.south),this.layer.add(this.shapes.east),this.layer.add(this.shapes.west),this.image_selection.stage.add(this.layer)},update:function(){var e=this.image_selection.getImageBoundry(),t=this.image_selection.getSelectionRect(),n=t.getAbsolutePosition();this.shapes.north.setWidth(e.right-e.left),this.shapes.north.setX(e.left),this.shapes.north.setY(e.top),this.shapes.north.setHeight(Math.ceil(n.y-e.top));var r=n.y+t.getHeight();this.shapes.south.setX(e.left),this.shapes.south.setY(Math.ceil(r)),this.shapes.south.setWidth(e.right-e.left),this.shapes.south.setHeight(Math.ceil(e.bottom-r)),this.shapes.west.setX(e.left),this.shapes.west.setY(n.y),this.shapes.west.setWidth(n.x-e.left),this.shapes.west.setHeight(Math.ceil(t.getHeight()));var i=n.x+t.getWidth();this.shapes.east.setX(i),this.shapes.east.setY(Math.ceil(n.y)),this.shapes.east.setWidth(e.right-i),this.shapes.east.setHeight(Math.ceil(t.getHeight())),this.layer.draw()},show:function(){this.layer.show(),this.layer.draw()},hide:function(){this.layer.hide(),this.layer.draw()}};var h=function(){this.image_selection=null,this.handles=null,this.last_mousepos=null,this.mode=null};h.prototype={init:function(e){this.image_selection=e,this.handles=this.image_selection.getHandles(),this.canvas=t(this.image_selection.getLayer().getCanvas()),this.mode=new p,this.mode.init(this),this.last_mousepos=null,this.registerHandleEvents()},registerHandleEvents:function(){var e=this,t=function(t){var n=e.handles[t],r=function(n){e.onMouseMove(n,t)},i=function(t){e.image_selection.shapes_group.setDraggable(!0),e.last_mousepos=null,window.document.removeEventListener("mousemove",r),window.document.removeEventListener("mouseup",i)};n.on("mousedown touchstart",function(t){e.image_selection.shapes_group.setDraggable(!1),e.last_mousepos={x:t.pageX,y:t.pageY},window.document.addEventListener("mousemove",r),window.document.addEventListener("mouseup",i)})};for(var n=0;n<this.handles.length;n++)t(n);var r=this.image_selection.getSelectionRect();this.image_selection.shapes_group.on("dragmove",function(){e.image_selection.setSelection({pos:r.getAbsolutePosition(),dim:{width:r.getWidth(),height:r.getHeight()}})})},onMouseMove:function(e,t){var n={x:e.pageX,y:e.pageY},r=this.image_selection.getSelectionRect(),i=r.getAbsolutePosition(),s=r.getWidth(),o=r.getHeight(),u=this.calculateEventDelta(t,n);this.image_selection.setSelection(this.mode.buildSelectGeometry(t,u)),this.last_mousepos=n},calculateEventDelta:function(e,t){var n=t.x,r=t.y,i=n-this.last_mousepos.x,s=r-this.last_mousepos.y,o=[0,6,7],u=[0,1,2];return-1!==o.indexOf(e)&&(i*=-1),-1!==u.indexOf(e)&&(s*=-1),{x:i,y:s}},getBoundry:function(){return this.image_selection.getImageBoundry()},setMode:function(e){"keep-ratio"===e?this.mode=new d:this.mode=new p,this.mode.init(this)},getImageSelection:function(){return this.image_selection}},h.DIRECTION={HORIZONTAL:"horizontal",VERTICAL:"vertical",BOTH:"both"},h.MODE={DEFAULT:"default",RATIO:"ratio"};var p=function(){this.interaction=null};p.prototype={init:function(e){this.interaction=e},buildSelectGeometry:function(e,t){return this.clipSelectionToBoundry({pos:this.calculateSelectPostion(e,t),dim:this.calculateSelectDimensions(e,t)})},calculateSelectDimensions:function(e,t){var n=this.interaction.getImageSelection(),r=n.getSelectionRect(),i=r.getWidth(),s=r.getHeight(),o=h.DIRECTION,u=this.determineResizeDirection(e,t);return i+=u===o.HORIZONTAL||u===o.BOTH?t.x:0,s+=u===o.VERTICAL||u===o.BOTH?t.y:0,{width:i,height:s}},determineResizeDirection:function(e,t){var r=h.DIRECTION,i=null,s={};return s[r.HORIZONTAL]=[3,7],s[r.VERTICAL]=[1,5],s[r.BOTH]=[0,2,4,6],n.each(s,function(t,n){-1!==t.indexOf(e)&&(i=n)}),i},calculateSelectPostion:function(e,t){var n=this.interaction.getImageSelection(),r=n.getSelectionRect(),i=r.getAbsolutePosition(),s=i.x,o=i.y,u=[0,6,7],a=[0,1,2];return s-=-1!==u.indexOf(e)?t.x:0,o-=-1!==a.indexOf(e)?t.y:0,{x:s,y:o}},clipSelectionToBoundry:function(e){var t=this.interaction.getImageSelection(),n=this.interaction.getBoundry(),r=e.pos,i=e.dim,s=t.getSelectionRect(),o=s.getAbsolutePosition(),u={top:r.y,right:r.x+i.width,bottom:r.y+i.height,left:r.x},a={width:s.getWidth(),height:s.getHeight()};return u.left<n.left&&(r.x=n.left,i.width=a.width+(o.x-r.x)),u.right>n.right&&(i.width=n.right-r.x),u.top<n.top&&(r.y=n.top,i.height=a.height+(o.y-r.y)),u.bottom>n.bottom&&(i.height=n.bottom-r.y),{pos:r,dim:i}}};var d=function(){p.prototype.constructor.call(this)};d.prototype=new p,d.prototype.constructor=d,d.prototype.buildSelectGeometry=function(e,t){var n=p.prototype.buildSelectGeometry.call(this,e,t),r=this.interaction.getImageSelection(),i=h.DIRECTION,s=this.determineResizeDirection(e,t),o=n.dim,u=n.pos,a=this.interaction.getBoundry(),f=r.getSelectionRect(),l=f.getAbsolutePosition(),c=[0,6],d=[0,2];if(s===i.HORIZONTAL)if(u.y+o.height>=a.bottom&&3<=e&&7>=e&&f.getWidth()<=o.width)o.height=a.bottom-u.y,o.width=o.height*r.ratio,u.x=l.x;else if(u.y<=a.top&&0<=e&&2>=e&&f.getWidth()<=o.width){var v=u.y+o.height;u.y=a.top,o.height=a.top-u.y,o.width=o.height*r.ratio,u.x=l.x}else{var m=o.width/r.ratio;-1!==d.indexOf(e)&&(u.y=l.y-(m-f.getHeight())),o.height=m}else if(u.x+o.width>=a.right&&1<=e&&5>=e&&f.getHeight()<=o.height)o.width=a.right-u.x,o.height=o.width/r.ratio,u.y=l.y;else if(u.x<=a.left&&-1!==[0,6,7].indexOf(e)&&f.getHeight()<=o.height){var g=u.x+o.width;u.x=a.left,o.width=g-u.x,o.height=o.width/r.ratio,u.y=l.y}else{var y=o.height*r.ratio;-1!==c.indexOf(e)&&(u.x=l.x-(y-f.getWidth())),o.width=y}return{pos:u,dim:o}},d.prototype.determineResizeDirection=function(e,t){var n=h.DIRECTION,r=p.prototype.determineResizeDirection.call(this,e,t);return n.BOTH===r&&(r=Math.abs(t.x)<Math.abs(t.y)?n.VERTICAL:n.HORIZONTAL),r};var v=function(){this.stage=null,this.layer=null,this.image=null,this.scale_x=null,this.scale_y=null,this.drag_bounds=null,this.original_bounds=null,this.natural_dim=null,this.zoom_handler=null,this.image_selection=null};v.prototype={init:function(e){this.options=t.extend({},v.DEFAULT_OPTIONS,e||{}),this.options.container=t(this.options.container).first(),this.natural_dim={width:0,height:0},this.stage=new r.Stage({width:this.options.width,height:this.options.height,container:this.options.container[0]}),this.layer=new r.Layer({id:"image-layer"}),this.image=new r.Image({id:"preview-image",draggable:!0}),this.layer.add(this.image),this.stage.add(this.layer);var n=this;this.image_selection=new l,this.image_selection.init(this,{stage:this.stage,width:e.select_width||this.stage.getWidth(),height:e.select_height||this.stage.getHeight(),onSelectionChanged:function(){n.options.onSelectionChanged(n.getCurrentSelection())}}),this.zoom_handler=this.onImageZoomed.bind(this),this.image.on("dragmove",function(){n.options.onViewportChanged(n.translateDimensions({top:-n.image.getY(),right:-n.image.getX()+n.stage.getWidth(),bottom:-n.image.getY()+n.stage.getHeight(),left:-n.image.getX()})),n.options.onSelectionChanged(n.getCurrentSelection())})},fitImageToStage:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=t/n,i=this.stage.getWidth(),s=this.stage.getHeight(),o=i/s,u,a;o<=r&&i<t?(u=i,a=u/r):o>r&&s<n?(a=s,u=a*r):(u=t,a=n),this.scale_x=t/u,this.scale_y=n/a,this.image.setHeight(a),this.image.setWidth(u);var f=i/2-u/2,l=s/2-a/2;return this.image.setX(f),this.image.setY(l),{top:l,right:f+u,bottom:l+a,left:f}},setImageDragBounds:function(e){this.drag_bounds=e;var t=e.left<0?0:e.left,n=e.top<0?0:e.top,r=e.right-e.left,i=e.bottom-e.top,s=this.stage.getWidth(),o=this.stage.getHeight(),u=r>s?s:r,a=i>o?o:i;this.image_selection.setDragBounds({top:n,right:t+u,bottom:n+a,left:t})},manageZoomHandler:function(){1<this.scale_x||1<this.scale_y?t(this.stage.getDOM()).bind("mousewheel",this.zoom_handler):t(this.stage.getDOM()).unbind("mousewheel",this.zoom_handler)},onImageZoomed:function(e,t,n,r){n=Math.ceil(n),r=Math.ceil(r);var i,s,o=this.natural_dim.width/this.natural_dim.height,u=this.image.getHeight()+r,a=u*o,f=this.original_bounds.bottom-this.original_bounds.top,l=this.stage.getWidth(),c=this.stage.getHeight();return this.image.getHeight()===f&&0>=r?!1:(u<f?(i=this.original_bounds.left,s=this.original_bounds.top,u=f,a=u*o):(i=l/2-a/2,s=c/2-u/2),this.image.setX(i),this.image.setY(s),this.image.setHeight(u),this.image.setWidth(a),this.scale_x=this.natural_dim.width/a,this.scale_y=this.natural_dim.height/u,this.setImageDragBounds({top:s,right:i+a,bottom:s+u,left:i}),this.updateViewportDragBounds(),this.layer.draw(),this.options.onViewportChanged(this.translateDimensions({top:-s,right:-i+l,bottom:-s+c,left:-i})),this.options.onSelectionChanged(this.getCurrentSelection()),!1)},updateViewportDragBounds:function(){var e={},t=this.image.getWidth(),n=this.image.getHeight(),r=this.stage.getWidth(),i=this.stage.getHeight();t>r?(e.left=r-t,e.right=0):(e.left=this.image.getX(),e.right=e.left),n>i?(e.top=i-n,e.bottom=0):(e.top=this.image.getY(),e.bottom=e.top),this.image.setDragBoundFunc(function(t){var n=t.x;t.x<e.left?n=e.left:t.x>e.right&&(n=e.right);var r=t.y;return t.y<e.top?r=e.top:t.y>e.bottom&&(r=e.bottom),{x:n,y:r}})},translateDimensions:function(e){return{top:e.top*this.scale_y,right:e.right*this.scale_x,bottom:e.bottom*this.scale_y,left:e.left*this.scale_x}},setImage:function(e){var n=this.natural_dim.width,r=this.natural_dim.height;this.natural_dim={width:e.naturalWidth,height:e.naturalHeight},this.image.setImage(e);if(n!==this.natural_dim.width||r!==this.natural_dim.height){this.original_bounds=this.fitImageToStage(e);var i=this.image.getX(),s=this.image.getY(),o=this.image.getWidth(),u=this.image.getHeight(),a=this.stage.getWidth(),f=this.stage.getHeight();this.setImageDragBounds(t.extend({},this.original_bounds)),this.image_selection.setSelection({dim:{width:o,height:u},pos:{x:i,y:s}}),this.updateViewportDragBounds(),this.options.onViewportChanged(this.translateDimensions({top:-s,right:-i+a,bottom:-s+f,left:-i})),this.manageZoomHandler()}this.layer.draw()},onViewportChanged:function(e){var t=this.image.getAbsolutePosition(),n=(e.right-e.left)/this.scale_x,r=(e.bottom-e.top)/this.scale_y,i=this.natural_dim.width/this.natural_dim.height,s=this.stage.getHeight()/r,o=this.stage.getWidth()/n,u=this.natural_dim.height/this.scale_y*s,a=u*i,f=-(e.left/this.scale_x)*o,l=-(e.top/this.scale_y)*s;this.image.setHeight(u),this.image.setWidth(a),this.image.setX(f),this.image.setY(l),this.scale_x=this.natural_dim.width/a,this.scale_y=this.natural_dim.height/u,this.setImageDragBounds({top:l,right:f+a,bottom:l+u,left:f}),this.updateViewportDragBounds(),this.layer.draw(),this.options.onSelectionChanged(this.getCurrentSelection())},getCurrentSelection:function(){var e=this.image.getAbsolutePosition();return this.translateDimensions(this.image_selection.getSelection(e))},showSelection:function(){this.image_selection.show()},hideSelection:function(){this.image_selection.hide()},setSelection:function(e){var t={top:Math.round(e.top/this.scale_y),right:Math.round(e.right/this.scale_x),bottom:Math.round(e.bottom/this.scale_y),left:Math.round(e.left/this.scale_x)},n=this.image.getAbsolutePosition();this.image_selection.setSelection({pos:{x:t.left+n.x,y:t.top+n.y},dim:{width:t.right-t.left,height:t.bottom-t.top}})},setSelectMode:function(e){this.image_selection.setResizeMode(e)},getImageBoundry:function(){return this.drag_bounds}},v.DEFAULT_OPTIONS={width:400,height:300,onViewportChanged:function(){},onSelectionChanged:function(){}};var m=function(){this.stage=null,this.layer=null,this.image=null,this.scale_x=null,this.scale_y=null,this.original_dim=null,this.orig_viewport_size=null,this.viewport_rect=null};m.prototype={init:function(e){this.options=t.extend({},m.DEFAULT_OPTIONS,e||{}),this.options.container=t(this.options.container).first(),this.original_dim={width:0,height:0},this.stage=new r.Stage({width:this.options.width,height:this.options.height,container:this.options.container[0]}),this.layer=new r.Layer({id:"image-layer"}),this.image=new r.Image({id:"preview-image"}),this.viewport_rect=new r.Rect({id:"viewport-rect",fill:"rgba(0, 0, 0, 0)",stroke:"black",strokeWidth:.5,draggable:!0});var n=this;this.viewport_rect.on("dragmove",function(){n.options.onViewportChanged(n.translateDimensions(n.getRelativeViewportBounds()))}),t(this.stage.getDOM()).bind("mousewheel",this.onViewportZoomed.bind(this)),this.layer.add(this.image),this.layer.add(this.viewport_rect),this.stage.add(this.layer)},onViewportZoomed:function(e,t,n,r){n=-Math.ceil(n),r=-Math.ceil(r);var i,s,o=this.orig_viewport_size.width/this.orig_viewport_size.height,u=this.viewport_rect.getHeight()+r,a=u*o,f=this.orig_viewport_size.height,l=15,c=this.stage.getWidth(),h=this.stage.getHeight();return this.viewport_rect.getHeight()===f&&0<r||this.viewport_rect.getHeight()===l&&0>r?!1:(u>=f?(i=this.orig_viewport_size.x,s=this.orig_viewport_size.y,u=f,a=u*o):u<=l?(u=l,a=u*o,i=c/2-a/2,s=h/2-u/2):(i=c/2-a/2,s=h/2-u/2),this.viewport_rect.setX(i),this.viewport_rect.setY(s),this.viewport_rect.setHeight(u),this.viewport_rect.setWidth(a),this.updateViewportDragBounds(),this.layer.draw(),this.options.onViewportChanged(this.translateDimensions(this.getRelativeViewportBounds())),!1)},fitImageToStage:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=t/n,i=this.stage.getWidth(),s=this.stage.getHeight(),o=i/s,u,a;o<=r&&i<t?(u=i,a=u/r):o>r&&s<n?(a=s,u=a*r):(u=t,a=n),this.scale_x=t/u,this.scale_y=n/a,this.image.setHeight(a),this.image.setWidth(u);var f=i/2-u/2,l=s/2-a/2;this.image.setX(f),this.image.setY(l)},updateViewportDragBounds:function(){var e={},t=this.image.getWidth(),n=this.image.getHeight(),r=this.viewport_rect.getWidth(),i=this.viewport_rect.getHeight();t>r?(e.left=this.image.getX(),e.right=this.image.getX()+t-r):(e.left=this.viewport_rect.getX(),e.right=e.left),n>i?(e.top=this.image.getY(),e.bottom=this.image.getY()+n-i):(e.top=this.image.getY(),e.bottom=e.top),this.viewport_rect.setDragBounds(e)},getRelativeViewportBounds:function(){var e=this.viewport_rect.getAbsolutePosition(),t=this.image.getAbsolutePosition(),n=e.x-t.x,r=e.y-t.y;return{top:r,right:n+this.viewport_rect.getWidth(),bottom:r+this.viewport_rect.getHeight(),left:n}},translateDimensions:function(e){return{top:e.top*this.scale_y,right:e.right*this.scale_x,bottom:e.bottom*this.scale_y,left:e.left*this.scale_x}},setImage:function(e){var t=this.original_dim.width,n=this.original_dim.height;this.original_dim={width:e.naturalWidth,height:e.naturalHeight},(t!==this.original_dim.width||n!==this.original_dim.height)&&this.fitImageToStage(e),this.image.setImage(e),this.updateViewportDragBounds(),this.layer.draw()},onViewPortChanged:function(e){var t=this.image.getAbsolutePosition(),n=e.left/this.scale_x+t.x,r=e.top/this.scale_y+t.y,i=(e.right-e.left)/this.scale_x,s=(e.bottom-e.top)/this.scale_y;this.viewport_rect.setWidth(i),this.viewport_rect.setHeight(s),this.viewport_rect.setX(n),this.viewport_rect.setY(r),this.updateViewportDragBounds(),this.layer.draw(),this.orig_viewport_size||(this.orig_viewport_size={width:this.viewport_rect.getWidth(),height:this.viewport_rect.getHeight(),x:this.viewport_rect.getX(),y:this.viewport_rect.getY()})}},m.DEFAULT_OPTIONS={width:250,height:150,onViewportChanged:function(){}};var g={};g.utils={initSampleCanvas:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=0,e.height=0,this.getSampleCanvas=function(){return e},this.getSampleContext=function(){return t},this.createImageData=t.createImageData?function(e,n){return t.createImageData(e,n)}:function(e,t){return new ImageData(e,t)}},getSampleCanvas:function(){return this.initSampleCanvas(),this.getSampleCanvas()},getSampleContext:function(){return this.initSampleCanvas(),this.getSampleContext()},createImageData:function(e,t){return this.initSampleCanvas(),this.createImageData(e,t)},clamp:function(e){return e>255?255:e<0?0:e},buildMap:function(e){for(var t=[],n=0,r;n<256;n+=1)t[n]=(r=e(n))>255?255:r<0?0:r|0;return t},applyMap:function(e,t,n){for(var r=0,i=e.length;r<i;r+=4)t[r]=n[e[r]],t[r+1]=n[e[r+1]],t[r+2]=n[e[r+2]],t[r+3]=e[r+3]},mapRGB:function(e,t,n){this.applyMap(e,t,this.buildMap(n))},getPixelIndex:function(e,t,n,r,i){if(e<0||e>=n||t<0||t>=r)switch(i){case 1:e=e<0?0:e>=n?n-1:e,t=t<0?0:t>=r?r-1:t;break;case 2:e=(e%=n)<0?e+n:e,t=(t%=r)<0?t+r:t;break;default:return null}return t*n+e<<2},getPixel:function(e,t,n,r,i,s){if(t<0||t>=r||n<0||n>=i)switch(s){case 1:t=t<0?0:t>=r?r-1:t,n=n<0?0:n>=i?i-1:n;break;case 2:t=(t%=r)<0?t+r:t,n=(n%=i)<0?n+i:n;break;default:return 0}var o=n*r+t<<2;return e[o+3]<<24|e[o]<<16|e[o+1]<<8|e[o+2]},getPixelByIndex:function(e,t){return e[t+3]<<24|e[t]<<16|e[t+1]<<8|e[t+2]},copyBilinear:function(e,t,n,r,i,s,o,u){var a=t<0?t-1|0:t|0,f=n<0?n-1|0:n|0,l=t-a,c=n-f,h,p=0,d=0,v=0,m=0,g,y,b,w,E,S;if(a>=0&&a<r-1&&f>=0&&f<i-1){h=f*r+a<<2;if(!l&&!c){s[o]=e[h],s[o+1]=e[h+1],s[o+2]=e[h+2],s[o+3]=e[h+3];return}p=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2],h+=4,d=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2],h=h-8+(r<<2),v=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2],h+=4,m=e[h+3]<<24|e[h]<<16|e[h+1]<<8|e[h+2]}else{p=this.getPixel(e,a,f,r,i,u);if(!l&&!c){s[o]=p>>16&255,s[o+1]=p>>8&255,s[o+2]=p&255,s[o+3]=p>>24&255;return}d=this.getPixel(e,a+1,f,r,i,u),v=this.getPixel(e,a,f+1,r,i,u),m=this.getPixel(e,a+1,f+1,r,i,u)}g=1-l,y=1-c,b=((p>>16&255)*g+(d>>16&255)*l)*y+((v>>16&255)*g+(m>>16&255)*l)*c,w=((p>>8&255)*g+(d>>8&255)*l)*y+((v>>8&255)*g+(m>>8&255)*l)*c,E=((p&255)*g+(d&255)*l)*y+((v&255)*g+(m&255)*l)*c,S=((p>>24&255)*g+(d>>24&255)*l)*y+((v>>24&255)*g+(m>>24&255)*l)*c,s[o]=b>255?255:b<0?0:b|0,s[o+1]=w>255?255:w<0?0:w|0,s[o+2]=E>255?255:E<0?0:E|0,s[o+3]=S>255?255:S<0?0:S|0},rgbToHsl:function(e,t,n){e/=255,t/=255,n/=255;var r=e>t?e>n?e:n:t>n?t:n,i=e<t?e<n?e:n:t<n?t:n,s=r-i,o=0,u=0,a=(i+r)/2;return s!==0&&(e===r?o=(t-n)/s+(t<n?6:0):t===r?o=(n-e)/s+2:o=(e-t)/s+4,o/=6,u=a>.5?s/(2-r-i):s/(r+i)),[o,u,a]},hslToRgb:function(e,t,n){var r,i,s,o,u,a,f=[];if(t===0)o=u=a=n*255+.5|0,f=[o,u,a];else{n<=.5?i=n*(t+1):i=n+t-n*t,r=n*2-i,s=e+1/3;var l;for(var c=0;c<3;c+=1)s<0?s+=1:s>1&&(s-=1),6*s<1?l=r+(i-r)*s*6:2*s<1?l=i:3*s<2?l=r+(i-r)*(2/3-s)*6:l=r,f[c]=l*255+.5|0,s-=1/3}return f}},g.Translate=function(e,t,n,r){},g.Scale=function(e,t,n,r){},g.Rotate=function(e,t,n,r,i,s){},g.Affine=function(e,t,n,r){},g.UnsharpMask=function(e,t){},g.ConvolutionFilter=function(e,t,n,r,i,s,o,u,a,f){var l=e.data,c=e.width,h=e.height,p=l.length,d=this.utils.createImageData(c,h),v=d.data;i=i||1,s=s||0,o!==!1&&(o=!0),u!==!1&&(u=!0),a=a||0,f=f||0;var m=0,g=t>>1,y=n>>1,b=a>>16&255,w=a>>8&255,E=a&255,S=f*255;for(var x=0;x<h;x+=1)for(var T=0;T<c;T+=1,m+=4){var N=0,C=0,k=0,L=0,A=!1,O=0,M;for(var _=-g;_<=g;_+=1){var D=x+_,P;0<=D&&D<h?P=D*c:u?P=x*c:A=!0;for(var H=-y;H<=y;H+=1){var B=r[O++];if(B!==0){var j=T+H;0<=j&&j<c||(u?j=T:A=!0);if(A)N+=B*b,C+=B*w,k+=B*E,L+=B*S;else{var F=P+j<<2;N+=B*l[F],C+=B*l[F+1],k+=B*l[F+2],L+=B*l[F+3]}}}}v[m]=(M=N/i+s)>255?255:M<0?0:M|0,v[m+1]=(M=C/i+s)>255?255:M<0?0:M|0,v[m+2]=(M=k/i+s)>255?255:M<0?0:M|0,v[m+3]=o?l[m+3]:(M=L/i+s)>255?255:M<0?0:M|0}return d},g.Binarize=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;isNaN(t)&&(t=.5),t*=255;for(var a=0;a<s;a+=4){var f=n[a]+n[a+1]+n[a+2]/3;u[a]=u[a+1]=u[a+2]=f<=t?0:255,u[a+3]=255}return o},g.BlendAdd=function(e,t,n,r){var i=e.data,s=e.width,o=e.height,u=i.length,a=this.utils.createImageData(s,o),f=a.data,l=t.data,c;for(var h=0;h<u;h+=4)f[h]=(c=i[h]+l[h])>255?255:c,f[h+1]=(c=i[h+1]+l[h+1])>255?255:c,f[h+2]=(c=i[h+2]+l[h+2])>255?255:c,f[h+3]=255;return a},g.BlendSubtract=function(e,t,n,r){var i=e.data,s=e.width,o=e.height,u=i.length,a=this.utils.createImageData(s,o),f=a.data,l=t.data,c;for(var h=0;h<u;h+=4)f[h]=(c=i[h]-l[h])<0?0:c,f[h+1]=(c=i[h+1]-l[h+1])<0?0:c,f[h+2]=(c=i[h+2]-l[h+2])<0?0:c,f[h+3]=255;return a},g.BoxBlur=function(){var e=function(e,t,n,r,i){var s=i*2+1,o=i+1,u=n-1,a,f,l,c,h=0,p,d,v,m,g,y,b,w,E,S,x=[];for(g=0,y=256*s;g<y;g+=1)x[g]=g/s|0;for(w=0;w<r;w+=1){a=f=l=c=0,p=w,d=h<<2,a+=o*e[d],f+=o*e[d+1],l+=o*e[d+2],c+=o*e[d+3];for(g=1;g<=i;g+=1)d=h+(g<n?g:u)<<2,a+=e[d],f+=e[d+1],l+=e[d+2],c+=e[d+3];for(b=0;b<n;b+=1)d=p<<2,t[d]=x[a],t[d+1]=x[f],t[d+2]=x[l],t[d+3]=x[c],E=b+o,E>u&&(E=u),S=b-i,S<0&&(S=0),v=h+E<<2,m=h+S<<2,a+=e[v]-e[m],f+=e[v+1]-e[m+1],l+=e[v+2]-e[m+2],c+=e[v+3]-e[m+3],p+=r;h+=n}};return function(t,n,r,i){var s=t.data,o=t.width,u=t.height,a=s.length,f=this.utils.createImageData(o,u),l=f.data,c=this.utils.createImageData(o,u),h=c.data;for(var p=0;p<i;p+=1)e(p?l:s,h,o,u,n),e(h,l,u,o,r);return f}}(),g.GaussianBlur=function(e,t){var n,r,i;switch(t){
case 2:n=5,r=[1,1,2,1,1,1,2,4,2,1,2,4,8,4,2,1,2,4,2,1,1,1,2,1,1],i=52;break;case 3:n=7,r=[1,1,2,2,2,1,1,1,2,2,4,2,2,1,2,2,4,8,4,2,2,2,4,8,16,8,4,2,2,2,4,8,4,2,2,1,2,2,4,2,2,1,1,1,2,2,2,1,1],i=140;break;case 4:n=15,r=[2,2,3,4,5,5,6,6,6,5,5,4,3,2,2,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,6,8,11,13,16,18,19,20,19,18,16,13,11,8,6,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,2,2,3,4,5,5,6,6,6,5,5,4,3,2,2],i=2044;break;default:n=3,r=[1,2,1,2,4,2,1,2,1],i=16}return this.ConvolutionFilter(e,n,n,r,i,0,!1)},g.StackBlur=function(){function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],t=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return function(r,i){var s=r.data,o=r.width,u=r.height,a=s.length,f=this.Clone(r),l=f.data,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=i+i+1,B=o<<2,j=o-1,F=u-1,I=i+1,q=I*(I+1)/2,R=new n,U=R,z,W,X,V=e[i],$=t[i];for(p=1;p<H;p+=1)U=U.next=new n,p===I&&(X=U);U.next=R,g=m=0;for(h=0;h<u;h+=1){C=k=L=A=y=b=w=E=0,S=I*(O=l[m]),x=I*(M=l[m+1]),T=I*(_=l[m+2]),N=I*(D=l[m+3]),y+=q*O,b+=q*M,w+=q*_,E+=q*D,U=R;for(p=0;p<I;p+=1)U.r=O,U.g=M,U.b=_,U.a=D,U=U.next;for(p=1;p<I;p+=1)d=m+((j<p?j:p)<<2),y+=(U.r=O=l[d])*(P=I-p),b+=(U.g=M=l[d+1])*P,w+=(U.b=_=l[d+2])*P,E+=(U.a=D=l[d+3])*P,C+=O,k+=M,L+=_,A+=D,U=U.next;z=R,W=X;for(c=0;c<o;c+=1)l[m]=y*V>>$,l[m+1]=b*V>>$,l[m+2]=w*V>>$,l[m+3]=E*V>>$,y-=S,b-=x,w-=T,E-=N,S-=z.r,x-=z.g,T-=z.b,N-=z.a,d=g+((d=c+i+1)<j?d:j)<<2,C+=z.r=l[d],k+=z.g=l[d+1],L+=z.b=l[d+2],A+=z.a=l[d+3],y+=C,b+=k,w+=L,E+=A,z=z.next,S+=O=W.r,x+=M=W.g,T+=_=W.b,N+=D=W.a,C-=O,k-=M,L-=_,A-=D,W=W.next,m+=4;g+=o}for(c=0;c<o;c+=1){k=L=A=C=b=w=E=y=0,m=c<<2,S=I*(O=l[m]),x=I*(M=l[m+1]),T=I*(_=l[m+2]),N=I*(D=l[m+3]),y+=q*O,b+=q*M,w+=q*_,E+=q*D,U=R;for(p=0;p<I;p+=1)U.r=O,U.g=M,U.b=_,U.a=D,U=U.next;v=o;for(p=1;p<=i;p+=1)m=v+c<<2,y+=(U.r=O=l[m])*(P=I-p),b+=(U.g=M=l[m+1])*P,w+=(U.b=_=l[m+2])*P,E+=(U.a=D=l[m+3])*P,C+=O,k+=M,L+=_,A+=D,U=U.next,p<F&&(v+=o);m=c,z=R,W=X;for(h=0;h<u;h+=1)d=m<<2,l[d]=y*V>>$,l[d+1]=b*V>>$,l[d+2]=w*V>>$,l[d+3]=E*V>>$,y-=S,b-=x,w-=T,E-=N,S-=z.r,x-=z.g,T-=z.b,N-=z.a,d=c+((d=h+I)<F?d:F)*o<<2,y+=C+=z.r=l[d],b+=k+=z.g=l[d+1],w+=L+=z.b=l[d+2],E+=A+=z.a=l[d+3],z=z.next,S+=O=W.r,x+=M=W.g,T+=_=W.b,N+=D=W.a,C-=O,k-=M,L-=_,A-=D,W=W.next,m+=o}return f}}(),g.Brightness=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;return this.utils.mapRGB(n,u,function(e){return e+=t,e>255?255:e}),o},g.BrightnessContrastGimp=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(i,s),a=u.data,f=Math.PI/4;t/=100,n*=.99,n/=100,n=Math.tan((n+1)*f);for(var l=0,c=0;c<o;c+=4)l+=r[c]*19595+r[c+1]*38470+r[c+2]*7471>>16;return l/=o/4,this.utils.mapRGB(r,a,function(e){return t<0?e*=1+t:t>0&&(e+=(255-e)*t),n!==0&&(e=(e-l)*n+l),e+.5|0}),u},g.BrightnessContrastPhotoshop=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(i,s),a=u.data;return t=(t+100)/100,n=(n+100)/100,this.utils.mapRGB(r,a,function(e){return e*=t,e=(e-127.5)*n+127.5,e+.5|0}),u},g.Channels=function(e,t){var n;switch(t){case 2:n=[0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0];break;case 3:n=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0];break;default:n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0]}return this.ColorMatrixFilter(e,n)},g.Clone=function(e){return this.Copy(e,this.utils.createImageData(e.width,e.height))},g.CloneBuiltin=function(e){var t=e.width,n=e.height,r=this.utils.getSampleCanvas(),i=this.utils.getSampleContext(),s;return r.width=t,r.height=n,i.putImageData(e,0,0),s=i.getImageData(0,0,t,n),r.width=0,r.height=0,s},g.ColorMatrixFilter=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data,a=t[0],f=t[1],l=t[2],c=t[3],h=t[4],p=t[5],d=t[6],v=t[7],m=t[8],g=t[9],y=t[10],b=t[11],w=t[12],E=t[13],S=t[14],x=t[15],T=t[16],N=t[17],C=t[18],k=t[19],L,A,O,M,_,D;for(A=0;A<s;A+=4)O=n[A],M=n[A+1],_=n[A+2],D=n[A+3],u[A]=(L=O*a+M*f+_*l+D*c+h)>255?255:L<0?0:L|0,u[A+1]=(L=O*p+M*d+_*v+D*m+g)>255?255:L<0?0:L|0,u[A+2]=(L=O*y+M*b+_*w+D*E+S)>255?255:L<0?0:L|0,u[A+3]=(L=O*x+M*T+_*N+D*C+k)>255?255:L<0?0:L|0;return o},g.ColorTransformFilter=function(e,t,n,r,i,s,o,u,a){var f=e.data,l=e.width,c=e.height,h=f.length,p=this.utils.createImageData(l,c),d=p.data,v,m;for(v=0;v<h;v+=4)d[v]=(m=f[v]*t+s)>255?255:m<0?0:m,d[v+1]=(m=f[v+1]*n+o)>255?255:m<0?0:m,d[v+2]=(m=f[v+2]*r+u)>255?255:m<0?0:m,d[v+3]=(m=f[v+3]*i+a)>255?255:m<0?0:m;return p},g.Copy=function(e,t){var n=e.data,r=n.length,i=t.data;while(r--)i[r]=n[r];return t},g.Crop=function(e,t,n,r,i){var s=e.data,o=e.width,u=e.height,a=s.length,f=this.utils.createImageData(r,i),l=f.data,c=Math.max(t,0),h=Math.max(n,0),p=Math.min(t+r,o),d=Math.min(n+i,u),v=c-t,m=h-n,g,y,b,w,E,S;for(g=h,w=m;g<d;g+=1,w+=1)for(y=c,E=v;y<p;y+=1,E+=1)b=g*o+y<<2,S=w*r+E<<2,l[S]=s[b],l[S+1]=s[b+1],l[S+2]=s[b+2],l[S+3]=s[b+3];return f},g.CropBuiltin=function(e,t,n,r,i){var s=e.width,o=e.height,u=this.utils.getSampleCanvas(),a=this.utils.getSampleContext();u.width=s,u.height=o,a.putImageData(e,0,0);var f=a.getImageData(t,n,r,i);return u.width=0,u.height=0,f},g.Desaturate=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;for(var u=0;u<i;u+=4){var a=t[u],f=t[u+1],l=t[u+2],c=a>f?a>l?a:l:f>l?f:l,h=a<f?a<l?a:l:f<l?f:l,p=(c+h)/2+.5|0;o[u]=o[u+1]=o[u+2]=p,o[u+3]=t[u+3]}return s},g.DisplacementMapFilter=function(e,t,n,r,i,s,o,u,a){var f=e.data,l=e.width,c=e.height,h=f.length,p=g.Clone(e),d=p.data;n=n||0,r=r||0,i=i||0,s=s||0,o=o||0,u=u||0,a=a||2;var v=t.width,m=t.height,y=t.data,b=v+n,w=m+r,E,S,x,T,N,C,k,L,A;for(L=0;L<l;L+=1)for(A=0;A<c;A+=1)E=A*l+L<<2,L<n||A<r||L>=b||A>=w?S=E:(x=(A-r)*v+(L-n)<<2,T=y[x+i],C=L+((T-128)*o>>8),N=y[x+s],k=A+((N-128)*u>>8),S=g.utils.getPixelIndex(C+.5|0,k+.5|0,l,c,a),S===null&&(S=E)),d[E]=f[S],d[E+1]=f[S+1],d[E+2]=f[S+2],d[E+3]=f[S+3];return p},g.Dither=function(e,t){var n=e.width,r=e.height,i=this.Clone(e),s=i.data;t=t<2?2:t>255?255:t;var o,u=[],a=t-1,f=0,l=0,c;for(c=0;c<t;c+=1)u[c]=255*c/a;o=this.utils.buildMap(function(e){var n=u[f];return l+=t,l>255&&(l-=255,f+=1),n});var h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k=n-1,L=r-1,A=7/16,O=3/16,M=5/16,_=1/16;for(p=0;p<r;p+=1)for(h=0;h<n;h+=1)d=p*n+h<<2,v=s[d],m=s[d+1],g=s[d+2],y=o[v],b=o[m],w=o[g],s[d]=y,s[d+1]=b,s[d+2]=w,E=v-y,S=m-b,x=g-w,d+=4,h<k&&(T=s[d]+A*E,N=s[d+1]+A*S,C=s[d+2]+A*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0),d+=n-2<<2,h>0&&p<L&&(T=s[d]+O*E,N=s[d+1]+O*S,C=s[d+2]+O*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0),d+=4,p<L&&(T=s[d]+M*E,N=s[d+1]+M*S,C=s[d+2]+M*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0),d+=4,h<k&&p<L&&(T=s[d]+_*E,N=s[d+1]+_*S,C=s[d+2]+_*x,s[d]=T>255?255:T<0?0:T|0,s[d+1]=N>255?255:N<0?0:N|0,s[d+2]=C>255?255:C<0?0:C|0);return i},g.Edge=function(e){return this.ConvolutionFilter(e,3,3,[-1,-1,-1,-1,8,-1,-1,-1,-1])},g.Emboss=function(e){return this.ConvolutionFilter(e,3,3,[-2,-1,0,-1,1,1,0,1,2])},g.Enrich=function(e){return this.ConvolutionFilter(e,3,3,[0,-2,0,-2,20,-2,0,-2,0],10,-40)},g.Flip=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data,a,f,l,c,h;for(f=0;f<i;f+=1)for(a=0;a<r;a+=1)l=f*r+a<<2,t?c=(i-f-1)*r+a<<2:c=f*r+(r-a-1)<<2,u[c]=n[l],u[c+1]=n[l+1],u[c+2]=n[l+2],u[c+3]=n[l+3];return o},g.Gamma=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;return this.utils.mapRGB(n,u,function(e){return e=255*Math.pow(e/255,1/t)+.5,e>255?255:e+.5|0}),o},g.GrayScale=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;for(var u=0;u<i;u+=4){var a=t[u]*19595+t[u+1]*38470+t[u+2]*7471>>16;o[u]=o[u+1]=o[u+2]=a,o[u+3]=t[u+3]}return s},g.HSLAdjustment=function(e,t,n,r){var i=e.data,s=e.width,o=e.height,u=i.length,a=this.utils.createImageData(s,o),f=a.data;t/=360,n/=100,r/=100;var l=this.utils.rgbToHsl,c=this.utils.hslToRgb,h,p,d,v,m,g;for(g=0;g<u;g+=4){v=l(i[g],i[g+1],i[g+2]),h=v[0]+t;while(h<0)h+=1;while(h>1)h-=1;p=v[1]+v[1]*n,p<0?p=0:p>1&&(p=1),d=v[2],r>0?d+=(1-d)*r:r<0&&(d+=d*r),m=c(h,p,d),f[g]=m[0],f[g+1]=m[1],f[g+2]=m[2],f[g+3]=i[g+3]}return a},g.Invert=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;return this.utils.mapRGB(t,o,function(e){return 255-e}),s},g.Mosaic=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data,a=Math.ceil(r/t),f=Math.ceil(i/t),l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;for(l=0;l<f;l+=1){d=l*t,v=d+t,v>i&&(v=i);for(c=0;c<a;c+=1){h=c*t,p=h+t,p>r&&(p=r),E=S=x=T=0,w=(p-h)*(v-d);for(g=d;g<v;g+=1){y=g*r;for(m=h;m<p;m+=1)b=y+m<<2,E+=n[b],S+=n[b+1],x+=n[b+2],T+=n[b+3]}E=E/w+.5|0,S=S/w+.5|0,x=x/w+.5|0,T=T/w+.5|0;for(g=d;g<v;g+=1){y=g*r;for(m=h;m<p;m+=1)b=y+m<<2,u[b]=E,u[b+1]=S,u[b+2]=x,u[b+3]=T}}}return o},g.Oil=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(i,s),a=u.data,f=0,l=[],c=[],h=[],p=[],d=[],v=[],m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D;for(g=0;g<s;g+=1)for(m=0;m<i;m+=1){for(y=0;y<n;y+=1)l[y]=c[y]=h[y]=p[y]=d[y]=v[y]=0;for(b=-t;b<=t;b+=1){E=g+b;if(E<0||E>=s)continue;x=E*i;for(w=-t;w<=t;w+=1){S=m+w;if(S<0||S>=i)continue;T=x+S<<2,N=r[T],C=r[T+1],k=r[T+2],L=N*n>>8,A=C*n>>8,O=k*n>>8,p[L]+=N,d[A]+=C,v[O]+=k,l[L]+=1,c[A]+=1,h[O]+=1}}M=_=D=0;for(y=1;y<n;y+=1)l[y]>l[M]&&(M=y),c[y]>c[_]&&(_=y),h[y]>h[D]&&(D=y);a[f]=p[M]/l[M]|0,a[f+1]=d[_]/c[_]|0,a[f+2]=v[D]/h[D]|0,a[f+3]=r[f+3],f+=4}return u},g.OpacityFilter=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;for(var a=0;a<s;a+=4)u[a]=n[a],u[a+1]=n[a+1],u[a+2]=n[a+2],u[a+3]=t;return o},g.Posterize=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;t=t<2?2:t>255?255:t;var a=[],f=t-1,l=0,c=0,h;for(h=0;h<t;h+=1)a[h]=255*h/f;return this.utils.mapRGB(n,u,function(e){var n=a[l];return c+=t,c>255&&(c-=255,l+=1),n}),o},g.Rescale=function(e,t){var n=e.data,r=e.width,i=e.height,s=n.length,o=this.utils.createImageData(r,i),u=o.data;return this.utils.mapRGB(n,u,function(e){return e*=t,e>255?255:e+.5|0}),o},g.ResizeNearestNeighbor=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(t,n),a=u.data,f=i/t,l=s/n,c=0,h,p,d,v;for(d=0;d<n;d+=1){v=(d*l|0)*i;for(p=0;p<t;p+=1)h=v+p*f<<2,a[c]=r[h],a[c+1]=r[h+1],a[c+2]=r[h+2],a[c+3]=r[h+3],c+=4}return u},g.Resize=function(e,t,n){var r=e.data,i=e.width,s=e.height,o=r.length,u=this.utils.createImageData(t,n),a=u.data,f=i/t,l=s/n,c=0,h,p;for(p=0;p<n;p+=1)for(h=0;h<t;h+=1)this.utils.copyBilinear(r,h*f,p*l,i,s,a,c,0),c+=4;return u},g.ResizeBuiltin=function(e,t,n){var r=e.width,i=e.height,s=this.utils.getSampleCanvas(),o=this.utils.getSampleContext(),u;return s.width=Math.max(r,t),s.height=Math.max(i,n),o.save(),o.putImageData(e,0,0),o.scale(t/r,n/i),o.drawImage(s,0,0),u=o.getImageData(0,0,t,n),o.restore(),s.width=0,s.height=0,u},g.Sepia=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data,u,a,f,l,c;for(l=0;l<i;l+=4)u=t[l],a=t[l+1],f=t[l+2],o[l]=(c=u*.393+a*.769+f*.189)>255?255:c<0?0:c+.5|0,o[l+1]=(c=u*.349+a*.686+f*.168)>255?255:c<0?0:c+.5|0,o[l+2]=(c=u*.272+a*.534+f*.131)>255?255:c<0?0:c+.5|0,o[l+3]=t[l+3];return s},g.Sharpen=function(e,t){return this.ConvolutionFilter(e,3,3,[-t/16,-t/8,-t/16,-t/8,t*.75+1,-t/8,-t/16,-t/8,-t/16])},g.Solarize=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(n,r),o=s.data;return this.utils.mapRGB(t,o,function(e){return e>127?(e-127.5)*2:(127.5-e)*2}),s},g.Transpose=function(e){var t=e.data,n=e.width,r=e.height,i=t.length,s=this.utils.createImageData(r,n),o=s.data,u,a;for(var f=0;f<r;f+=1)for(var l=0;l<n;l+=1)u=f*n+l<<2,a=l*r+f<<2,o[a]=t[u],o[a+1]=t[u+1],o[a+2]=t[u+2],o[a+3]=t[u+3];return s},g.Twril=function(e,t,n,r,i,s,o){var u=e.data,a=e.width,f=e.height,l=u.length,c=this.utils.createImageData(a,f),h=c.data;t=a*t,n=f*n,i*=Math.PI/180;var p=r*r,d=f-1,v=a-1,m=0,g,y,b,w,E,S,x,T,N,C,k;for(y=0;y<f;y+=1)for(g=0;g<a;g+=1)b=g-t,w=y-n,E=b*b+w*w,E>p?(h[m]=u[m],h[m+1]=u[m+1],h[m+2]=u[m+2],h[m+3]=u[m+3]):(E=Math.sqrt(E),S=Math.atan2(w,b)+i*(r-E)/r,x=t+E*Math.cos(S),T=n+E*Math.sin(S),o?this.utils.copyBilinear(u,x,T,a,f,h,m,s):(N=(T+.5|0)*a+(x+.5|0)<<2,h[m]=u[N],h[m+1]=u[N+1],h[m+2]=u[N+2],h[m+3]=u[N+3])),m+=4;return c},e.IchieJs={create:function(e){var t=["launch","showSelection","hideSelection","setSelection","setSelectMode","copySelection","pasteClipboard","filter","crop","undo","redo","downloadAsImage","resize"],n=new i;n.init(e);var r={};for(var s=0;s<t.length;s++){var o=t[s];r[o]=n[o].bind(n)}return r}}})(typeof exports=="object"&&exports||this,$,_);

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/libs/ZeroClipboard.js */

// Simple Set Clipboard System
// Author: Joseph Huckaby
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){return typeof e=="string"&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){var t=this.className.split(/\s+/),n=-1;for(var r=0;r<t.length;r++)t[r]==e&&(n=r,r=t.length);return n>-1&&(t.splice(n,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,n){var r=this.clients[e];r&&r.receiveEvent(t,n)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){var n={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};while(e&&e!=t)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,t,n){this.domElement=ZeroClipboard.$(e);var r=99;this.domElement.style.zIndex&&(r=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]);var i=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div");var s=this.div.style;s.position="absolute",s.left=""+i.left+"px",s.top=""+i.top+"px",s.width=""+i.width+"px",s.height=""+i.height+"px",s.zIndex=r;if(typeof n=="object")for(addedStyle in n)s[addedStyle]=n[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(i.width,i.height)},getHTML:function(e,t){var n="",r="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var i=location.href.match(/^https/i)?"https://":"http://";n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/></object>'}else n+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide());if(this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),n=this.div.style;n.left=""+t.left+"px",n.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");switch(e){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var n=this;setTimeout(function(){n.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var n=this;setTimeout(function(){n.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var r=0,i=this.handlers[e].length;r<i;r++){var s=this.handlers[e][r];typeof s=="function"?s(this,t):typeof s=="object"&&s.length==2?s[0][s[1]](this,t):typeof s=="string"&&window[s](this,t)}}};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/core.js */

ZeroClipboard.setMoviePath("flash/ZeroClipboard.swf");var midas={core:{}};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/Module.js */

/**
 * @class
 * @description The Module object helps to maintain code based on the module pattern thereby supporting simple inheritance.
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.Module=function(){var e=function(){},t=function(e){return typeof e=="function"},n=function(){};return n.create=function(n){var r=function(n){if(n===e)return;t(this.init)&&this.init.apply(this,arguments)};r.prototype=new this(e);for(attribute_name in n)(function(e,n){!t(e)||!t(n)?r.prototype[attribute_name]=e:r.prototype[attribute_name]=function(){return this.parent=n,e.apply(this,arguments)}})(n[attribute_name],r.prototype[attribute_name]);return r.prototype.constructor=r,r.extend=this.extend||this.create,r},n}();

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/BaseObject.js */

/**
 * @class
 * @description <p>The BaseObject serves as the base implementation for all 'modules'.</p>
 * <p>It passes options support and logging functionality on to it's children.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.BaseObject=midas.core.Module.create({log_prefix:"BaseObject",logger:null,listeners:null,init:function(e){this.options=e||{},this.logger={},this.listeners={}},on:function(e,t){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t),this},removeListener:function(e,t){if(!this.listeners[e])return this;var n=this.listeners[e].indexOf(t);return-1!==n&&this.listeners[e].splice(n,1),this},removeAllListeners:function(e){return this.listeners[e]?(this.listeners[e]=[],this):this},fire:function(e,t){if(!this.listeners[e])return this;for(var n=0;n<this.listeners[e].length;n++)this.listeners[e][n].apply(null,t);return this},logDebug:function(e){var t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return this.log(e,"debug",t),this},logInfo:function(e){var t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return this.log(e,"info",t),this},logWarning:function(e){var t=[];for(var n=1;n<arguments.length;n++)t.push(arguments[n]);return this.log(e,"warn",t),this},log:function(e,t,n){n.unshift("["+(new Date).getTime()+"] ["+this.log_prefix+"] "+e),console&&console[t]&&console[t].apply(console,n)},handleException:function(e){console&&console.exception&&console.exception.apply(console,[e])}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/CidSequence.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The CidSequence module provides a forthrunning sequence of ids.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.CidSequence=midas.core.BaseObject.extend({log_prefix:"CidSequence",current_id:null,sequence:null,init:function(e){this.parent(e),this.current_id=0,this.sequence={}},nextCid:function(e){return this.current_id++,this.sequence[this.current_id]=e,this.current_id}}),midas.core.CidSequence.nextCid=function(e){return midas.core.CidSequence._instance||(midas.core.CidSequence._instance=new midas.core.CidSequence),midas.core.CidSequence._instance.nextCid(e)};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/Behaviour.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The Behaviour module provides separation of configuration state (options) and implementation.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.Behaviour=midas.core.BaseObject.extend({log_prefix:"Behaviour",prefix:"jsb-",element:null,init:function(e,t){this.parent(t),this.element=$(e),this.apply()},apply:function(){var e=this.element.attr("class");typeof e!="undefined"&&e!==!1&&$.each(e.split(" "),function(e,t){if(t.match(this.prefix)){var n="."+t+"-options",r=this.element.children(n);r=0<r.length?r:this.element.next(n);if(0<r.length){var i=$.parseJSON(r.val());r.remove(),this.element.removeClass(t);for(var s in i)this.options[s]=i[s]}}}.bind(this))}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/Routing.js */

/**
 * @class
 * @augments midas.core.Behaviour
 * @description <p>The Input module provides behaviour, such as validation, for HTMLForm input element.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.Routing=midas.core.Behaviour.extend({log_prefix:"Routing",init:function(e,t){this.parent(e,t)},getRoute:function(e){return this.options[e]}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/BaseController.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description The BaseController module provides base functionality for connecting views to an async backend.
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.BaseController=midas.core.BaseObject.extend({log_prefix:"BaseController",intent_filters:null,init:function(e){this.parent(e),this.intent_filters={},this.intent_filters=this.getIntentFilters()},getIntentFilters:function(){throw"A BaseController implementation must override the getIntentFilters method."},apply:function(e,t){var n=!1;return $.each(this.intent_filters,function(r,i){!n&&e.name.match(r)&&("string"==typeof i&&"function"==typeof this[i]?(this[i].apply(this,[e,t]),n=!0):"function"==typeof i&&!0===i(e,t)&&(n=!0))}.bind(this)),n}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/BaseView.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The BaseView module provides base functionality for organizing client side behaviour for a certain view.</p>
 * <p>It has access to the view's layout root and manages the various behaviours on a page
 * as aggregated components that derive from the Behaviour core module.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.BaseView=midas.core.BaseObject.extend({log_prefix:"BaseView",controllers:null,layout_root:null,init:function(e,t){this.parent(t),this.controllers=[],this.layout_root=$(e),typeof this.onInitGui=="function"&&this.onInitGui.apply(this)},propagateIntent:function(e,t){for(var n=0;n<this.controllers.length;n++)if(this.controllers[n].apply(e,t))return!0;return this.logWarning("No one liked your intent."),!1},attach:function(e){if(!(e instanceof midas.core.BaseController))throw"Only midas.core.BaseController instances may be attached to a BaseView instance";for(var t=0;t<this.controllers.length;t++)if(this.conrollers[t]===e){this.logWarning("The given controller has allready been attached.");return}this.controllers.push(e)},dettach:function(e){var t=this.controllers.indexOf(conroller);-1<t&&(this.controllers=this.controllers.splice(t,1))},confirm:function(e,t,n,r){n=n||function(){},r=r||function(){};var i=ich["dialog-tpl"]({title:e,message:t});this.layout_root.append(i),i.dialog({resizable:!1,modal:!0,width:"20em",buttons:{Ja:function(){$(this).dialog("close"),n(),$(this).remove()},Nein:function(){$(this).dialog("close"),r(),$(this).remove()}}})},warn:function(e,t,n){n=n||function(){};var r=ich["dialog-tpl"]({title:e,message:t});this.layout_root.append(r),r.dialog({resizable:!1,modal:!0,width:"20em",buttons:{Ok:function(){$(this).dialog("close"),n(),$(this).remove()}}}).prev().addClass("ui-state-error")}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/CommandTriggerList.js */

/**
 * @class
 * @augments midas.core.BaseObject
 * @description <p>The CommandTriggerList is a generic component for handling click events on a list of elements
 * and mapping them to specific commands.</p>
 * @author <a href="mailto:tschmittrink@gmail.com">Thorsten Schmit-Rink</a>
 * @version $Id:$
 */midas.core.CommandTriggerList=midas.core.BaseObject.extend({log_prefix:"CommandTriggerList",container:null,command_items:null,init:function(e,t){this.parent(t),this.command_items={},this.container=e,this.container.find("li a").each(function(e,t){var n=this.parseCommandName(t);this.command_items[n]={name:n,item:$(t),callback:null}}.bind(this)),this.container.find("li a").click(function(e){return e.originalEvent._preventDefault=!0,$(e.target).parent("li").hasClass("inactive")||this.dispatchCommand(this.parseCommandName(e.target),e.target),!1}.bind(this)),this.options.commands&&this.registerCommands(this.options.commands)},registerCommands:function(e){for(var t in e)this.registerCommand(t,e[t])},registerCommand:function(e,t){if("function"!=typeof t)throw"The 'command' parameter must be a function. Invalid type given.";if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].callback=t},dispatchCommand:function(e,t){if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].callback&&this.command_items[e].callback(t)},parseCommandName:function(e){var t=$(e).attr("href");return 0!==t.indexOf("#")?t:t.substr(1)},enable:function(e){if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].item.parent("li").removeClass("inactive")},disable:function(e){if(!this.command_items[e])throw"There is no command item that maps to the given command name: "+e;this.command_items[e].item.parent("li").addClass("inactive")}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/Request.js */

midas.core.Request=midas.core.BaseObject.extend({log_prefix:"Request",init:function(){this.parent()}}),midas.core.Request.curry=function(e,t,n,r){return function(i,s){return $.ajax({url:e,dataType:r||"json",data:t||{},type:n||"get",success:i,error:s||function(){console&&console.log&&console.log("request failed and no error callback was provided.")}})}};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/core/EditController.js */

midas.core.EditController=midas.core.BaseObject.extend({log_prefix:"EditController",element:null,options:null,widgets:null,alerts:null,identifier:null,revision:null,init:function(e,t){this.parent(),this.element=e,this.options=t,this.widgets={},this.initKnockoutProperties(),this.options.autobind&&(ko.applyBindings(this,this.element[0]),this.registerWidgets())},onFormSubmit:function(){var e=this,t=this.element.find("form"),n=t.attr("action");$("textarea.ckeditor").each(function(){var e=$(this);e.val(CKEDITOR.instances[e.attr("id")].getData())}),this.identifier()&&(n+="id="+this.identifier()),handleResponse=function(t){if(!t||!t.state)throw"Unexpected response data structure received from midas backend (places save).";"ok"===t.state?(e.addAlerts(t.messages||[],"success"),e.addAlerts(t.errors||[],"error"),e.identifier(t.data.identifier),e.revision(t.data.revision)):"error"===t.state&&e.addAlerts(t.errors||[],"error")},midas.core.Request.curry(n,t.serialize(),"post")(handleResponse,handleResponse)},addAlerts:function(e,t){var n=this;for(var r=0;r<e.length;r++)this.addAlert({type:t,message:e[r]})},addAlert:function(e){var t=this;this.alerts.push(e),setTimeout(function(){-1!==t.alerts.indexOf(e)&&t.removeAlert(e)},1e4)},removeAlert:function(e){this.alerts.remove(e)},showAlert:function(e,t,n){var r=this;e.nodeType===1&&($(e).animate({opacity:1},{duration:600,queue:!1}),$(e).animate({"margin-top":"0px"},{duration:400,queue:!1}))},hideAlert:function(e,t,n){e.nodeType===1&&($(e).animate({opacity:0},{duration:300,queue:!1}),$(e).animate({"margin-top":"-55px"},{duration:600,queue:!1,complete:function(){$(e).remove()}}))},initKnockoutProperties:function(){this.alerts=ko.observableArray([]),this.identifier=ko.observable(this.options.identifier||""),this.revision=ko.observable(this.options.revision||"")},registerWidgets:function(){var e=this;$(".honeybee-widget").each(function(e,t){var n;$.each($(t).attr("class").split(" "),function(e,t){t=t.trim(),t.match(/^widget-/)&&(n=t.replace("widget-",""))}),n&&midas.widgets.Widget.factory(t,n)})}}),midas.core.EditController.factory=function(e){e=$(e);var t=$.extend({},midas.core.EditController.DEFAULT_OPTIONS,JSON.parse(e.attr("data-edit-controller-options")||"{}"));return t.widgets=t.widgets||[],new midas.core.EditController(e,t)},midas.core.EditController.DEFAULT_OPTIONS={autobind:!0,view_name:"CoreItem",widgets:null};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/list.js */

midas=midas||{},midas.list=midas.list||{};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/WorkflowHandler.js */

midas.list.WorkflowHandler=midas.core.BaseObject.extend({log_prefix:"WorkflowHandler",urls:null,init:function(e){this.parent(),this.urls=e||{}},proceed:function(e,t){var n=this,r=this.urls.proceed.replace("{TICKET}",e.id),i={gate:t};return function(e,t){var n=midas.core.Request.curry(r,i,"POST");n(function(t){e(t)},function(e){t(e)})}},checkout:function(e){var t=this.urls.checkout.replace("{TICKET_ID}",e.id).replace("{TICKET_REV}",e.rev),n=midas.core.Request.curry(t),r=this;return function(e,t){e()}},release:function(e){var t=this.urls.release.replace("{TICKET}",e.id),n=midas.core.Request.curry(t),r=this;return function(e,t){n(function(n){"ok"===n.state?e(n):t(n)},function(e){t&&t(e)})}},run:function(e){window.location.href=this.urls.run.replace("{TICKET}",e.id)}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/Action.js */

midas.list.Action=midas.core.BaseObject.extend({log_prefix:"Action",payload:null,init:function(e){this.parent();if("function"!=typeof e)throw"The payload parameter must be a function and is reqired.";this.payload=e},execute:function(){var e=this;try{e.fire("start"),e.payload(function(){e.fire("success")},function(t){e.fire("failure",[t])})}catch(t){e.fire("failure",[t])}}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/ActionBatch.js */

midas.list.ActionBatch=midas.core.BaseObject.extend({log_prefix:"ActionBatch",actions:null,queue:null,progress_dialog:null,init:function(e){this.parent(),this.actions=e||[],this.queue=[],this.progress_dialog=$(".modal-batch-progress").clone().twodal({events:{keyboard:!1,show:!1,cancelbatch:function(){console.log("cancel batch clicked!")}}})},addAction:function(e){this.actions.push(e)},run:function(){for(var e=0;e<this.actions.length;e++){var t=this.actions[e];this.queue.push(t.on("start",this.onActionStarted.bind(this)).on("success",this.onActionSuccess.bind(this)).on("failure",function(e){this.onActionFailure(e)}.bind(this)).execute.bind(t))}return this.dequeue(),this.progress_dialog.twodal("show"),this},dequeue:function(){if(0===this.queue.length){var e=this;setTimeout(function(){e.fire("complete"),e.progress_dialog.twodal("hide")},1500);return}this.queue.shift()()},onActionStarted:function(){this.fire("started")},onActionSuccess:function(){var e=100/this.actions.length*(this.actions.length-this.queue.length);this.progress_dialog.find(".progress .bar").css("width",Math.round(e)+"%"),this.fire("progress"),this.dequeue()},onActionFailure:function(e){this.fire("error",[e]),this.dequeue()}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/ListItemModel.js */

midas.list.ListItemModel=midas.core.BaseObject.extend({log_prefix:"ListItemModel",data:null,display_data:null,css_classes:null,ticket:null,selected:null,init:function(e){this.parent(),this.data=e.data,this.ticket=e.ticket,this.display_data=e.display_data,this.css_classes=e.css_classes?e.css_classes.join(" "):"",this.selected=ko.observable(!1)}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/ListViewModel.js */

midas.list.ListViewModel=midas.core.BaseObject.extend({log_prefix:"ListViewModel",ctrl:null,workflow_handler:null,selected_items:null,all_selected:null,list_items:null,dont_toggle:null,has_selection:null,init:function(e,t){this.parent(),this.ctrl=e,this.workflow_handler=this.ctrl.workflow_handler,this.dont_toggle=!1,this.selected_items=ko.observableArray(),this.list_items=ko.observableArray(),this.all_selected=ko.observable(!1),this.all_selected.subscribe(this.toggleAllItemsSelection.bind(this));var n=this;this.has_selection=ko.computed(function(){return 0<n.selected_items().length}),this.initItems(t)},initItems:function(e){for(var t=0;t<e.length;t++)this.addItem(new midas.list.ListItemModel(e[t]))},addItem:function(e){this.list_items.push(e),e.selected.subscribe(this.onItemSelectionToggled.bind(this,e))},onItemSelectionToggled:function(e){e.selected()?this.selected_items.push(e):this.selected_items.remove(e);if(this.dont_toggle)return;this.dont_toggle=!0,this.all_selected(this.list_items().length===this.selected_items().length),this.dont_toggle=!1},toggleAllItemsSelection:function(e){if(this.dont_toggle)return;this.dont_toggle=!0,ko.utils.arrayForEach(this.list_items(),function(t){t.selected(e)}.bind(this)),this.dont_toggle=!1}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/list/ListController.js */

midas.list.ListController=midas.core.BaseObject.extend({log_prefix:"ListController",viewmodel:null,workflow_handler:null,search_widget:null,confirm_dialog:null,options:null,init:function(e){this.parent(),this.options=e},attach:function(){this.workflow_handler=new midas.list.WorkflowHandler(this.options.workflow_urls||{}),this.viewmodel=new midas.list.ListViewModel(this,JSON.parse($("input.list-data").val())),ko.applyBindings(this.viewmodel),this.search_widget=midas.widgets.Widget.factory(".search-widget","SearchWidget"),this.confirm_dialog=new midas.list.ListController.ConfirmDialog(".dialog-confirm")},proceed:function(e,t,n,r){var i=this;r=undefined===r?!0:r;var s=function(){i.createProceedBatch(!0===e?i.getSelectedItems():[t],n).run()};r?this.confirm_dialog.show(function(){i.confirm_dialog.hide(),s()}):s()},createProceedBatch:function(e,t){var n=new midas.list.ActionBatch;for(var r=0;r<e.length;r++){var i=e[r];n.addAction(new midas.list.Action(this.workflow_handler.proceed(i.ticket,t)))}return n.on("complete",function(){window.location.href=window.location.href}),n},run:function(e,t){if(e)return;var n=this.options.workflow_urls.edit+"?id="+t.data.identifier;window.location.href=n},releaseTicket:function(e){var t=this.workflow_handler.release(e.ticket),n=this;t(function(){window.location.href=window.location.href},function(){alert("Ticket konnte nicht freigegeben werden.")})},getSelectedItems:function(){return this.viewmodel.selected_items()},deleteItem:function(e,t){var n=this;this.confirm_dialog.show(function(){n.confirm_dialog.hide(),n.createDeleteBatch(!0===e?n.getSelectedItems():[t]).run()})},createDeleteBatch:function(e){var t=new midas.list.ActionBatch;for(var n=0;n<e.length;n++){var r=e[n];t.addAction(new midas.list.Action(midas.core.Request.curry(this.options.workflow_urls.delete,{id:r.data.identifier},"post")))}return t.on("complete",function(){window.location.href=window.location.href}),t},ajaxCurry:function(e,t,n,r){return midas.core.Request.curry(e,t,n,r)}}),midas.list.ListController.create=function(e,t){e=$(e);if(0===e.length)throw"Unable to find element to create controller from. Looked for: "+e;var n=e.attr("data-controller");if(!n||!t[n])throw"Unable to resolve controller implementor: "+n;var r=e.attr("data-controller-options")||"{}",i=new t[n](JSON.parse(r));return i},midas.list.ListController.ConfirmDialog=midas.core.BaseObject.extend({log_prefix:"ConfirmDialog",confirm_prompt:null,init:function(e,t){this.parent();var n=this;this.categories_uri=t,this.confirm_prompt=$(e).twodal({show:!1,backdrop:!0,events:{confirm:this.onConfirmed.bind(this)}})},show:function(e){return this.removeAllListeners("confirmed"),this.on("confirmed",e),this.confirm_prompt.twodal("show"),this},hide:function(){return this.confirm_prompt.twodal("hide"),this},onConfirmed:function(){this.fire("confirmed")}});

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/widgets.js */

midas=midas||{},midas.widgets=midas.widgets||{};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/Widget.js */

midas.widgets.Widget=midas.core.BaseObject.extend({log_prefix:"Widget",element:null,options:null,init:function(e,t,n){this.parent(),n=n||function(){},this.element=e,this.options=t;var r=this.getTemplate(),i=this;if(r&&0<=r.indexOf(".html")){this.element.load(r,null,function(){i.initGui(),n()});return}r&&this.element.html(r),i.initGui(),n()},initGui:function(){this.initKnockoutProperties(),this.options.autobind&&ko.applyBindings(this,this.element[0])},initKnockoutProperties:function(){},getTemplate:function(){throw"Your widget does not implement a getTemplate method! Make sure to do so and return a valid html string."}}),midas.widgets.Widget.factory=function(e,t,n){var r=t.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")});r=r.charAt(0).toUpperCase()+r.slice(1),n=n||midas.widgets,e=$(e);var i=n[r];if(!i)throw"Unable to find widget implementor: "+r+" inside the given namespace: "+n.toString();var s=r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),o="data"+s+"-options",u;try{u=$.extend({},i.DEFAULT_OPTIONS||{},JSON.parse(e.attr(o)||"{}"))}catch(a){console.log(e,a);return}return new i(e,u)};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/SearchWidget.js */

midas.widgets.SearchWidget=midas.widgets.Widget.extend({log_prefix:"SearchWidget",form:null,filter_dialog:null,labels:null,sort_direction:null,sort_field:null,search:null,has_search:null,has_filter_dialog:null,search_url:"",init:function(e,t){this.parent(e,t),this.form=this.element.find("form").first(),this.filter_dialog=$(".modal-search-filter").twodal({show:!1,backdrop:!0}),this.filter_dialog.find(".widget").each(function(e,t){var n=$(t).attr("class").split(" ");for(var r=0;r<n.length;r++)css_class=n[r],css_class.match(/^widget-/g)&&midas.widgets.Widget.factory(t,css_class.replace("widget-",""))})},getTemplate:function(){return"static/widgets/SearchWidget.html"},initKnockoutProperties:function(){this.labels={search:ko.observable(this.options.labels.search),placeholder:ko.observable(this.options.labels.placeholder),filter:ko.observable(this.options.labels.filter)},this.search=ko.observable(this.options.search||""),this.sort_direction=ko.observable(this.options.sort_direction),this.sort_field=ko.observable(this.options.sort_field),this.search_url=ko.observable(this.options.search_url),this.has_filter_dialog=ko.observable(this.filter_dialog.length===1);var e=this;this.has_search=ko.computed(function(){return e.search().length>0})},doSearch:function(){return!0},showFilterDialog:function(){return this.filter_dialog.twodal("show"),!1},resetSearchPhrase:function(){this.search(""),this.form.find(".search-query").focus()}}),midas.widgets.SearchWidget.DEFAULT_OPTIONS={autobind:!0,search_url:window.location.href,filter_url:"",search:"",sort_direction:"desc",sort_field:"identifier",labels:{search:"Suche",placeholder:"Suche",filter:"(Erweiterte Suche)"}};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/TagsList.js */

midas.widgets.TagsList=midas.widgets.Widget.extend({log_prefix:"TagsList",currently_valid:null,fieldname:null,tags:null,current_tag:null,has_focus:null,is_valid:null,max_reached:null,enabled:null,disabled:null,disabled_text:null,init:function(e,t,n){this.parent(e,t,n),this.currently_valid={}},getTemplate:function(){return"static/widgets/TagsList."+this.options.tpl+".html"},initGui:function(){this.parent(),this.options.autocomplete&&this.initTypeahead()},initKnockoutProperties:function(){var e=this,t=this.options.fieldname;this.fieldname=ko.observable(t+(1===this.options.max?"":"[]")),this.tags=ko.observableArray(this.options.tags||[]),this.current_tag=ko.observable(""),this.has_focus=ko.observable(!1),this.max_reached=ko.observable(!1),this.is_valid=ko.observable(!1),this.disabled=ko.observable(!1),this.disabled_text=ko.observable(""),this.enabled=ko.computed(function(){return e.is_valid()&&!e.max_reached()&&!e.disabled()}),this.current_tag.subscribe(function(t){e.validate()})},onInput:function(e,t){return 13===t.which?(this.is_valid()&&this.addCurrentTag(),!1):!0},busyStart:function(e){this.disabled(!0),this.disabled_text(e)},busyEnd:function(){this.disabled(!1),this.disabled_text("")},validate:function(){var e=this.current_tag(),t=!0;return this.options.autocomplete&&this.options.restrict_values&&(t="undefined"!=typeof this.currently_valid[e]),this.is_valid(t&&0<e.length&&(0===this.options.max||this.options.max>this.tags().length)),this.is_valid()},addCurrentTag:function(){var e=this.current_tag(),t=-1;for(var n=0;n<this.tags().length;n++)if(e===this.tags()[n].label){t=n;break}-1===t||this.options.allow_duplicates?(this.tags.push({label:e,value:this.options.autocomplete?this.currently_valid[e]:e}),this.current_tag(""),this.fire("tagschanged",[this.fieldname(),this.tags()])):this.highlightTag(t),this.has_focus(!0)},removeTag:function(e){this.tags.remove(e),this.has_focus(!0),this.fire("tagschanged",[this.fieldname(),this.tags()])},initTypeahead:function(){var e=this;this.element.find(".tagslist-input").typeahead({property:this.options.autocomplete_display_prop,source:this.fetchTypeAheadData.bind(this),items:this.options.autocomplete_limit,onselect:function(t){e.current_tag(t[e.options.autocomplete_display_prop]),e.is_valid()&&e.addCurrentTag()}})},fetchTypeAheadData:function(e,t){var n=this;if(1>=t.length){e.process([]),n.currently_valid={};return}var r=midas.core.Request.curry(n.options.autocomplete_uri.replace("{PHRASE}",t));r(function(t){var r=t.data;n.currently_valid={};for(var i=0;i<r.length;i++)n.currently_valid[r[i][n.options.autocomplete_display_prop]]=r[i][n.options.autocomplete_value_prop];e.process(r)})},highlightTag:function(e){var t=!0,n=$(this.element.find(".tagslist-list li")[e]),r=function(){if(!t){n.removeClass("highlight-transition"),n.unbind("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",r);return}t=!1,n.removeClass("highlight")};n.bind("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",r),n.addClass("highlight-transition").addClass("highlight")}}),midas.widgets.TagsList.DEFAULT_OPTIONS={autobind:!0,max:0,fieldname:"tagslist[]",autocomplete:!1,autocomplete_uri:null,autocomplete_limit:20,autocomplete_display_prop:"name",autocomplete_value_prop:null,restrict_values:!0,allow_duplicates:!1,tpl:"Float"},midas.widgets.TagsList.TPL={FLOAT:"Float",STACK:"Stack",INLINE:"Inline"};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/KeyValuesList.js */

midas.widgets.KeyValuesList=midas.widgets.Widget.extend({log_prefix:"KeyValuesList",fieldname:null,keyvalues_pairs:null,init:function(e,t){this.parent(e,t);if(this.options.data)for(var n in this.options.data){var r=this.options.data[n];this.keyvalues_pairs.push(new midas.widgets.KeyValuesList.KeyValuesPair(this.fieldname(),n,r))}},getTemplate:function(){return midas.widgets.KeyValuesList.TPL},addNewKeyValuesPair:function(){this.keyvalues_pairs.push(new midas.widgets.KeyValuesList.KeyValuesPair(this.fieldname(),"Eigentschaft/Name",["Eigentschaft/Wert 1","Eigenschaft/Wert 2"]))},removeKeyValuesPair:function(e){this.keyvalues_pairs.remove(e)},initKnockoutProperties:function(){this.fieldname=ko.observable(this.options.fieldname),this.keyvalues_pairs=ko.observableArray([])}}),midas.widgets.KeyValuesList.KeyValuesPair=midas.core.BaseObject.extend({log_prefix:"KeyValuesList.KeyValuesPair",fieldname:null,key:null,values:null,key_edit_enabled:null,key_input_focused:null,values_edit_enabled:null,values_string:null,values_input_focused:null,init:function(e,t,n){this.parent(),this.initKnockoutProperties(e,t,n)},enableKeyEditing:function(){this.key_edit_enabled(!0),this.key_input_focused(!0)},enableValuesEditing:function(){this.values_edit_enabled(!0),this.values_input_focused(!0),this.values_string(this.values().join(", "))},applyCurrentValues:function(){var e=$.trim(this.values_string()).split(",");this.values([]);for(var t=0;t<e.length;t++)this.values.push($.trim(e[t]))},handleFocus:function(e,t){var n=$(e.originalEvent.target);"select"===t&&n.select(),"setend"===t&&n.putCursorAtEnd()},onKeyInput:function(e,t){return 13===t.which?($(t.originalEvent.target).blur(),!1):!0},initKnockoutProperties:function(e,t,n){var r=this;this.key=ko.observable(t),this.fieldname=ko.computed(function(){return e+"["+r.key()+"][]"}),this.values=ko.observableArray(n),this.key_edit_enabled=ko.observable(!1),this.values_edit_enabled=ko.observable(!1),this.key_input_focused=ko.observable(!1),this.values_input_focused=ko.observable(!1),this.values_string=ko.observable(n.join(", ")),this.key_input_focused.subscribe(function(e){!1===e&&r.key_edit_enabled(!1)}),this.values_input_focused.subscribe(function(e){!1===e&&(r.values_edit_enabled(!1),r.applyCurrentValues())})}}),midas.widgets.KeyValuesList.DEFAULT_OPTIONS={autobind:!0,fieldname:"keyvalueslist"},midas.widgets.KeyValuesList.TPL='<a class="btn btn-success"    data-bind="click: addNewKeyValuesPair">  <i class="icon-white icon-plus " ></i> Neue Eigenschaft</a><br /><br /><table class="propertyExplorer table table-bordered table-striped">    <thead>        <tr>            <th>Name</th>            <th>Werte</th>            <th></th>        </tr>    </thead>    <tbody data-bind="foreach: keyvalues_pairs">        <tr>            <td class="propertyName">                <input class="key-values-list-keyinput" type="text"                       data-bind="value: key,                                  valueUpdate: \'afterkeydown\',                                  hasfocus: key_input_focused,                                  visible: key_edit_enabled,                                  event: {                                    focus: function(data, event) { handleFocus(event, \'select\'); },                                    keypress: onKeyInput                                  }" />                <span data-bind="text: key,                                 visible: !key_edit_enabled(),                                 click: enableKeyEditing">                </span>            </td>            <td class="propertyValues">                <textarea class="span8"                           data-bind="hasfocus: values_input_focused,                                      visible: values_edit_enabled,                                      value: values_string,                                     event: { focus: function(data, event) { handleFocus(event, \'setend\'); } }">                </textarea>                <ul data-bind="foreach: values,                                visible: !values_edit_enabled()">                    <li class="label label-info"                         data-bind="text: $data,                                    click: function() { $parent.enableValuesEditing(); }">                    </li>                </ul>            </td>            <td>                <i class="icon-remove"                    data-bind="click: function(data){ $parent.removeKeyValuesPair(data); }">                </i>            </td>        </tr>    </tbody></table><input type="hidden" value="" data-bind="attr: { name: fieldname() }" /><ul class="key-values-list-valuelist" style="display: none"     data-bind="foreach: keyvalues_pairs">    <div class="key-values-list-proplist"          data-bind="foreach: values">        <input type="hidden"                data-bind="attr: { name: $parent.fieldname },                           value: $data" />    </div></ul>';

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/TimeTable.js */

midas.widgets.TimeTable=midas.widgets.Widget.extend({log_prefix:"TimeTable",fieldname:null,time_spans:null,days_of_week:null,input_from:null,input_to:null,is_valid:null,init:function(e,t){this.parent(e,t);if(this.options.data)for(var n=0;n<this.options.data.length;n++){var r=this.options.data[n];this.time_spans.push(new midas.widgets.TimeTable.TimeSpan(r.from,r.to))}},getTemplate:function(){return midas.widgets.TimeTable.TPL},onInput:function(e,t){return 13===t.which?(this.is_valid()&&this.addCurrentTimeSpan(),!1):!0},validate:function(){return this.is_valid((new RegExp(this.options.time_pattern,"g")).test(this.input_from.time())&&(new RegExp(this.options.time_pattern,"g")).test(this.input_to.time())),this.is_valid()},addCurrentTimeSpan:function(){var e={day:this.input_from.day()[0],time:this.input_from.time()},t={day:this.input_to.day()[0],time:this.input_to.time()};this.time_spans.push(new midas.widgets.TimeTable.TimeSpan(e,t)),this.input_from.time(""),this.input_to.time(""),this.element.find(".tagslist-from-day").focus()},removeTimeSpan:function(e){this.time_spans.remove(e)},initKnockoutProperties:function(){var e=this;this.is_valid=ko.observable(!1),this.fieldname=ko.observable(this.options.fieldname),this.time_spans=ko.observableArray([]).indexed(),this.days_of_week=ko.observableArray(["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"]),this.input_from={day:ko.observable(["Montag"]),time:ko.observable("")},this.input_to={day:ko.observableArray(["Montag"]),time:ko.observable("")},this.input_from.time.subscribe(function(t){e.validate()}),this.input_to.time.subscribe(function(t){e.validate()})}}),midas.widgets.TimeTable.TimeSpan=midas.core.BaseObject.extend({log_prefix:"TimeSpan",from:null,to:null,init:function(e,t){this.parent(),this.from=e,this.to=t}}),midas.widgets.TimeTable.DEFAULT_OPTIONS={autobind:!0,fieldname:"timetable",time_pattern:"([01]?[0-9]|2[0-3]):[0-5][0-9]",data:null},midas.widgets.TimeTable.TPL='<div class="row-fluid"><div class="span3">  <div class="control-group">      <label>Von</label>      <div class="controls">          <select class="tagslist-from-day input-medium"                   data-bind="options: days_of_week,                              selectedOptions: input_from.day,                              event: { keypress: onInput }">          </select>          <input class="tagslist-from-time input-medium" placeholder="09:00"                  data-bind=\'value: input_from.time,                              valueUpdate: "afterkeydown",                              event: { keypress: onInput }\' />      </div>  </div></div><div class="span3">  <div class="control-group">      <label>Bis</label>      <div class="controls">          <select class="tagslist-to-day input-medium"                   data-bind="options: days_of_week,                              selectedOptions: input_to.day,                              event: { keypress: onInput }">          </select>          <input class="tagslist-to-time input-medium" placeholder="09:00"                  data-bind=\'value: input_to.time,                               valueUpdate: "afterkeydown",                               event: { keypress: onInput }\' />      </div>  </div></div><div class="span3">  <div class="control-group">      <label>ist dieser Ort geöffnet.</label>  </div></div><div class="span3">  <button class="btn btn-success timetable-add" style="margin-top:32px"           data-bind="enable: is_valid,           click: addCurrentTimeSpan">hinzufügen</button></div></div><div class="row-fluid">  <table class="table table-bordered table-striped">      <thead>          <tr>              <th>Von</th>              <th>Bis</th>              <th>Status</th>              <th></th>          </tr>      </thead>      <tbody data-bind="foreach: time_spans">          <tr>              <td><span data-bind="text: from.day"></span>, <span data-bind="text: from.time"></span> Uhr</td>              <td><span data-bind="text: to.day"></span>, <span data-bind="text: to.time"></span> Uhr</td>              <td>geöffnet</td>              <td><i class="icon-remove"                      data-bind="click: function(data) { $parent.removeTimeSpan(data); }"></i>              </td>          </tr>      </tbody>  </table></div><ul class="timetable-valuelist" style="display: none">  <li data-bind="foreach: time_spans">      <input type="hidden" data-bind="attr: { name: $parent.fieldname() + \'[\'+$index()+\'][from][day]\' }, value: from.day" />      <input type="hidden" data-bind="attr: { name: $parent.fieldname()+\'[\'+$index()+\'][from][time]\' }, value: from.time" />      <input type="hidden" data-bind="attr: { name: $parent.fieldname()+\'[\'+$index()+\'][to][day]\' }, value: to.day" />      <input type="hidden" data-bind="attr: { name: $parent.fieldname()+\'[\'+$index()+\'][to][time]\' }, value: to.time" />  </li></ul>';

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/AutoComplete.js */

midas.widgets.AutoComplete=midas.widgets.Widget.extend({log_prefix:"AutoComplete",currently_valid:null,fieldname:null,current_entry:null,current_val:null,has_focus:null,is_valid:null,init:function(e,t){this.parent(e,t),this.currently_valid={},this.initTypeahead()},getTemplate:function(){return midas.widgets.AutoComplete.TPL},initKnockoutProperties:function(){var e=this;this.fieldname=ko.observable(this.options.fieldname),this.current_entry=ko.observable(""),this.current_val=ko.observable(""),this.has_focus=ko.observable(!1),this.is_valid=ko.observable(!1),this.current_entry.subscribe(function(t){var n=e.options.autocomplete_prop,r=e.options.autocomplete_value_prop||n,i=n!==r;i&&e.validate()?e.current_val(e.currently_valid[e.current_entry()]):i||e.current_val(e.current_entry())})},validate:function(){var e=this.current_entry();return this.is_valid("undefined"!=typeof this.currently_valid[e]),this.is_valid()},initTypeahead:function(){var e=this;this.element.find(".autocomp-input").typeahead({property:this.options.autocomplete_prop,source:this.fetchTypeAheadData.bind(this),items:this.options.autocomplete_limit,onselect:function(t){var n=e.options.autocomplete_prop,r=e.options.autocomplete_value_prop||n,i=n!==r;e.current_entry(t[e.options.autocomplete_prop]),e.is_valid()&&i&&e.current_val(t[r])}})},fetchTypeAheadData:function(e,t){var n=this;if(1>=t.length){e.process([]),n.currently_valid={};return}var r=midas.core.Request.curry(n.options.autocomplete_uri.replace("{PHRASE}",t));r(function(t){var r=n.options.autocomplete_prop,i=n.options.autocomplete_value_prop||r,s=t.data;n.currently_valid={};for(var o=0;o<s.length;o++)n.currently_valid[s[o][r]]=s[o][i];e.process(s)})}}),midas.widgets.AutoComplete.DEFAULT_OPTIONS={autobind:!0,autocomplete_uri:null,autocomplete_limit:20,autocomplete_prop:"name",autocomplete_value_prop:"identifier"},midas.widgets.AutoComplete.TPL='<input type="text" class="class8 typeahead autocomp-input"        data-bind=\'value: current_entry, valueUpdate: "afterkeydown"\' /><input type="hidden" class="class8 typeahead autocomp-input"        data-bind="value: current_val, attr: { name: fieldname }" />';

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/LocationWidget.js */

midas.widgets.LocationWidget=midas.widgets.Widget.extend({log_prefix:"LocationWidget",select_dialog:null,map_canvas:null,found_locations:null,fields:null,location:null,is_processing:null,fieldname:null,init:function(e,t){this.parent(e,t)},getTemplate:function(){return"static/widgets/LocationWidget.html"},initGui:function(){this.map_canvas=this.element.find(".map-canvas").first(),this.parent(),this.location&&this.renderLocationOnMap()},initKnockoutProperties:function(){this.found_locations=ko.observableArray([]),this.is_processing=ko.observable(!1),this.fieldname=ko.observable(this.options.fieldname),this.location=new midas.widgets.LocationWidget.Location(this.options.location||{})},localize:function(){var e=midas.core.Request.curry(this.options.localize_url,this.location.values(),"get","json");this.is_processing(!0);var t=this;e(function(e){var n=e.location.items_count;t.found_locations([]);for(var r=0;r<n;r++){var i=e.location[r];i&&"Außerhalb Berlins"!=i["administrative district"]&&t.found_locations.push(midas.widgets.LocationWidget.Location.createFromServiceResp(i))}1<t.found_locations().length?t.showSelectLocationDialog():t.onLocationSelected(t.found_locations()[0]),t.is_processing(!1)},function(){t.is_processing(!1)})},onLocationSelected:function(e){if(!e)return;this.hideSelectLocationDialog(),this.location.longitude(e.longitude()),this.location.latitude(e.latitude()),this.location.zipcode(e.zipcode()),this.location.neighborhood(e.neighborhood()),this.location.district(e.district()),this.location.administrative_district(e.administrative_district()),e.street(),e.housenumber(),this.location.city(e.city()),this.renderLocationOnMap()},showSelectLocationDialog:function(){this.select_dialog?this.select_dialog.twodal("show"):this.select_dialog=this.element.find(".dialog-select-location").twodal({show:!0,backdrop:!0})},hideSelectLocationDialog:function(){this.select_dialog&&this.select_dialog.twodal("hide")},renderLocationOnMap:function(){var e=new google.maps.LatLng(this.location.latitude(),this.location.longitude()),t=new google.maps.Marker({position:e,title:this.location.name()}),n=new google.maps.Map(this.map_canvas[0],{zoom:16,center:e,sensor:!1,mapTypeId:google.maps.MapTypeId.ROADMAP});t.setMap(n);var r=new google.maps.Geocoder,i=this;google.maps.event.addListener(n,"click",function(e){t.setPosition(e.latLng),i.is_processing(!0),r.geocode({latLng:e.latLng},function(t,n){if(n==google.maps.GeocoderStatus.OK){if(t[0]){var r=t[0].address_components,s={};for(var o=0;o<r.length;o++){var u=r[o].types[0];s[u]=r[o].long_name}i.onLocationSelected(midas.widgets.LocationWidget.Location.createFromServiceResp({street:s.route,housenumber:s.street_name,uzip:s.postal_code,city:s.locality,latitude:e.latLng.lat(),longitude:e.latLng.lng()})),i.is_processing(!1)}}else alert("Geocoder failed due to: "+n)})})}}),midas.widgets.LocationWidget.DEFAULT_OPTIONS={autobind:!0,localize_url:"",location:null},midas.widgets.LocationWidget.Location=midas.core.BaseObject.extend({name:null,street:null,housenumber:null,details:null,zipcode:null,city:null,administrative_district:null,district:null,neighborhood:null,longitude:null,latitude:null,init:function(e){this.name=ko.observable(e.name||""),this.street=ko.observable(e.street||""),this.housenumber=ko.observable(e.housenumber||""),this.details=ko.observable(e.details||""),this.city=ko.observable(e.city||""),this.zipcode=ko.observable(e.postalCode||e.zipcode||""),this.administrative_district=ko.observable(e.administrativeDistrict||""),this.district=ko.observable(e.district||""),this.neighborhood=ko.observable(e.neighborhood||""),e.coordinates?(this.longitude=ko.observable(e.coordinates.lon||""),this.latitude=ko.observable(e.coordinates.lat||"")):(this.longitude=ko.observable(e.lon||""),this.latitude=ko.observable(e.lat||""))},values:function(){var e=["street","housenumber","city","zipcode"],t={};for(var n=0;n<e.length;n++){var r=this[e[n]]().trim();r&&(t[e[n]]=r)}return t}}),midas.widgets.LocationWidget.Location.createFromServiceResp=function(e){var t={district:e.district||null,administrativeDistrict:e["administrative district"]||null,neighborhood:e.neighborhood||null,postalCode:e.uzip||null,street:e.street||null,city:e.city||null,housenumber:e.housenumber||null};return e.latitude&&e.longitude&&(t.coordinates={lon:e.longitude,lat:e.latitude}),new midas.widgets.LocationWidget.Location(t)};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/DropdownWidget.js */

midas.widgets.DropdownWidget=midas.widgets.Widget.extend({log_prefix:"DropdownWidget",init:function(e,t){this.parent(e,t)},getTemplate:function(){return!1},initGui:function(){var e=this.element.find(this.options.text_input),t=this.element.find(this.options.select_input);t.change(function(){e.val($(this).find(":selected").text().trim())})}}),midas.widgets.DropdownWidget.DEFAULT_OPTIONS={autobind:!0,select_input:".value-select",text_input:".text-hidden"};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/AssetList.js */

/**
 * midas.widgets
 **/midas.widgets.AssetList=midas.widgets.Widget.extend({log_prefix:"AssetList",assets:null,fieldname:null,uploader:null,ichie:null,area_of_interest:null,aoi_enabled:null,start_active:null,aoi_scan_active:null,cur_aoi_request:null,popover_pos:null,init:function(e,t){this.parent(e,t)},getTemplate:function(){return"static/widgets/AssetList.html"},initGui:function(){this.parent(),this.initUploader(),this.initDialog();var e=this;this.ichie=window.IchieJs.create({main_container:this.element.find(".ichiejs-main-stage")[0],width:600,height:338,onSelectionChanged:function(t){var n;e.dialog&&(n=e.dialog.data("cur_asset"))&&e.applyAoiSelection(t)}}),this.element.find("ul").sortable().bind("sortupdate",function(){console.log("Yay, we've a new sorting!")}),this.element.find(".asset-item").popover()},initKnockoutProperties:function(){this.fieldname=ko.observable(this.options.fieldname),this.aoi_enabled=ko.observable(!1),this.start_active=ko.observable(!1),this.aoi_scan_active=ko.observable(!1),this.area_of_interest=ko.observableArray([]),this.popover_pos=ko.observable(this.options.popover_pos||"top");var e=this.options.assets||[];this.assets=ko.observableArray([]);for(var t=0;t<e.length;t++)this.assets.push(new midas.widgets.AssetList.Asset(e[t]));this.assets.push({dropzone:!0})},initUploader:function(){var e=this;this.uploader=new midas.widgets.AssetList.FileUploader({drop_target:this.element.find(".dropzone").first(),put_url:this.options.put_url}),this.uploader.on("upload::start",function(t){e.element.find(".asset-item").popover("destroy"),e.assets.splice(e.assets().length-1,0,t),e.element.find(".asset-item").popover(),e.options.max<=e.assets().length&&(e.uploader.enabled=!1)}),this.uploader.on("upload::progress",function(e,t){e.progress(t*100)}),this.uploader.on("upload::complete",function(t,n){e.element.find(".asset-list").sortable(),t.id(n.identifier),t.url(n.url)}),e.options.max<=e.assets().length&&(e.uploader.enabled=!1)},initDialog:function(){var e=this;this.dialog=$(".modal-edit-asset").first().twodal({backdrop:!0,show:!1,onhidden:function(){},events:{onstoredata:function(){var t=e.dialog.data("cur_asset");t||alert("AssetList widget state is invalid, no current asset found!"),e.storeMetaData(t,{caption:e.dialog.twodal("promptVal",".input-caption"),copyright:e.dialog.twodal("promptVal",".input-copyright"),copyright_url:e.dialog.twodal("promptVal",".input-copyright-url"),aoi:e.aoi_enabled()?e.area_of_interest():null}),e.dialog.twodal("hide")}}})},onEditClicked:function(e){this.dialog.data("cur_asset",e),this.dialog.twodal("promptVal",".input-caption",e.caption()),this.dialog.twodal("promptVal",".input-copyright",e.copyright()),this.dialog.twodal("promptVal",".input-copyright-url",e.copyright_url()),this.area_of_interest(e.aoi||[0,0,20,20]);var t=this;this.ichie.launch(e.url(),function(){e.aoi?(t.ichie.setSelection({left:e.aoi[0],top:e.aoi[1],right:e.aoi[0]+e.aoi[2],bottom:e.aoi[1]+e.aoi[3]}),t.aoi_enabled(!0),t.start_active(!1),t.start_active(!0),t.ichie.showSelection()):(t.ichie.setSelection({left:60,top:60,right:200,bottom:200}),t.aoi_enabled(!1),t.start_active(!0),t.start_active(!1),t.ichie.hideSelection())}),this.dialog.twodal("show")},onDeleteClicked:function(e){this.element.find(".asset-item").popover("destroy"),this.assets.remove(e),this.element.find(".asset-item").popover(),this.options.max>this.assets().length&&(this.uploader.enabled=!0)},runFaceDetection:function(){asset=this.dialog.data("cur_asset")||asset;var e=this;this.aoi_scan_active(!0);var t=midas.core.Request.curry(this.options.aoi_url+"?aid="+asset.id());this.cur_aoi_request=t(function(t){e.aoi_scan_active(!1);var n=t.aoi;e.ichie.setSelection({left:n[0],top:n[1],right:n[2],bottom:n[3]})},function(t){e.aoi_scan_active(!1)})},abortFaceDetection:function(){this.cur_aoi_request&&this.cur_aoi_request.abort()},storeMetaData:function(e,t){var n=this,r={aid:e.id(),metaData:t},i=midas.core.Request.curry(this.options.post_url,r,"post");e.is_loading(!0),i(function(t){var n=t.data.asset.metaData;e.caption(n.caption||""),e.copyright_url(n.copyright_url||""),e.copyright(n.copyright||""),e.setAoi(n.aoi),e.is_loading(!1)},function(t){e.is_loading(!1)})},toggleAoiSelection:function(){this.aoi_enabled(!this.aoi_enabled()),this.ichie[this.aoi_enabled()?"showSelection":"hideSelection"]()},applyAoiSelection:function(e){this.area_of_interest.splice(0,4,Math.floor(e.left),Math.ceil(e.top),Math.ceil(e.right-e.left),Math.ceil(e.bottom-e.top))}}),midas.widgets.AssetList.Asset=midas.core.BaseObject.extend({id:null,url:null,name:null,caption:null,caption_txt:null,copyright:null,copyright_txt:null,copyright_url:null,copyright_url_txt:null,popover_content:null,width:null,height:null,x:null,y:null,aoi:null,aoi_enabled:null,has_id:null,progress:null,is_loading:null,init:function(e){this.parent(),this.initKnockoutProperties(e),this.setAoi(e.aoi)},setAoi:function(e){this.aoi=null;if($.isArray(e)){this.aoi=[];for(var t=0;t<4;t++)this.aoi[t]=+e[t]}},initKnockoutProperties:function(e){var t=this;this.id=ko.observable(e.id||""),this.is_loading=ko.observable(!1),this.url=ko.observable(e.url),this.name=ko.observable(e.name),this.caption=ko.observable(e.caption||"");var n=140,r=130,i=e.width||n,s=e.height||r,o=i/s;o>1&&i>n?(i=n,s=i/o):o<=1&&s>r&&(s=r,i=o*s),this.height=ko.observable(s),this.width=ko.observable(i),this.x=ko.observable(Math.floor((n-i)/2)),this.y=ko.observable(Math.floor((r-s)/2)),this.aoi_enabled=ko.observable(!!e.aoi),this.progress=ko.observable(0),this.caption_txt=ko.computed(function(){return 0===t.caption().length?" - ":t.caption()}),this.copyright=ko.observable(e.copyright||""),this.copyright_txt=ko.computed(function(){return 0===t.copyright().length?" - ":t.copyright()}),this.copyright_url=ko.observable(e.copyright_url||""),this.copyright_url_txt=ko.computed(function(){return 0===t.copyright_url().length?" - ":t.copyright_url()}),this.has_id=ko.computed(function(){return!!t.id()}),this.popover_content=ko.computed(function(){return"<p><b>Titel</b> "+t.caption_txt()+"</p><p><b>Copyright</b> "+t.copyright_txt()+"</p><p><b>Copyright Url</b> "+t.copyright_url_txt()})}}),midas.widgets.AssetList.FileUploader=midas.core.BaseObject.extend({log_prefix:"FileUploader",put_url:null,enabled:null,drop_target:null,queue:null,is_running:null,init:function(e){this.parent(),this.queue=[],this.enabled=!0,this.put_url=e.put_url,this.is_running=!1,this.drop_target=$(e.drop_target),this.initDragEvents()},initDragEvents:function(){var e=this,t=this.drop_target[0],n=$(document.body);document.addEventListener("dragenter",function(t){t.stopPropagation(),t.preventDefault(),e.enabled&&n.addClass("drag-enabled")},!1),document.addEventListener("dragexit",function(e){e.stopPropagation(),e.preventDefault(),n.removeClass("drag-enabled")},!1),document.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),n.removeClass("drag-enabled")},!1),document.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),t.addEventListener("dragover",this.dragHover.bind(this),!1),t.addEventListener("drop",this.dragDropped.bind(this),!1)},dragHover:function(e){e.stopPropagation(),e.preventDefault()},dragDropped:function(e){$(document.body).removeClass("drag-enabled");if(this.enabled){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files;0<t.length&&this.handleFiles(t)}},handleFiles:function(e){var t=this;for(i=0;i<e.length;i++)this.queue.push(e[i]);this.is_running||this.shiftQueue()},handleReaderProgress:function(e){e.lengthComputable&&this.fire("readfile::progress",[e.loaded/e.total])},handleReaderLoadComplete:function(e,t){this.fire("readfile::complete",[t]),this.uploadFile(t,e.target.result)},shiftQueue:function(){var e=this;if(!this.enabled){this.queue=[],this.is_running=!1;return}var t=this.queue.shift();if(t){this.is_running=!0;var n=new FileReader;n.onloadend=function(n){e.handleReaderLoadComplete(n,t)},n.onprogress=function(n){e.handleReaderProgress(n,t)},n.readAsDataURL(t)}else this.is_running=!1},uploadFile:function(e,t){var n=this,r=new Image;r.onload=function(){var i=new FormData;i.append("asset",e);var s=new midas.widgets.AssetList.Asset({name:e.name,url:t,width:r.width,height:r.height});xhr=new XMLHttpRequest,xhr.onload=function(e){if(xhr.status==200){var t=JSON.parse(xhr.responseText);n.fire("upload::complete",[s,t.data]),n.shiftQueue()}},xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&n.fire("upload::progress",[s,e.loaded/e.total])},!1),n.fire("upload::start",[s]),xhr.open("post",n.put_url,!0),xhr.setRequestHeader("Accept","application/json"),xhr.send(i)},r.src=t}}),midas.widgets.AssetList.DEFAULT_OPTIONS={autobind:!0,fieldname:"",assets:null,post_url:"",put_url:"",max:50};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/ClipboardWidget.js */

midas.widgets.ClipboardWidget=midas.widgets.Widget.extend({log_prefix:"AutoComplete",clipboard_client:null,init:function(e,t){this.parent(e,t),this.options.copy_trigger_el=this.element.find(this.options.copy_trigger_el).first(),this.options.copy_text_el=this.element.find(this.options.copy_text_el).first(),this.clipboard_client=new ZeroClipboard.Client,this.clipboard_client.setText(this.options.copy_text),this.clipboard_client.glue(this.options.copy_trigger_el[0]),this.clipboard_client.addEventListener("onComplete",this.onCopiedToClipboard.bind(this))},getTemplate:function(){return null},onCopiedToClipboard:function(e,t){this.fire("notify::info",['Der Text: "'+t+'" wurde in die Zwischenablage kopiert.'])}}),midas.widgets.ClipboardWidget.DEFAULT_OPTIONS={autobind:!0,copy_text:"",copy_trigger_el:null,copy_trigger_el:null};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/EmbedCodeWidget.js */

midas.widgets.EmbedCodeWidget=midas.widgets.Widget.extend({log_prefix:"EmbedCodeWidget",fieldname:null,embed_code:null,preview_code:null,is_valid:null,init:function(e,t){this.parent(e,t)},getTemplate:function(){return"static/widgets/EmbedCodeWidget.html"},initKnockoutProperties:function(){var e=this;this.fieldname=ko.observable(this.options.fieldname),this.embed_code=ko.observable(this.options.embed_code||""),this.preview_code=ko.observable(""),this.is_valid=ko.computed(function(){return e.embed_code().match(/<iframe.*?<\/iframe>/ig)?(e.preview_code(e.embed_code()),!0):(e.preview_code(""),!1)})}}),midas.widgets.EmbedCodeWidget.DEFAULT_OPTIONS={autobind:!0,fieldname:null,embed_code:null};

/* /home/vagrant/projects/honeybee-showcase/app/resources/scripts/midas/widgets/DatePicker.js */

midas.widgets.DatePicker=midas.widgets.Widget.extend({log_prefix:"DatePicker",date:null,format:null,field_name:null,field_id:null,getTemplate:function(){return"static/widgets/DatePicker.html"},initGui:function(){this.parent();var e=this.element.find(".input-append.date");e.datepicker();var t=e.find("input"),n=e.find(".add-on");t.focus(function(){e.datepicker("show")}),t.blur(function(){e.datepicker("hide")}),n.click(function(){t.focus()})},initKnockoutProperties:function(){this.date=ko.observable(this.options.date),this.format=ko.observable(this.options.format),this.field_name=ko.observable(this.options.field_name),this.field_id=ko.observable(this.options.field_id)}}),midas.widgets.DatePicker.DEFAULT_OPTIONS={autobind:!0,date:"12.12.2013",format:"dd.mm.yyyy",field_name:"",field_id:""};