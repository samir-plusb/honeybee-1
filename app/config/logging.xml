<?xml version="1.0" encoding="UTF-8"?>
<ae:configurations 
    xmlns:ae="http://agavi.org/agavi/config/global/envelope/1.0" 
    xmlns="http://agavi.org/agavi/config/parts/logging/1.0">
    <ae:configuration>
        <loggers default="default">

            <!-- log all except for DEBUG messages -->
            <logger name="app" class="Honeybee\Agavi\Logging\Logger" level="AgaviLogger::ALL ^ AgaviLogger::DEBUG">
                <appenders>
                    <appender>ApplicationLogAppender</appender>
                </appenders>
            </logger>

            <!-- log only DEBUG messages -->
            <logger name="debug" class="Honeybee\Agavi\Logging\Logger" level="AgaviLogger::DEBUG">
                <appenders>
                    <appender>DebugLogAppender</appender>
                </appenders>
            </logger>

            <!-- log all except for DEBUG and INFO messages -->
            <logger name="error" class="Honeybee\Agavi\Logging\Logger" level="AgaviLogger::ALL ^ AgaviLogger::DEBUG ^ AgaviLogger::INFO">
                <appenders>
                    <appender>ErrorLogAppender</appender>
                </appenders>
            </logger>

            <!-- log all except for DEBUG messages -->
            <logger name="login" class="Honeybee\Agavi\Logging\Logger" level="AgaviLogger::ALL ^ AgaviLogger::DEBUG">
                <appenders>
                    <appender>LoginLogAppender</appender>
                </appenders>
            </logger>

            <!-- log all messages, appenders decide if they actually want to log at all -->
            <logger name="default" class="Honeybee\Agavi\Logging\Logger" level="AgaviLogger::ALL">
                <appenders>
                    <appender>ApplicationLogAppender</appender>
                    <appender>fingers_crossed</appender>
                </appenders>
            </logger>

        </loggers>

        <appenders>

            <!-- DefaultSetup specifies a Monolog\Logger with FingersCrossedHandler that logs all messages above DEBUG
                 level to syslog and file when a CRITICAL log message appears. For parameters see the source. -->
            <appender name="fingers_crossed" class="Honeybee\Agavi\Logging\MonologLoggerAppender" layout="DateTimeLayout">
                <ae:parameters>
                    <ae:parameter name="channel">critical</ae:parameter>
                    <ae:parameter name="setup">Honeybee\Agavi\Logging\Monolog\DefaultSetup</ae:parameter>
                </ae:parameters>
            </appender>

            <!-- FirePhpSetup specifies a Monolog\Logger with FirePHPHandler that logs all messages above DEBUG
                 level via FirePHP and thus you may see those messages in Firefox etc. For parameters see source. -->
            <appender name="firephp" class="Honeybee\Agavi\Logging\MonologLoggerAppender" layout="DateTimeLayout">
                <ae:parameters>
                    <ae:parameter name="channel">%core.environment%</ae:parameter>
                    <ae:parameter name="setup">Honeybee\Agavi\Logging\Monolog\FirePhpSetup</ae:parameter>
                </ae:parameters>
            </appender>

            <!--
                Debug logs are rotated in a 7 day (AgaviRotatingFileLoggerAppender default) cycle
                Use 'cycle' parameter to alter the cycle.
            -->
            <appender name="ApplicationLogAppender" class="AgaviRotatingFileLoggerAppender" layout="DateTimeLayout">
                <ae:parameters>
                    <ae:parameter name="dir">%core.app_dir%/log/</ae:parameter>
                    <ae:parameter name="prefix">app-</ae:parameter>
                </ae:parameters>
            </appender>
            <appender name="DebugLogAppender" class="AgaviRotatingFileLoggerAppender" layout="DateTimeLayout">
                <ae:parameters>
                    <ae:parameter name="dir">%core.app_dir%/log/</ae:parameter>
                    <ae:parameter name="prefix">debug-</ae:parameter>
                </ae:parameters>
            </appender>
            <appender name="ErrorLogAppender" class="AgaviRotatingFileLoggerAppender" layout="DateTimeLayout">
                <ae:parameters>
                    <ae:parameter name="dir">%core.app_dir%/log/</ae:parameter>
                    <ae:parameter name="prefix">error-</ae:parameter>
                </ae:parameters>
            </appender>
            <appender name="LoginLogAppender" class="AgaviRotatingFileLoggerAppender" layout="DateTimeLayout">
                <ae:parameters>
                    <ae:parameter name="dir">%core.app_dir%/log/</ae:parameter>
                    <ae:parameter name="prefix">login-</ae:parameter>
                </ae:parameters>
            </appender>
        </appenders>

        <layouts>
            <layout name="DateTimeLayout" class="AgaviTimestampLoggerLayout"/>
        </layouts>

    </ae:configuration>

    <ae:configuration environment="development.*">
        <loggers default="default">
            <!-- log all messages, appenders decide if they actually want to log at all -->
            <logger name="default" class="Honeybee\Agavi\Logging\Logger" level="AgaviLogger::ALL">
                <appenders>
                    <appender>firephp</appender>
                </appenders>
            </logger>
        </loggers>
    </ae:configuration>

</ae:configurations>
