<?xml version="1.0" encoding="UTF-8"?>
<ae:configurations xmlns:ae="http://agavi.org/agavi/config/global/envelope/1.1" xmlns="http://agavi.org/agavi/config/parts/settings/1.0">
    <ae:configuration>
    <settings prefix="shofi_categories.">
            <setting name="vertical_autocomp_uri">shofi_verticals.suggest</setting>

            <!-- list integration {@see IListConfig} -->
            <setting name="list_config">
                <!-- common list params -->
                <ae:parameter name="defaultLimit">15</ae:parameter>
                <ae:parameter name="translationDomain">shofi_categories.list</ae:parameter>
                <ae:parameter name="pagingRange">9</ae:parameter>
                <ae:parameter name="routeName">shofi_categories.list</ae:parameter>
                <ae:parameter name="typeKey">shofi_categories</ae:parameter>
                <ae:parameter name="suggestField">masterRecord.name</ae:parameter>

                <!--
                    define which list data shall be displayed
                    the names are fully qualified paths referring to values inside the list data
                -->
                <ae:parameter name="fields">
                    <ae:parameters>
                        <ae:parameter name="name">
                            <ae:parameter name="valuefield">masterRecord.name</ae:parameter>
                            <ae:parameter name="sortfield">masterRecord.name.raw</ae:parameter>
                        </ae:parameter>
                        <ae:parameter name="singular">
                            <ae:parameter name="valuefield">masterRecord.singular</ae:parameter>
                            <ae:parameter name="sortfield">masterRecord.singular.raw</ae:parameter>
                        </ae:parameter>
                        <ae:parameter name="plural">
                            <ae:parameter name="valuefield">masterRecord.plural</ae:parameter>
                            <ae:parameter name="sortfield">masterRecord.plural.raw</ae:parameter>
                        </ae:parameter>
                        <ae:parameter name="vertical">
                            <ae:parameter name="valuefield">masterRecord.vertical.name</ae:parameter>
                            <ae:parameter name="sortfield">masterRecord.vertical.name.raw</ae:parameter>
                        </ae:parameter>
                        <ae:parameter name="places_count">
                            <ae:parameter name="valuefield">identifier</ae:parameter>
                            <ae:parameter name="renderer">PlacesRefCountRenderer</ae:parameter>
                        </ae:parameter>
                        <ae:parameter name="owner">
                            <ae:parameter name="valuefield">currentState.owner</ae:parameter>
                            <ae:parameter name="sortfield">currentState.owner</ae:parameter>
                            <ae:parameter name="renderer">TicketOwnerListValueRenderer</ae:parameter>
                        </ae:parameter>
                    </ae:parameters>
                </ae:parameter>

                <!-- define our clientside controller along with some options -->
                <ae:parameter name="clientSideController">
                    <ae:parameter name="implementor">CategoriesListController</ae:parameter>
                    <ae:parameter name="options">
                        <ae:parameter name="find_duplicates_route">shofi.view_duplicates</ae:parameter>
                        <!-- urls can be either absolut urls or agavi route names. -->
                        <ae:parameter name="vertical_batch">
                            <ae:parameter name="post_url">@see Shofi/ListAction::prepareListConfig</ae:parameter>
                            <ae:parameter name="autocomplete_url">%shofi_categories.vertical_autocomp_uri%</ae:parameter>
                        </ae:parameter>
                    </ae:parameter>
                </ae:parameter>

                <!--
                    define the actions that are available for the list items and batch processing:
                    - you can choose to delegate actions to the workflow handler or the configured client-side controller
                    - actions are assigned using a simple invocation syntax refering to either the workflow handler or controller.
                    - whereas the workflow handler only provides a proceed and a run method, 
                      by changing the controller implementation you can easily pluck in new actions by extending the base controller.
                    by convention the first two parameters of your controller's action callbacks should always be "is_batch" and "item".
                -->
                <ae:parameter name="itemActions">
                    <ae:parameters>
                        <ae:parameter name="edit">ctrl.run(is_batch, item)</ae:parameter>
                        <ae:parameter name="assign_vertical">ctrl.assignVertical(is_batch, item)</ae:parameter>
                        <ae:parameter name="find_dups">ctrl.findDuplicates(item)</ae:parameter>
                        <ae:parameter name="delete">ctrl.proceed(is_batch, item, 'delete')</ae:parameter>
                    </ae:parameters>
                </ae:parameter>

                <ae:parameter name="batchActions">
                    <ae:parameters>
                        <ae:parameter name="assign_vertical">ctrl.assignVertical(is_batch, item)</ae:parameter>
                        <ae:parameter name="delete">ctrl.proceed(is_batch, null, 'delete')</ae:parameter>
                    </ae:parameters>
                </ae:parameter>
            </setting>
        </settings>
    </ae:configuration>
</ae:configurations>