<section class="container-tree-data row-fluid"
    data-controller="{{client_side_controller.implementor}}"
    data-controller-options="{{client_side_controller.options|json_encode}}">

    <section class="container-alerts"
         data-bind="template: { foreach: alerts, afterAdd: showAlert, beforeRemove: hideAlert }">
        <div class="alert"
             data-bind="css: {
                            'alert-success': 'success' === type,
                            'alert-error': 'error' === type
                        }">
            <strong data-bind="text: message"></strong>
            <i class="icon-remove icon-white close"
               data-bind="click: function(alert) { $parent.removeAlert(alert); }"> </i>
        </div>
    </section>

<!-- **************************************************
    Tree Controls/Widgets such as search and batch processing.
************************************************** -->
    <section class="well toolbar">
        <div class="container-viewcontrols">
            <section class="view-mode-switch">
                <div class="btn-group" data-toggle="radio">
                    <a class="btn btn-primary" href="{{ro.gen(module_type_key ~ '.list')}}">Liste</a>
                    <a class="btn active btn-primary" href="{{ro.gen(module_type_key ~ '.tree')}}">Hierarchie</a>
                </div>
            </section>
        </div>
        <div class="container-actions clearfix">
            <section>
                <a class="btn" href="{{ro.gen(module_type_key ~ '.edit')}}">Neuer Eintrag</a>
            </section>
            <section>
                <div class="btn-group">
                    <a class="btn btn-warning dropdown-toggle" data-toggle="dropdown" href="#">
                        Stapelverarbeitung
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                    {% for action_name, action in batch_actions %}
                        <li>
                            <a class="honeybee-action honeybee-action-{{action_name}}"
                               data-bind="click: function(item, event) { var is_batch = true; {{action}} },
                                          enable: has_selection">{{ tm._(action_name, translation_domain) }}</a>
                        </li>
                    {% endfor %}
                    </ul>
                </div>
            </section>
        </div>
    </section>

    <section class="render-tree">
    </section>

    <script class="tree-data-json" type="application/json">
        {{tree|json_encode|raw}}
    </script>
</section>

<!-- **************************************************
Modal dialogs
************************************************** -->
<div class="modal modal-batch-progress" style="display:none">
    <div class="modal-header">
        <h3>Fortschritt</h3>
    </div>
    <div class="modal-body">
        <div class="progress progress-striped active">
            <div class="bar" style="width: 0%;"></div>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#" data-twodal-event="cancelbatch" class="btn btn-primary">Batchedit abbrechen</a>
    </div>
</div>

<div class="modal dialog-confirm" style="display:none">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h4>Bitte bestätigen</h4>
    </div>
    <div class="modal-body">
        <p class="prompt-text">Aktion wirklich durchf&uuml;hren?</p>
    </div>
    <div class="modal-footer">
        <a href="#" data-twodal-event="confirm" class="btn btn-primary">Ja</a>
    </div>
</div>
